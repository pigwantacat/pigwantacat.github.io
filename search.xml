<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç»™ä½ ä¸€ä¸ªæ ‘çš„ååºéå†é›†ï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘</title>
      <link href="/2022/01/28/%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E9%9B%86%EF%BC%8C%E5%88%A4%E6%96%AD%E5%85%B6%E6%98%AF%E5%90%A6%E4%B8%BA%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"/>
      <url>/2022/01/28/%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E9%9B%86%EF%BC%8C%E5%88%A4%E6%96%AD%E5%85%B6%E6%98%AF%E5%90%A6%E4%B8%BA%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»™ä½ ä¸€ä¸ªæ ‘çš„ååºéå†é›†ï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘"><a href="#ç»™ä½ ä¸€ä¸ªæ ‘çš„ååºéå†é›†ï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘" class="headerlink" title="ç»™ä½ ä¸€ä¸ªæ ‘çš„ååºéå†é›†ï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘"></a>ç»™ä½ ä¸€ä¸ªæ ‘çš„ååºéå†é›†ï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘</h1><p>åŠ›æ‰£é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-hou-xu-bian-li-xu-lie-lcof/">å‰‘æŒ‡ Offer 33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)</a></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å·²çŸ¥ååºéå†ä¸ºï¼šå·¦å­æ ‘-&gt;å³å­æ ‘-&gt;æ ¹ç»“ç‚¹ï¼Œå°†å…¶ååºéå†ç»“æœæ•°ç»„åè½¬åå˜ä¸ºï¼šæ ¹ç»“ç‚¹-&gt;å³å­æ ‘-&gt;å·¦å­æ ‘</p><p>å¦‚æœå…¶ç¬¦åˆäºŒå‰æœç´¢æ ‘çš„å®šä¹‰ï¼Œé‚£ä¹ˆå®ƒçš„å³å­æ ‘å¿…ç„¶æ¯”æ ¹ç»“ç‚¹å¤§ï¼Œå·¦å­æ ‘å¿…ç„¶æ¯”æ ¹ç»“ç‚¹å°</p><p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå•è°ƒæ ˆï¼ˆå•è°ƒé€’å¢ï¼‰ï¼Œå¯¹äºæ ¹ç»“ç‚¹å’Œå³å­æ ‘æ¥è¯´å…¶æ»¡è¶³å•è°ƒæ ˆçš„æ¡ä»¶ï¼Œå¯¹äºå·¦å­æ ‘æ¥è¯´åˆ™ä¸æ»¡è¶³å•è°ƒæ ˆçš„æ¡ä»¶ï¼Œ</p><p>å½“é‡åˆ°æ•°ç»„å…ƒç´ å°äºå•è°ƒæ ˆé¡¶éƒ¨å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯çŸ¥ç°åœ¨å·²ç»éå†åˆ°æ ‘çš„å·¦å­æ ‘éƒ¨åˆ†ï¼Œåˆ™å¼¹å‡ºæ ‘çš„æ ¹ç»“ç‚¹å’Œå³å­æ ‘ï¼Œç›´åˆ°æ•°ç»„å…ƒç´ å¤§äºç­‰äºå•è°ƒæ ˆé¡¶éƒ¨å…ƒç´ </p><p><code>ä¸ºä»€ä¹ˆè¦ç›´åˆ°æ•°ç»„å…ƒç´ å¤§äºç­‰äºå•è°ƒæ ˆé¡¶éƒ¨å…ƒç´ ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¸…ç©ºå•è°ƒæ ˆï¼Œå› ä¸ºå³å­æ ‘çš„å·¦å­æ ‘ä¹Ÿè¦æ¯”æ ¹ç»“ç‚¹å¤§</code></p><p>å¯¹å·¦å­æ ‘è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyPostorder</span><span class="params">(<span class="keyword">int</span>[] postorder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è®°å½•å‰ä¸€ä¸ªæ ¹ç»“ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">int</span> root = Integer.MAX_VALUE;</span><br><span class="line">        <span class="comment">// å•è°ƒæ ˆ</span></span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="comment">// ä»åå¾€å‰éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = postorder.length-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰ç»“ç‚¹å€¼å¤§äºå‰ä¸€ä¸ªæ ¹ç»“ç‚¹çš„å€¼ï¼Œåˆ™ä¸æ»¡è¶³å³å­æ ‘çš„å·¦å­æ ‘ä¹Ÿè¦æ¯”æ ¹ç»“ç‚¹å¤§</span></span><br><span class="line">            <span class="comment">// å³ä¸æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„å®šä¹‰ï¼Œè¿”å›false</span></span><br><span class="line">            <span class="keyword">if</span> (postorder[i]&gt;root)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ­¤æ—¶å·²ç»éå†å®Œæ ¹ç»“ç‚¹å’Œå³å­æ ‘ï¼Œéå†åˆ°å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; stack.peek()&gt;postorder[i])&#123;</span><br><span class="line">                <span class="comment">// å¼¹å‡ºæ ˆå…ƒç´ ï¼Œå¹¶è®°å½•æ ¹ç»“ç‚¹çš„å€¼</span></span><br><span class="line">                root = stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¾€å•è°ƒæ ˆä¸­æ·»åŠ å…ƒç´ </span></span><br><span class="line">            stack.add(postorder[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹å›¾ï¼š<img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/20220128182832.png?x-oss-process=image/watermark,text_UGlnd2FudEFjYXQ=,type_ZHJvaWRzYW5zZmFsbGJhY2s,size_15,shadow_50,t_85,g_se,x_10,y_10,color_ffffff" alt="ä¾‹å›¾"></p>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ·é¢˜ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ¹æ®å‰åºéå†å’Œä¸­åºéå†ç»“æœé‡æ„äºŒå‰æ ‘</title>
      <link href="/2022/01/27/%E6%A0%B9%E6%8D%AE%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E7%BB%93%E6%9E%9C%E9%87%8D%E6%9E%84%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2022/01/27/%E6%A0%B9%E6%8D%AE%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86%E5%92%8C%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E7%BB%93%E6%9E%9C%E9%87%8D%E6%9E%84%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="æ ¹æ®å‰åºéå†å’Œä¸­åºéå†ç»“æœé‡æ„äºŒå‰æ ‘"><a href="#æ ¹æ®å‰åºéå†å’Œä¸­åºéå†ç»“æœé‡æ„äºŒå‰æ ‘" class="headerlink" title="æ ¹æ®å‰åºéå†å’Œä¸­åºéå†ç»“æœé‡æ„äºŒå‰æ ‘"></a>æ ¹æ®å‰åºéå†å’Œä¸­åºéå†ç»“æœé‡æ„äºŒå‰æ ‘</h1><p>åŠ›æ‰£åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/zhong-jian-er-cha-shu-lcof/">å‰‘æŒ‡ Offer 07. é‡å»ºäºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)</a></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>ä¸­åºéå†ç»“æœä¸ºå·¦å­æ ‘-&gt;æ ¹ç»“ç‚¹-&gt;å³å­æ ‘</p><p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥ç¡®å®šæ ‘çš„èŒƒå›´ï¼Œå·¦å­æ ‘èŒƒå›´ä¸º[0,æ ¹ç»“ç‚¹ï¼‰ï¼Œæ ¹ç»“ç‚¹ï¼Œï¼ˆæ ¹ç»“ç‚¹ï¼Œä¸­åºéå†ç»“æœæ•°ç»„é•¿åº¦-1]</p><p>å†æ ¹æ®å‰åºéå†ç»“æœç¡®å®šæ ¹ç»“ç‚¹ä½ç½®ï¼Œå‰åºéå†ç»“æœä¸ºæ ¹ç»“ç‚¹-&gt;å·¦å­æ ‘-&gt;å³å­æ ‘</p><p>ç„¶åé€’å½’å°±è¡Œäº†</p><p>é€’å½’å‡ºå£ä¸ºï¼šå½“æ ‘èŒƒå›´çš„å·¦è¾¹ç•Œå¤§äºå³è¾¹ç•Œæ—¶ï¼Œè¯´æ˜è¯¥ç»“ç‚¹ä¸ºnullç»“ç‚¹</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‰åºéå†ç»“æœ</span></span><br><span class="line">    <span class="keyword">int</span>[] preorder;</span><br><span class="line">    <span class="comment">// å­˜æ”¾ç»“ç‚¹ä½ç½®ï¼Œç”¨äºç¡®å®šå­æ ‘è¾¹ç•Œ</span></span><br><span class="line">    HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span>[] preorder, <span class="keyword">int</span>[] inorder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å‰åºéå†ç»“æœ</span></span><br><span class="line">        <span class="keyword">this</span>.preorder = preorder;</span><br><span class="line">        <span class="comment">// å­˜æ”¾ç»“ç‚¹ä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; inorder.length; i++) &#123;</span><br><span class="line">            <span class="comment">// Map&lt;ç»“ç‚¹å€¼ï¼Œç»“ç‚¹ä½ç½®&gt;</span></span><br><span class="line">            map.put(inorder[i],i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ ¹ç»“ç‚¹æ ¹æ®å‰åºéå†ç»“æœç¡®å®šï¼Œå·¦å³è¾¹ç•Œæ ¹æ®ä¸­åºéå†ç»“æœç¡®å®š</span></span><br><span class="line">        <span class="comment">// æ ¹ç»“ç‚¹ä¸ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå·¦è¾¹ç•Œä¸º0ï¼Œå³è¾¹ç•Œä¸ºæ•°ç»„é•¿åº¦-1</span></span><br><span class="line">        <span class="keyword">return</span> build(<span class="number">0</span>,<span class="number">0</span>,preorder.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * é‡æ„äºŒå‰æ ‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">build</span><span class="params">(<span class="keyword">int</span> root,<span class="keyword">int</span> left,<span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">        <span class="comment">// é€’å½’å‡ºå£ï¼Œè¯´æ˜è¯¥ç»“ç‚¹ä¸ºnullç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (left&gt;right)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ–°å»ºæ ¹ç»“ç‚¹</span></span><br><span class="line">        TreeNode node = <span class="keyword">new</span> TreeNode(preorder[root]);</span><br><span class="line">        <span class="comment">// æ ¹æ®æ ¹ç»“ç‚¹ç¡®å®šå­æ ‘è¾¹ç•Œ</span></span><br><span class="line">        <span class="keyword">int</span> i = map.get(preorder[root]);</span><br><span class="line">        <span class="comment">// æ ¹ç»“ç‚¹æ ¹æ®å‰åºéå†ç»“æœç¡®å®šï¼Œå·¦å³è¾¹ç•Œæ ¹æ®ä¸­åºéå†ç»“æœç¡®å®š</span></span><br><span class="line">        <span class="comment">// æ ¹ç»“ç‚¹çš„ å·¦å­æ ‘çš„æ ¹ç»“ç‚¹ä¸º å‰åºéå†ç»“æœä¸­ æ ¹ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        <span class="comment">// å·¦å­æ ‘çš„è¾¹ç•Œåˆ†åˆ«ä¸º æ ¹ç»“ç‚¹çš„å·¦è¾¹ç•Œ å’Œ ä¸­åºéå†ç»“æœä¸­æ ¹ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        node.left = build(root+<span class="number">1</span>,left,i-<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// æ ¹ç»“ç‚¹çš„ å³å­æ ‘çš„æ ¹ç»“ç‚¹ä¸º å‰åºéå†ç»“æœä¸­ ï¼ˆæ ¹ç»“ç‚¹+å·¦å­æ ‘ï¼‰çš„ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        <span class="comment">// å³å­æ ‘çš„è¾¹ç•Œåˆ†åˆ«ä¸º ä¸­åºéå†ç»“æœä¸­æ ¹ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ å’Œ æ ¹ç»“ç‚¹çš„å³è¾¹ç•Œ</span></span><br><span class="line">        node.right = build(root+<span class="number">1</span>+i-left,i+<span class="number">1</span>,right);</span><br><span class="line">        <span class="comment">// è¿”å›æ ¹ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ·é¢˜ </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å¹´å…¨å¹´ç†è´¢å°ç»“</title>
      <link href="/2022/01/12/2021%E5%B9%B4%E5%85%A8%E5%B9%B4%E7%90%86%E8%B4%A2%E5%B0%8F%E7%BB%93/"/>
      <url>/2022/01/12/2021%E5%B9%B4%E5%85%A8%E5%B9%B4%E7%90%86%E8%B4%A2%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="2021å¹´å…¨å¹´ç†è´¢å°ç»“"><a href="#2021å¹´å…¨å¹´ç†è´¢å°ç»“" class="headerlink" title="2021å¹´å…¨å¹´ç†è´¢å°ç»“"></a>2021å¹´å…¨å¹´ç†è´¢å°ç»“</h1><h2 id="å»å¹´"><a href="#å»å¹´" class="headerlink" title="å»å¹´"></a>å»å¹´</h2><p>ä»Šå¹´æ”¶ç›Šä¸åˆ›ä¸šæ¿ç›¸å½“ï¼Œä¸‹åŠå¹´å‡ ä¹å…¨ç™½ç©</p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/QQ%E5%9B%BE%E7%89%8720220112173432.png" style="zoom: 33%;" /><h2 id="æœªæ¥"><a href="#æœªæ¥" class="headerlink" title="æœªæ¥"></a>æœªæ¥</h2><p>å°†ä»“ä½é€æ¸è¿‡æ¸¡åˆ°ä¸­æ¦‚äº’è”ã€ç§‘åˆ›50å’Œä¼ åª’</p>]]></content>
      
      
      <categories>
          
          <category> ç†è´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºé‡‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŠ‚å‡æ—¥å‰é—²é’±è´­ä¹°å›½å€ºé€†å›è´­</title>
      <link href="/2021/12/31/%E8%8A%82%E5%81%87%E6%97%A5%E5%89%8D%E9%97%B2%E9%92%B1%E8%B4%AD%E4%B9%B0%E5%9B%BD%E5%80%BA%E9%80%86%E5%9B%9E%E8%B4%AD/"/>
      <url>/2021/12/31/%E8%8A%82%E5%81%87%E6%97%A5%E5%89%8D%E9%97%B2%E9%92%B1%E8%B4%AD%E4%B9%B0%E5%9B%BD%E5%80%BA%E9%80%86%E5%9B%9E%E8%B4%AD/</url>
      
        <content type="html"><![CDATA[<h1 id="èŠ‚å‡æ—¥å‰é—²é’±è´­ä¹°å›½å€ºé€†å›è´­"><a href="#èŠ‚å‡æ—¥å‰é—²é’±è´­ä¹°å›½å€ºé€†å›è´­" class="headerlink" title="èŠ‚å‡æ—¥å‰é—²é’±è´­ä¹°å›½å€ºé€†å›è´­"></a>èŠ‚å‡æ—¥å‰é—²é’±è´­ä¹°å›½å€ºé€†å›è´­</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p><a href="https://zhuanlan.zhihu.com/p/35244182">å²ä¸Šæœ€å…¨çš„å›½å€ºé€†å›è´­è®²è§£ï¼ˆé™„æ“ä½œï¼‰ - çŸ¥ä¹ (zhihu.com)</a></p><p><a href="https://www.zhihu.com/question/54385280">å›½å€ºé€†å›è´­æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆæ“ä½œï¼Œæ”¶ç›Šå¦‚ä½•ï¼Ÿ - çŸ¥ä¹ (zhihu.com)</a></p><p>å¦‚æœè¿˜ä¸æ‡‚çš„è¯·è‡ªè¡Œç™¾åº¦</p><h2 id="ç§ç±»"><a href="#ç§ç±»" class="headerlink" title="ç§ç±»"></a>ç§ç±»</h2><p>åˆ†ä¸ºæ·±å¸‚å’Œæ²ªå¸‚ï¼Œæ²ªå¸‚é—¨æ§›è¾ƒé«˜ï¼Œç›¸å¯¹çš„åˆ©ç‡ä¹Ÿè¾ƒé«˜</p><p>æ·±å¸‚ï¼š</p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%287%29.png" alt="image-20211230113710056" style="zoom:50%;" /><p>æ²ªå¸‚ï¼š</p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%288%29.png" alt="image-20211230114203304" style="zoom:50%;" /><h2 id="é¢„æœŸæ”¶ç›Š"><a href="#é¢„æœŸæ”¶ç›Š" class="headerlink" title="é¢„æœŸæ”¶ç›Š"></a>é¢„æœŸæ”¶ç›Š</h2><p>å…¶é¢„æœŸæ”¶ç›Šæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œä¾‹å¦‚ï¼š</p><p>åœ¨2021.12.30ä¸Šåˆ8ç‚¹58</p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%286%29.png" alt="image-20211230113605086" style="zoom:50%;" /><p>åœ¨2021.12.30ä¸Šåˆ10ç‚¹40</p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%287%29.png" alt="image-20211230113710056" style="zoom:50%;" /><p>å½“è´­ä¹°äº†å…·ä½“æŸä¸€æœŸé€†å›è´­ä¹‹åï¼Œå…¶æ”¶ç›Šå°±å¯ä»¥ç¡®å®šäº†</p><h2 id="æ¨èè´­ä¹°æ—¶é—´"><a href="#æ¨èè´­ä¹°æ—¶é—´" class="headerlink" title="æ¨èè´­ä¹°æ—¶é—´"></a>æ¨èè´­ä¹°æ—¶é—´</h2><p>å›½å€ºé€†å›è´­ä¸€èˆ¬<code>åœ¨æ”¾å‡å‰ä¸¤å¤©</code>åˆ©ç‡æ³¢åŠ¨å¤§ï¼Œ<code>åœ¨è¶Šé‡å¤§çš„èŠ‚å‡æ—¥å‰å…¶æ³¢åŠ¨è¶Šå¤§</code></p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%281%29.png" alt="image-20211230114909015" style="zoom:50%;" /><h2 id="æ˜¯å¦å€¼å¾—é•¿æœŸæŒæœ‰"><a href="#æ˜¯å¦å€¼å¾—é•¿æœŸæŒæœ‰" class="headerlink" title="æ˜¯å¦å€¼å¾—é•¿æœŸæŒæœ‰"></a>æ˜¯å¦å€¼å¾—é•¿æœŸæŒæœ‰</h2><p><code>ä¸æ˜¯å¾ˆæ¨èé•¿æœŸæŒæœ‰</code>ã€‚å› ä¸ºé€†å›è´­çŸ­æœŸæ³¢åŠ¨è¾ƒå¤§ï¼Œé•¿æœŸæ³¢åŠ¨è¾ƒå°ã€‚</p><ul><li>å¦‚æœæƒ³è¦è·å¾—è¶…é¢æ”¶ç›Šï¼Œä¸æ¨èé•¿æœŸæŒæœ‰ï¼›</li><li>å¦‚æœé¦–å…ˆè€ƒè™‘çš„æ˜¯ä¿éšœèµ„é‡‘å®‰å…¨ï¼Œé‚£ä¹ˆæ¨èé•¿æœŸæŒæœ‰ï¼Œå› ä¸ºé€†å›è´­çš„å®‰å…¨æ€§å¾ˆé«˜</li></ul><h2 id="æ¨èè´­ä¹°é‡‘é¢"><a href="#æ¨èè´­ä¹°é‡‘é¢" class="headerlink" title="æ¨èè´­ä¹°é‡‘é¢"></a>æ¨èè´­ä¹°é‡‘é¢</h2><p>åªæ¨èä½¿ç”¨<code>åˆ¸å•†è´¦æˆ·ä¸­çš„é—²é’±</code>è¿›è¡Œè´­ä¹°</p><ul><li><p>é€†å›è´­çŸ­æœŸæ³¢åŠ¨å¤§ï¼Œæ‰ä¼šæœ‰ç›¸å¯¹è¾ƒé«˜çš„æ”¶ç›Š</p></li><li><p>å…¶æ¬¡æ ¹æ®ä½ è´­ä¹°çš„å“ç§ä¸åŒï¼Œå…¶å¯ç”¨å’Œå¯å–çš„æ—¶é—´ä¹Ÿä¸ä¸€å®šç›¸åŒ</p><ul><li>ä¾‹å¦‚æˆ‘åœ¨2021.12.30è´­ä¹°äº†1å¤©æœŸçš„é€†å›è´­ï¼Œæˆ‘çš„å¯ç”¨æ—¶é—´æ˜¯2021.12.31ï¼Œä½†æˆ‘çš„å¯å–æ—¶é—´æ˜¯2022.01.04</li><li><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%282%29.png" alt="image-20211230140459685" style="zoom:50%;" /></li></ul></li><li><p>ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨åˆ¸å•†è´¦æˆ·ä¸­çš„é—²é’±è´­ä¹°</p><ul><li>è¿˜æ˜¯æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨æœ¬äº¤æ˜“æ—¥å†…æˆ‘ä¸å‡†å¤‡è¿›è¡Œå…¶ä»–äº¤æ˜“ï¼Œæˆ‘è´­ä¹°äº†<code>1å¤©æœŸçš„é€†å›è´­</code>ä¹‹åï¼Œå…¶èµ„é‡‘ä»å¯ä»¥ç”¨äºç¬¬äºŒå¤©çš„äº¤æ˜“ä½¿ç”¨</li></ul></li><li><p>ä¸ºä»€ä¹ˆè¦å¼ºè°ƒæ˜¯åˆ¸å•†è´¦æˆ·äº†</p><ul><li>è¿˜æ˜¯æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœä½ ä¸æ˜¯åˆ¸å•†è´¦æˆ·ä¸­çš„é—²é’±ï¼Œåˆ™éœ€è¦ç­‰åˆ°èŠ‚å‡æ—¥è¿‡åï¼Œå³2022.01.04æ‰èƒ½å°†è¿™ç¬”é’±æç°åˆ°é“¶è¡Œå¡ä¸­</li></ul></li></ul><h2 id="å¦‚ä½•æŸ¥çœ‹å…·ä½“æ”¶ç›Š"><a href="#å¦‚ä½•æŸ¥çœ‹å…·ä½“æ”¶ç›Š" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹å…·ä½“æ”¶ç›Š"></a>å¦‚ä½•æŸ¥çœ‹å…·ä½“æ”¶ç›Š</h2><p>å½“ä½ è´­ä¹°ä¹‹åï¼Œä½ å¯ä»¥åœ¨å›½å€ºé€†å›è´­ä¸­çš„<code>æˆ‘çš„é€†å›è´­</code>æŸ¥çœ‹</p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%283%29.png" alt="image-20211230141513504" style="zoom:100%;" /><h2 id="å¦‚ä½•è´­ä¹°"><a href="#å¦‚ä½•è´­ä¹°" class="headerlink" title="å¦‚ä½•è´­ä¹°"></a>å¦‚ä½•è´­ä¹°</h2><p><code>å„å¤§åˆ¸å•†appçš„å›½å€ºé€†å›è´­æ¿å—</code>ï¼Œè¯·å…ˆè‡ªè¡Œæ³¨å†Œåˆ¸å•†è´¦æˆ·</p><p>ä¾‹å¦‚ï¼šä¸œæ–¹è´¢å¯Œæ‰‹æœºç«¯</p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/image-111%20%284%29.png" alt="image-20211230113157123" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> ç†è´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºé‡‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ›æ‰£LFUç¼“å­˜é¢˜è§£</title>
      <link href="/2021/12/21/%E5%8A%9B%E6%89%A3LFU%E7%BC%93%E5%AD%98%E9%A2%98%E8%A7%A3/"/>
      <url>/2021/12/21/%E5%8A%9B%E6%89%A3LFU%E7%BC%93%E5%AD%98%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ›æ‰£LFUç¼“å­˜é¢˜è§£"><a href="#åŠ›æ‰£LFUç¼“å­˜é¢˜è§£" class="headerlink" title="åŠ›æ‰£LFUç¼“å­˜é¢˜è§£"></a>åŠ›æ‰£LFUç¼“å­˜é¢˜è§£</h1><p>é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/lfu-cache/">460. LFU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)</a></p><p>å‚è€ƒï¼š<a href="https://leetcode-cn.com/problems/lfu-cache/solution/java-13ms-shuang-100-shuang-xiang-lian-biao-duo-ji/">Java 13ms åŒ100% åŒå‘é“¾è¡¨ å¤šè§£æ³•è¶…å…¨ğŸ˜‚ - LFU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)</a>ï¼Œ<a href="https://leetcode-cn.com/problems/lfu-cache/solution/chao-xiang-xi-tu-jie-dong-tu-yan-shi-460-lfuhuan-c/">è¶…è¯¦ç»†å›¾è§£+åŠ¨å›¾æ¼”ç¤º 460. LFUç¼“å­˜ - LFU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)</a></p><p>æ€è·¯ï¼šä¸LRUæ€è·¯ç±»ä¼¼ï¼ŒNodeç»“ç‚¹ä¸­å¢åŠ ä¸€ä¸ªå±æ€§freqç”¨äºè¡¨ç¤ºè¯¥é¡¹çš„ä½¿ç”¨æ¬¡æ•°ï¼ŒåŒå‘é“¾è¡¨ä¸LRUä¸­çš„ä¸€è‡´ï¼ŒLRUCacheæ˜¯Map+åŒå‘é“¾è¡¨ï¼Œè€ŒLFUCacheæ˜¯Map+Map&lt;freqï¼ŒåŒå‘é“¾è¡¨&gt;ï¼Œå› ä¸ºLRUåªéœ€æ‰¾å‡ºæœ€ä¹…æœªä½¿ç”¨çš„Nodeï¼Œè€ŒLFUéœ€è¦æ‰¾å‡ºä½¿ç”¨æ¬¡æ•°æœ€å°‘ï¼ˆå¦‚æœæœ‰å¤šä¸ªä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„ï¼Œåˆ™æ‰¾å‡ºå…¶ä¸­æœ€ä¹…æœªä½¿ç”¨çš„ï¼‰</p><h2 id="LRUå¯¹ç…§å­¦ä¹ "><a href="#LRUå¯¹ç…§å­¦ä¹ " class="headerlink" title="LRUå¯¹ç…§å­¦ä¹ "></a>LRUå¯¹ç…§å­¦ä¹ </h2><p>è¯¦æƒ…è¯·å‚è€ƒå¦ä¸€ç¯‡<a href="https://www.zhbblog.top/2021/08/16/%E5%8A%9B%E6%89%A3LRU%E7%BC%93%E5%AD%98%E9%A2%98%E8%A7%A3/">åŠ›æ‰£LRUç¼“å­˜é¢˜è§£ </a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRU</span> </span>&#123;</span><br><span class="line">    DoubleLinkedList list;</span><br><span class="line">    HashMap&lt;Integer, Node&gt; map;</span><br><span class="line">    <span class="keyword">int</span> cap;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRU</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">        list = <span class="keyword">new</span> DoubleLinkedList();</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">this</span>.cap = cap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(key)) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> value = map.get(key).value;</span><br><span class="line">        put(key, value);</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        Node newNode = <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            list.delete(map.get(key));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.size() &gt; cap) &#123;</span><br><span class="line">                map.remove(list.delLast());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        list.addFirst(newNode);</span><br><span class="line">        map.put(key, newNode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleLinkedList</span> </span>&#123;</span><br><span class="line">    Node head;</span><br><span class="line">    Node tail;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DoubleLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        head = <span class="keyword">new</span> Node(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> Node(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(Node newNode)</span> </span>&#123;</span><br><span class="line">        newNode.next = head.next;</span><br><span class="line">        newNode.prev = head;</span><br><span class="line">        head.next.prev = newNode;</span><br><span class="line">        head.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delete</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = node.value;</span><br><span class="line">        node.prev.next = node.next;</span><br><span class="line">        node.next.prev = node.prev;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head.next == tail) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> delete(tail.prev);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    Node prev;</span><br><span class="line">    Node next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LFU"><a href="#LFU" class="headerlink" title="LFU"></a>LFU</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LFUCache</span> </span>&#123;</span><br><span class="line">    <span class="comment">// keyä¸ºé¡¹çš„ä½¿ç”¨æ¬¡æ•°ï¼Œvalueä¸ºç›¸åŒä½¿ç”¨æ¬¡æ•°çš„Nodeç»“ç‚¹ç»„æˆçš„åŒå‘é“¾è¡¨</span></span><br><span class="line">    HashMap&lt;Integer, DoubleLinkedList&gt; freqMap;</span><br><span class="line">    <span class="comment">// keyä¸ºkeyï¼Œvalueä¸ºNodeç»“ç‚¹</span></span><br><span class="line">    HashMap&lt;Integer, Node&gt; map;</span><br><span class="line">    <span class="comment">// å®¹é‡</span></span><br><span class="line">    <span class="keyword">int</span> cap;</span><br><span class="line">    <span class="comment">// å½“å‰å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    <span class="comment">// æ‰€æœ‰å…ƒç´ ä¸­çš„æœ€å°‘ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span> min;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> capacity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LFUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ–°å»ºmap</span></span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// æ–°å»ºfreqMap</span></span><br><span class="line">        freqMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// å®¹é‡</span></span><br><span class="line">        <span class="keyword">this</span>.cap = capacity;</span><br><span class="line">        <span class="comment">// å½“å‰å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// æœ€å°‘ä½¿ç”¨æ¬¡æ•°ä¸º0</span></span><br><span class="line">        min = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡keyï¼Œè·å–ç›¸åº”çš„valueçš„å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœmapä¸­ä¸å­˜åœ¨ï¼Œåˆ™åœ¨freqMapä¹Ÿä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›-1</span></span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(key))&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è·å–ç»“ç‚¹</span></span><br><span class="line">        Node node = map.get(key);</span><br><span class="line">        <span class="comment">// è·å–value</span></span><br><span class="line">        <span class="keyword">int</span> value = node.value;</span><br><span class="line">        <span class="comment">// ä½¿è¯¥ç»“ç‚¹çš„ä½¿ç”¨æ¬¡æ•°å¢åŠ 1</span></span><br><span class="line">        freqInc(node);</span><br><span class="line">        <span class="comment">// è¿”å›value</span></span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¾å…¥å¯¹åº”keyã€valueçš„ç»“ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœLFUå®¹é‡ä¸º0ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (cap==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä»mapä¸­è·å–ç»“ç‚¹</span></span><br><span class="line">        Node node = map.get(key);</span><br><span class="line">        <span class="comment">// å¦‚æœå­˜åœ¨è¯¥ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (node!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">// æ›´æ”¹ç»“ç‚¹çš„value</span></span><br><span class="line">            node.value=value;</span><br><span class="line">            <span class="comment">// å¹¶å¢åŠ å…¶ç»“ç‚¹ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">            freqInc(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸å­˜åœ¨è¯¥ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰å…ƒç´ ä¸ªæ•°å¤§äºç­‰äºLFUå®¹é‡</span></span><br><span class="line">            <span class="keyword">if</span> (size &gt;= cap)&#123;</span><br><span class="line">                <span class="comment">// è·å–ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„ç»“ç‚¹çš„åŒå‘é“¾è¡¨</span></span><br><span class="line">                DoubleLinkedList minList = freqMap.get(min);</span><br><span class="line">                <span class="comment">// ä»mapä¸­ç§»é™¤æœ€å°‘æœ€ä¹…æœªä½¿ç”¨çš„ç»“ç‚¹</span></span><br><span class="line">                map.remove(minList.tail.prev.key);</span><br><span class="line">                <span class="comment">// ä»åŒå‘é“¾è¡¨ä¸­åˆ é™¤è¯¥ç»“ç‚¹</span></span><br><span class="line">                minList.delLast();</span><br><span class="line">                <span class="comment">// å½“å‰å…ƒç´ ä¸ªæ•°å‡1</span></span><br><span class="line">                size--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ–°å»ºnodeç»“ç‚¹</span></span><br><span class="line">            Node newNode = <span class="keyword">new</span> Node(key, value);</span><br><span class="line">            <span class="comment">// åœ¨mapä¸­æ”¾å…¥ç»“ç‚¹</span></span><br><span class="line">            map.put(key,newNode);</span><br><span class="line">            <span class="comment">// è·å–ä½¿ç”¨æ¬¡æ•°ä¸º1çš„åŒå‘é“¾è¡¨</span></span><br><span class="line">            DoubleLinkedList list = freqMap.get(<span class="number">1</span>);</span><br><span class="line">            <span class="comment">// å¦‚æœåŒå‘é“¾è¡¨ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span> (list==<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">// åˆ›å»ºåŒå‘é“¾è¡¨</span></span><br><span class="line">                list = <span class="keyword">new</span> DoubleLinkedList();</span><br><span class="line">                <span class="comment">// å°†åŒå‘é“¾è¡¨æ”¾å…¥freqMapä¸­</span></span><br><span class="line">                freqMap.put(<span class="number">1</span>,list);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å°†è¯¥ç»“ç‚¹åŠ å…¥åˆ°å¯¹åº”çš„åŒå‘é“¾è¡¨ä¸­</span></span><br><span class="line">            list.addFirst(newNode);</span><br><span class="line">            <span class="comment">// å½“å‰å…ƒç´ ä¸ªæ•°åŠ 1</span></span><br><span class="line">            size++;</span><br><span class="line">            <span class="comment">// å½“å‰æœ€å°‘ä½¿ç”¨æ¬¡æ•°ä¸º1</span></span><br><span class="line">            min=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†ä¼ å…¥ç»“ç‚¹çš„ä½¿ç”¨æ¬¡æ•°è‡ªå¢1ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°ç›¸åº”ä½¿ç”¨æ¬¡æ•°çš„åŒå‘é“¾è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">freqInc</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰ç»“ç‚¹çš„ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">int</span> freq = node.freq;</span><br><span class="line">        <span class="comment">// è·å–å¯¹åº”ä½¿ç”¨æ¬¡æ•°çš„åŒå‘é“¾è¡¨</span></span><br><span class="line">        DoubleLinkedList list = freqMap.get(freq);</span><br><span class="line">        <span class="comment">// åœ¨åŒå‘é“¾è¡¨ä¸­åˆ é™¤è¯¥ç»“ç‚¹</span></span><br><span class="line">        list.delete(node);</span><br><span class="line">        <span class="comment">// å¦‚æœåˆ é™¤çš„æ˜¯ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„åŒå‘é“¾è¡¨çš„æœ€åä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (min==freq &amp;&amp; list.head.next==list.tail)&#123;</span><br><span class="line">            min++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»“ç‚¹ä½¿ç”¨æ¬¡æ•°è‡ªå¢1</span></span><br><span class="line">        freq++;</span><br><span class="line">        node.freq++;</span><br><span class="line">        <span class="comment">// å†æ¬¡è·å–å¯¹åº”ä½¿ç”¨æ¬¡æ•°çš„åŒå‘é“¾è¡¨</span></span><br><span class="line">        list = freqMap.get(freq);</span><br><span class="line">        <span class="comment">// å¦‚æœåŒå‘é“¾è¡¨ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (list==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºåŒå‘é“¾è¡¨</span></span><br><span class="line">            list = <span class="keyword">new</span> DoubleLinkedList();</span><br><span class="line">            <span class="comment">// å°†åŒå‘é“¾è¡¨æ”¾å…¥freqMapä¸­</span></span><br><span class="line">            freqMap.put(freq,list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†è¯¥ç»“ç‚¹åŠ å…¥åˆ°å¯¹åº”çš„åŒå‘é“¾è¡¨ä¸­</span></span><br><span class="line">        list.addFirst(node);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰çš„åŒå‘é“¾è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleLinkedList</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åŒå‘é“¾è¡¨ç»“æ„</span></span><br><span class="line">    <span class="comment">// nextæŒ‡é’ˆï¼šhead -&gt; ç¬¬ä¸€ä¸ªç»“ç‚¹ -&gt; ç¬¬äºŒä¸ªç»“ç‚¹ -&gt; ... -&gt; tail</span></span><br><span class="line">    <span class="comment">// prevæŒ‡é’ˆï¼šhead &lt;- ç¬¬ä¸€ä¸ªç»“ç‚¹ &lt;- ç¬¬äºŒä¸ªç»“ç‚¹ &lt;- ... &lt;- tail</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åŒå‘é“¾è¡¨çš„å¤´ç»“ç‚¹</span></span><br><span class="line">    Node head;</span><br><span class="line">    <span class="comment">// åŒå‘é“¾è¡¨çš„å°¾ç»“ç‚¹</span></span><br><span class="line">    Node tail;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å»ºåŒå‘é“¾è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DoubleLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ–°å»ºå¤´ç»“ç‚¹</span></span><br><span class="line">        head = <span class="keyword">new</span> Node(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// æ–°å»ºå°¾ç»“ç‚¹</span></span><br><span class="line">        tail = <span class="keyword">new</span> Node(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// å¤´ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘å°¾ç»“ç‚¹</span></span><br><span class="line">        head.next = tail;</span><br><span class="line">        <span class="comment">// å°¾ç»“ç‚¹çš„prevæŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹</span></span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†ç»“ç‚¹åŠ å…¥åŒå‘é“¾è¡¨çš„å¤´éƒ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(Node newNode)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ–°ç»“ç‚¹çš„prevæŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹</span></span><br><span class="line">        newNode.prev = head;</span><br><span class="line">        <span class="comment">// æ–°ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        newNode.next = head.next;</span><br><span class="line">        <span class="comment">// å¤´ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„prevæŒ‡é’ˆæŒ‡å‘æ–°ç»“ç‚¹</span></span><br><span class="line">        head.next.prev = newNode;</span><br><span class="line">        <span class="comment">// å¤´ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘æ–°ç»“ç‚¹</span></span><br><span class="line">        head.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨åŒå‘é“¾è¡¨ä¸­åˆ é™¤å¯¹åº”çš„ç»“ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delete</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ‹¿åˆ°å½“å‰çš„ç»“ç‚¹çš„value</span></span><br><span class="line">        <span class="keyword">int</span> value = node.value;</span><br><span class="line">        <span class="comment">// å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„prevæŒ‡é’ˆæŒ‡å‘å½“å‰ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        node.next.prev = node.prev;</span><br><span class="line">        <span class="comment">// å½“å‰ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        node.prev.next = node.next;</span><br><span class="line">        <span class="comment">// è¿”å›value</span></span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å°¾ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœåŒå‘é“¾è¡¨ä¸ºç©ºï¼Œç›´æ¥è¿”å›-1</span></span><br><span class="line">        <span class="keyword">if</span> (head.next == tail) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œå³å°¾ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> delete(tail.prev);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰çš„nodeç»“ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="comment">// key</span></span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    <span class="comment">// value</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// prevæŒ‡é’ˆ</span></span><br><span class="line">    Node prev;</span><br><span class="line">    <span class="comment">// nextæŒ‡é’ˆ </span></span><br><span class="line">    Node next;</span><br><span class="line">    <span class="comment">// ç»“ç‚¹ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span> freq;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºnodeç»“ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// key</span></span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="comment">// value</span></span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="comment">// ç»“ç‚¹ä½¿ç”¨æ¬¡æ•°ä¸º1</span></span><br><span class="line">        freq = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ·é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2021/11/28/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/11/28/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="dockerå¸¸ç”¨å‘½ä»¤"><a href="#dockerå¸¸ç”¨å‘½ä»¤" class="headerlink" title="dockerå¸¸ç”¨å‘½ä»¤"></a>dockerå¸¸ç”¨å‘½ä»¤</h1><p>å‚è€ƒäº:<a href="https://www.kuangstudy.com/">é¦–é¡µ-KuangStudy</a></p><h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹dockerç‰ˆæœ¬</span></span><br><span class="line">docker version</span><br><span class="line">docker -v</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹dockerç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line">docker info</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¸®åŠ©</span></span><br><span class="line">docker --help</span><br></pre></td></tr></table></figure><h2 id="é•œåƒå‘½ä»¤"><a href="#é•œåƒå‘½ä»¤" class="headerlink" title="é•œåƒå‘½ä»¤"></a>é•œåƒå‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹é•œåƒåˆ—è¡¨</span></span><br><span class="line">docker images </span><br><span class="line">ç­‰ä»·äº docker image ls</span><br><span class="line"><span class="meta">#</span><span class="bash">å¯é€‰å‚æ•°</span></span><br><span class="line">-a   #åˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ </span><br><span class="line">-q   #åªæ˜¾ç¤ºé•œåƒid </span><br><span class="line">--digests   #æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯</span><br><span class="line"><span class="meta">#</span><span class="bash">ç¤ºä¾‹</span></span><br><span class="line">docker images -aq</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æœç´¢é•œåƒ</span></span><br><span class="line">docker search IMAGE_NAME:TAG</span><br><span class="line"><span class="meta">#</span><span class="bash">å¯é€‰å‚æ•°</span></span><br><span class="line">--filter=stars=50 ï¼š åˆ—å‡ºæ”¶è—æ•°ä¸å°äºæŒ‡å®šå€¼çš„é•œåƒã€‚</span><br><span class="line"><span class="meta">#</span><span class="bash">ç¤ºä¾‹</span></span><br><span class="line">docker search mysql --filter=stars=5000</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ‹‰å–é•œåƒ</span></span><br><span class="line">docker pull IMAGE_NAME:TAG</span><br><span class="line"><span class="meta">#</span><span class="bash">ç¤ºä¾‹</span></span><br><span class="line">docker pull mysql:8.0 #å¦‚ä¸æŒ‡å®šç‰ˆæœ¬ï¼Œé»˜è®¤æŒ‡å®šlatest</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ é™¤é•œåƒ</span></span><br><span class="line">docker rmi IMAGE_NAME:TAG</span><br><span class="line"><span class="meta">#</span><span class="bash">å¯é€‰å‚æ•°</span></span><br><span class="line">-f: å¼ºåˆ¶åˆ é™¤</span><br><span class="line"><span class="meta">#</span><span class="bash">ç¤ºä¾‹</span></span><br><span class="line">docker rmi -f mysql:8.0</span><br><span class="line">docker rmi -f $(docker images -aq)  #åˆ é™¤å…¨éƒ¨</span><br></pre></td></tr></table></figure><h2 id="å®¹å™¨å‘½ä»¤"><a href="#å®¹å™¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å‘½ä»¤"></a>å®¹å™¨å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker run IMAGE_NAME</span><br><span class="line"><span class="meta">#</span><span class="bash">å¯ç”¨å‚æ•°</span></span><br><span class="line">--name=&quot;Name&quot; #ç»™å®¹å™¨æŒ‡å®šåå­—</span><br><span class="line">-d   #ä»¥åå°æ–¹å¼è¿è¡Œ</span><br><span class="line">-i   #ä»¥äº¤äº’æ¨¡å¼è¿è¡Œ</span><br><span class="line">-t   #æ–°å¼€ä¸€ä¸ªç«¯å£</span><br><span class="line">-p   #ï¼ˆå°å†™ï¼‰æŒ‡å®šç«¯å£</span><br><span class="line">-P   #ï¼ˆå¤§å†™ï¼‰éšæœºç«¯å£</span><br><span class="line"><span class="meta">#</span><span class="bash">ç¤ºä¾‹</span></span><br><span class="line">docker run --name=mycentos -it centos /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span></span><br><span class="line">docker ps</span><br><span class="line">ç­‰ä»·äºdocker container ls</span><br><span class="line"><span class="meta">#</span><span class="bash">å¯é€‰å‚æ•°</span></span><br><span class="line">-a   #æ‰€æœ‰å®¹å™¨</span><br><span class="line">-l   #æœ€è¿‘åˆ›å»ºçš„å®¹å™¨</span><br><span class="line">-n=?   #æœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨</span><br><span class="line">-q   #åªæ˜¾ç¤ºå®¹å™¨ç¼–å·</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">é€€å‡ºå®¹å™¨</span></span><br><span class="line">exit   #é€€å‡ºå¹¶åœæ­¢å®¹å™¨</span><br><span class="line">ctrl+P+Q   #é€€å‡ºä¸åœæ­¢å®¹å™¨</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker start CONTAINER_ID or CONTAINER_NAME  </span><br><span class="line"><span class="meta">#</span><span class="bash">é‡å¯å®¹å™¨</span></span><br><span class="line">docker restart  CONTAINER_ID or CONTAINER_NAME</span><br><span class="line"><span class="meta">#</span><span class="bash">åœæ­¢å®¹å™¨</span></span><br><span class="line">docker stop  CONTAINER_ID or CONTAINER_NAME</span><br><span class="line"><span class="meta">#</span><span class="bash">å¼ºè¡Œåœæ­¢å®¹å™¨</span></span><br><span class="line">docker kill  CONTAINER_ID or CONTAINER_NAME</span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ é™¤å®¹å™¨</span></span><br><span class="line">docker rm CONTAINER_ID or CONTAINER_NAME</span><br><span class="line">docker rm -f $(docker ps -aq)#åˆ é™¤æ‰€æœ‰å®¹å™¨</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>å…¶ä»–å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line">docker logs CONTAINER_ID</span><br><span class="line"><span class="meta">#</span><span class="bash">å¯é€‰å‚æ•°</span></span><br><span class="line">-t   #æ˜¾ç¤ºæ—¶é—´æˆ³</span><br><span class="line">-f   #æ‰“å°æœ€æ–°æ—¥å¿—</span><br><span class="line">--tail   #æ˜¾ç¤ºæ•°é‡</span><br><span class="line"><span class="meta">#</span><span class="bash">ç¤ºä¾‹</span></span><br><span class="line">docker logs -tf --tail 10 c8530dbbe3b4</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯</span></span><br><span class="line">docker top CONTAINER_ID</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹å…ƒæ•°æ®</span></span><br><span class="line">docker inspect CONTAINER_ID/IMAGE_ID</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">exec     #åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯ä»¥å¯åŠ¨æ–°çš„è¿›ç¨‹</span><br><span class="line">attach   #ç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ä»å®¹å™¨ä¸­æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº</span></span><br><span class="line">docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„ ç›®çš„ä¸»æœºè·¯å¾„</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨å‘½ä»¤å›¾"><a href="#å¸¸ç”¨å‘½ä»¤å›¾" class="headerlink" title="å¸¸ç”¨å‘½ä»¤å›¾"></a>å¸¸ç”¨å‘½ä»¤å›¾</h2><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/QQ%E5%9B%BE%E7%89%8720211128205309.png" alt="img"></p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/QQ%E6%88%AA%E5%9B%BE20211128214723.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ±‚1+1/2+1/3+2/3+1/4+2/+3/4+.....æ±‚å’Œå…¬å¼</title>
      <link href="/2021/11/27/%E6%B1%821-1-2-1-3-2-3-1-4-2-3-4-%E6%B1%82%E5%92%8C%E5%85%AC%E5%BC%8F/"/>
      <url>/2021/11/27/%E6%B1%821-1-2-1-3-2-3-1-4-2-3-4-%E6%B1%82%E5%92%8C%E5%85%AC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="æ±‚1-1-2-1-3-2-3-1-4-2-3-4-â€¦-æ±‚å’Œå…¬å¼"><a href="#æ±‚1-1-2-1-3-2-3-1-4-2-3-4-â€¦-æ±‚å’Œå…¬å¼" class="headerlink" title="æ±‚1+1/2+1/3+2/3+1/4+2/+3/4+â€¦..æ±‚å’Œå…¬å¼"></a>æ±‚1+1/2+1/3+2/3+1/4+2/+3/4+â€¦..æ±‚å’Œå…¬å¼</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>1+ï¼ˆ1/2ï¼‰+ï¼ˆ1/3+2/3ï¼‰+ï¼ˆ1/4+2/4+3/4ï¼‰+ï¼ˆ1/5+2/5+3/5+4/5ï¼‰+ï¼ˆ1/6+2/6+3/6+4/6+5/6ï¼‰â€¦â€¦+ï¼ˆ1/n+2/n+â€¦â€¦+(n-2/n)+(n-1/n)ï¼‰</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-11-26%20163639.png" alt="img"></p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-11-26%20164523.png" alt="img"></p><h2 id="ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼"><a href="#ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼" class="headerlink" title="ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼"></a>ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼</h2><p>ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼ä¸ºï¼š</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/7af40ad162d9f2d3dad39893b9ec8a136227cc88.png" alt="img"></p><h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>ç”±é¢˜å¯çŸ¥ï¼ša1=0ï¼Œd=1</p><p>ä»£å…¥å¯å¾—</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-11-26%20164925.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ·é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸¤ä¸ªäººç©æŠ›ç¡¬å¸çš„æ¸¸æˆï¼Œè°å…ˆæŠ›åˆ°æ­£é¢å°±è·èƒœã€‚é‚£ä¹ˆå…ˆæŠ›çš„äººè·èƒœæ¦‚ç‡ä¸ºï¼Ÿ</title>
      <link href="/2021/11/25/%E4%B8%A4%E4%B8%AA%E4%BA%BA%E7%8E%A9%E6%8A%9B%E7%A1%AC%E5%B8%81%E7%9A%84%E6%B8%B8%E6%88%8F%EF%BC%8C%E8%B0%81%E5%85%88%E6%8A%9B%E5%88%B0%E6%AD%A3%E9%9D%A2%E5%B0%B1%E8%8E%B7%E8%83%9C%E3%80%82%E9%82%A3%E4%B9%88%E5%85%88%E6%8A%9B%E7%9A%84%E4%BA%BA%E8%8E%B7%E8%83%9C%E6%A6%82%E7%8E%87%E4%B8%BA%EF%BC%9F/"/>
      <url>/2021/11/25/%E4%B8%A4%E4%B8%AA%E4%BA%BA%E7%8E%A9%E6%8A%9B%E7%A1%AC%E5%B8%81%E7%9A%84%E6%B8%B8%E6%88%8F%EF%BC%8C%E8%B0%81%E5%85%88%E6%8A%9B%E5%88%B0%E6%AD%A3%E9%9D%A2%E5%B0%B1%E8%8E%B7%E8%83%9C%E3%80%82%E9%82%A3%E4%B9%88%E5%85%88%E6%8A%9B%E7%9A%84%E4%BA%BA%E8%8E%B7%E8%83%9C%E6%A6%82%E7%8E%87%E4%B8%BA%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸¤ä¸ªäººç©æŠ›ç¡¬å¸çš„æ¸¸æˆï¼Œè°å…ˆæŠ›åˆ°æ­£é¢å°±è·èƒœã€‚é‚£ä¹ˆå…ˆæŠ›çš„äººè·èƒœæ¦‚ç‡ä¸ºï¼Ÿ"><a href="#ä¸¤ä¸ªäººç©æŠ›ç¡¬å¸çš„æ¸¸æˆï¼Œè°å…ˆæŠ›åˆ°æ­£é¢å°±è·èƒœã€‚é‚£ä¹ˆå…ˆæŠ›çš„äººè·èƒœæ¦‚ç‡ä¸ºï¼Ÿ" class="headerlink" title="ä¸¤ä¸ªäººç©æŠ›ç¡¬å¸çš„æ¸¸æˆï¼Œè°å…ˆæŠ›åˆ°æ­£é¢å°±è·èƒœã€‚é‚£ä¹ˆå…ˆæŠ›çš„äººè·èƒœæ¦‚ç‡ä¸ºï¼Ÿ"></a>ä¸¤ä¸ªäººç©æŠ›ç¡¬å¸çš„æ¸¸æˆï¼Œè°å…ˆæŠ›åˆ°æ­£é¢å°±è·èƒœã€‚é‚£ä¹ˆå…ˆæŠ›çš„äººè·èƒœæ¦‚ç‡ä¸ºï¼Ÿ</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å…ˆæŠ›è·èƒœæƒ…å†µï¼š</p><ul><li>æ­£</li><li>ååæ­£</li><li>ååååæ­£</li><li>â€¦â€¦</li><li>ååâ€¦â€¦æ­£</li></ul><p>p=1/2 + 1/2^3 + 1/2^5 + â€¦â€¦.</p><h2 id="ç­‰æ¯”æ•°åˆ—æ±‚å’Œå…¬å¼"><a href="#ç­‰æ¯”æ•°åˆ—æ±‚å’Œå…¬å¼" class="headerlink" title="ç­‰æ¯”æ•°åˆ—æ±‚å’Œå…¬å¼"></a>ç­‰æ¯”æ•°åˆ—æ±‚å’Œå…¬å¼</h2><p> ç­‰æ¯”æ±‚å’Œï¼š</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/fce39d3a972946267dbfac0b3fe68d00.svg" alt="img"></p><p>â‘ å½“qâ‰ 1æ—¶ï¼Œ</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/de92cc5e4793ae038e4297e83971154a.svg" alt="img"></p><p> æˆ–</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/842fdf9264ec2466cebdc60ba3daf499.svg" alt="img"></p><p>â‘¡å½“q=1æ—¶ï¼Œ</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/32cbe4d2be1e2d1105cc59bd00b148fc.svg" alt="img"></p><h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>ç”±é¢˜å¯çŸ¥a1 = 1/2, q=1/4</p><p>ä»£å…¥<img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/de92cc5e4793ae038e4297e83971154a.svg" alt="img">å¯å¾—</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/QQ%E6%88%AA%E5%9B%BE20211125214300.png" alt="img"><br>ç”±äº1/4^nå½“nè¶‹è¿‘äºæ— ç©·å¤§æ—¶å…¶çº¦ç­‰äº0ï¼Œæ‰€ä»¥1-1/4^nçº¦ç­‰äº1ï¼Œæ‰€ä»¥ç­‰å¼ä¸º</p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/QQ%E6%88%AA%E5%9B%BE20211125214313.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ·é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†ç‰‡æ–­ç‚¹ä¸Šä¼ åŠä¸‹è½½</title>
      <link href="/2021/10/07/%E5%88%86%E7%89%87%E6%96%AD%E7%82%B9%E4%B8%8A%E4%BC%A0%E5%8F%8A%E4%B8%8B%E8%BD%BD/"/>
      <url>/2021/10/07/%E5%88%86%E7%89%87%E6%96%AD%E7%82%B9%E4%B8%8A%E4%BC%A0%E5%8F%8A%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ†ç‰‡æ–­ç‚¹ä¸Šä¼ åŠä¸‹è½½"><a href="#åˆ†ç‰‡æ–­ç‚¹ä¸Šä¼ åŠä¸‹è½½" class="headerlink" title="åˆ†ç‰‡æ–­ç‚¹ä¸Šä¼ åŠä¸‹è½½"></a>åˆ†ç‰‡æ–­ç‚¹ä¸Šä¼ åŠä¸‹è½½</h1><h2 id="åˆ†ç‰‡ä¸Šä¼ "><a href="#åˆ†ç‰‡ä¸Šä¼ " class="headerlink" title="åˆ†ç‰‡ä¸Šä¼ "></a>åˆ†ç‰‡ä¸Šä¼ </h2><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#application.yml</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pom.xml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpcore<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.4.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯æ–‡ä»¶"><a href="#å‰ç«¯æ–‡ä»¶" class="headerlink" title="å‰ç«¯æ–‡ä»¶"></a>å‰ç«¯æ–‡ä»¶</h3><p><img src="https://i.loli.net/2021/10/07/UsMnl6IS2fx97rV.png" alt="image-20211007101843728"></p><h3 id="å‰ç«¯ä»£ç "><a href="#å‰ç«¯ä»£ç " class="headerlink" title="å‰ç«¯ä»£ç "></a>å‰ç«¯ä»£ç </h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webuploader<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥CSS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;webuploader.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-1.11.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;webuploader.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#upload-container</span>, <span class="selector-id">#upload-list</span>&#123;<span class="attribute">width</span>: <span class="number">500px</span>; <span class="attribute">margin</span>: <span class="number">0</span> auto; &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#upload-container</span>&#123;<span class="attribute">cursor</span>: pointer; <span class="attribute">border-radius</span>: <span class="number">15px</span>; <span class="attribute">background</span>: <span class="number">#EEEFFF</span>; <span class="attribute">height</span>: <span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#upload-list</span>&#123;<span class="attribute">height</span>: <span class="number">800px</span>; <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#EEE</span>; <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="attribute">margin-top</span>: <span class="number">10px</span>; <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#upload-container</span>&gt;<span class="selector-tag">span</span>&#123;<span class="attribute">widows</span>: <span class="number">100%</span>; <span class="attribute">text-align</span>: center; <span class="attribute">color</span>: gray; <span class="attribute">display</span>: block; <span class="attribute">padding-top</span>: <span class="number">15%</span>;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.upload-item</span>&#123;<span class="attribute">margin-top</span>: <span class="number">5px</span>; <span class="attribute">padding-bottom</span>: <span class="number">5px</span>; <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed gray;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.percentage</span>&#123;<span class="attribute">height</span>: <span class="number">5px</span>; <span class="attribute">background</span>: green;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.btn-delete</span>, <span class="selector-class">.btn-retry</span>&#123;<span class="attribute">cursor</span>: pointer; <span class="attribute">color</span>: gray;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.btn-delete</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">color</span>: orange;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.btn-retry</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">color</span>: green;&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥JS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;upload-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç‚¹å‡»æˆ–å°†æ–‡ä»¶æ‹–æ‹½è‡³æ­¤ä¸Šä¼ <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;upload-list&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;picker&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none;&quot;</span>&gt;</span>ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#upload-container&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#picker&quot;</span>).find(<span class="string">&#x27;input&#x27;</span>).click();</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> uploader = WebUploader.create(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">auto</span>: <span class="literal">true</span>,<span class="comment">// é€‰å®Œæ–‡ä»¶åï¼Œæ˜¯å¦è‡ªåŠ¨ä¸Šä¼ ã€‚</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">swf</span>: <span class="string">&#x27;Uploader.swf&#x27;</span>,<span class="comment">// swfæ–‡ä»¶è·¯å¾„</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">server</span>: <span class="string">&#x27;http://localhost:8080/upload&#x27;</span>,<span class="comment">// æ–‡ä»¶æ¥æ”¶æœåŠ¡ç«¯ã€‚</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">dnd</span>: <span class="string">&#x27;#upload-container&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">pick</span>: <span class="string">&#x27;#picker&#x27;</span>,<span class="comment">// å†…éƒ¨æ ¹æ®å½“å‰è¿è¡Œæ˜¯åˆ›å»ºï¼Œå¯èƒ½æ˜¯inputå…ƒç´ ï¼Œä¹Ÿå¯èƒ½æ˜¯flash. è¿™é‡Œæ˜¯divçš„id</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">multiple</span>: <span class="literal">true</span>, <span class="comment">// é€‰æ‹©å¤šä¸ª</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">chunked</span>: <span class="literal">true</span>,<span class="comment">// å¼€å¯åˆ†ç‰‡ä¸Šä¼ ã€‚</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">threads</span>: <span class="number">20</span>, <span class="comment">// ä¸Šä¼ å¹¶å‘æ•°ã€‚å…è®¸åŒæ—¶æœ€å¤§ä¸Šä¼ è¿›ç¨‹æ•°ã€‚</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// æ–‡ä»¶ä¸Šä¼ æ–¹å¼ï¼ŒPOSTæˆ–è€…GETã€‚</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">fileSizeLimit</span>: <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">10</span>, <span class="comment">//éªŒè¯æ–‡ä»¶æ€»å¤§å°æ˜¯å¦è¶…å‡ºé™åˆ¶, è¶…å‡ºåˆ™ä¸å…è®¸åŠ å…¥é˜Ÿåˆ—ã€‚10g</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">fileSingleSizeLimit</span>: <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>, <span class="comment">//éªŒè¯å•ä¸ªæ–‡ä»¶å¤§å°æ˜¯å¦è¶…å‡ºé™åˆ¶, è¶…å‡ºåˆ™ä¸å…è®¸åŠ å…¥é˜Ÿåˆ—ã€‚5g</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">fileVal</span>:<span class="string">&#x27;upload&#x27;</span> <span class="comment">// [é»˜è®¤å€¼ï¼š&#x27;file&#x27;] è®¾ç½®æ–‡ä»¶ä¸Šä¼ åŸŸçš„nameã€‚</span></span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    uploader.on(<span class="string">&quot;beforeFileQueued&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(file); <span class="comment">// è·å–æ–‡ä»¶çš„åç¼€</span></span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    uploader.on(<span class="string">&#x27;fileQueued&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// é€‰ä¸­æ–‡ä»¶æ—¶è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚åœ¨é¡µé¢ä¸­æ˜¾ç¤ºé€‰ä¸­çš„æ–‡ä»¶å¹¶æ·»åŠ åˆ°æ–‡ä»¶åˆ—è¡¨ï¼Œè·å–æ–‡ä»¶çš„å¤§å°ï¼Œæ–‡ä»¶ç±»å‹ç­‰</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(file.ext); <span class="comment">// è·å–æ–‡ä»¶çš„åç¼€</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(file.size);<span class="comment">// è·å–æ–‡ä»¶çš„å¤§å°</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(file.name);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> html = <span class="string">&#x27;&lt;div class=&quot;upload-item&quot;&gt;&lt;span&gt;æ–‡ä»¶åï¼š&#x27;</span>+file.name+<span class="string">&#x27;&lt;/span&gt;&lt;span data-file_id=&quot;&#x27;</span>+file.id+<span class="string">&#x27;&quot; class=&quot;btn-delete&quot;&gt;åˆ é™¤&lt;/span&gt;&lt;span data-file_id=&quot;&#x27;</span>+file.id+<span class="string">&#x27;&quot; class=&quot;btn-retry&quot;&gt;é‡è¯•&lt;/span&gt;&lt;div class=&quot;percentage &#x27;</span>+file.id+<span class="string">&#x27;&quot; style=&quot;width: 0%;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;#upload-list&#x27;</span>).append(html);</span></span><br><span class="line"><span class="javascript">        uploader.md5File( file )<span class="comment">//å¤§æ–‡ä»¶ç§’ä¼ </span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// åŠæ—¶æ˜¾ç¤ºè¿›åº¦</span></span></span><br><span class="line"><span class="javascript">            .progress(<span class="function"><span class="keyword">function</span>(<span class="params">percentage</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&#x27;Percentage:&#x27;</span>, percentage);</span></span><br><span class="line"><span class="javascript">            &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// å®Œæˆ</span></span></span><br><span class="line"><span class="javascript">            .then(<span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&#x27;md5 result:&#x27;</span>, val);</span></span><br><span class="line"><span class="javascript">            &#125;);</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    uploader.on(<span class="string">&#x27;uploadProgress&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">file, percentage</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(percentage * <span class="number">100</span> + <span class="string">&#x27;%&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> width = $(<span class="string">&#x27;.upload-item&#x27;</span>).width();</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.&#x27;</span>+file.id).width(width*percentage);</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    uploader.on(<span class="string">&#x27;uploadSuccess&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">file, response</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(file.id+<span class="string">&quot;ä¼ è¾“æˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    uploader.on(<span class="string">&#x27;uploadError&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(file);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(file.id+<span class="string">&#x27;upload error&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#upload-list&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.upload-item .btn-delete&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// ä»æ–‡ä»¶é˜Ÿåˆ—ä¸­åˆ é™¤æŸä¸ªæ–‡ä»¶id</span></span></span><br><span class="line"><span class="javascript">        file_id = $(<span class="built_in">this</span>).data(<span class="string">&#x27;file_id&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// uploader.removeFile(file_id); // æ ‡è®°æ–‡ä»¶çŠ¶æ€ä¸ºå·²å–æ¶ˆ</span></span></span><br><span class="line"><span class="javascript">        uploader.removeFile(file_id, <span class="literal">true</span>); <span class="comment">// ä»queueä¸­åˆ é™¤</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(uploader.getFiles());</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#upload-list&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.btn-retry&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        uploader.retry($(<span class="built_in">this</span>).data(<span class="string">&#x27;file_id&#x27;</span>));</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    uploader.on(<span class="string">&#x27;uploadComplete&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(uploader.getFiles());</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åç«¯ä»£ç "><a href="#åç«¯ä»£ç " class="headerlink" title="åç«¯ä»£ç "></a>åç«¯ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†ç‰‡ä¸Šä¼ ä¸‹è½½</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: zh&#x27;b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021/10/6 15:03</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadAndDownloadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String UTF8 =<span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶ä¿å­˜ä¸‹è½½è·¯å¾„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String UPLOAD_DOWNLOAD_PATH = <span class="string">&quot;D:\\upload_test&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœåŠ¡å™¨ç«¯å®ç°åˆ†ç‰‡ä¸Šä¼ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">upload</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//è®¾ç½®ç¼–ç æ ¼å¼</span></span><br><span class="line">        response.setCharacterEncoding(UTF8);</span><br><span class="line">        <span class="comment">//å½“å‰åˆ†ç‰‡</span></span><br><span class="line">        Integer schunk = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//æ€»åˆ†ç‰‡æ•°</span></span><br><span class="line">        Integer schunks = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//åç§°</span></span><br><span class="line">        String name = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//ä¿å­˜è·¯å¾„</span></span><br><span class="line">        BufferedOutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">            <span class="comment">//æ–‡ä»¶è¶…å‡ºè¯¥å¤§å°å†™å…¥ç£ç›˜</span></span><br><span class="line">            factory.setSizeThreshold(<span class="number">1024</span>);</span><br><span class="line">            <span class="comment">//è®¾ç½®ä¿å­˜è·¯å¾„</span></span><br><span class="line">            factory.setRepository(<span class="keyword">new</span> File(UPLOAD_DOWNLOAD_PATH));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è§£ærequest</span></span><br><span class="line">            ServletFileUpload uploaded = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">            <span class="comment">//å•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡5g</span></span><br><span class="line">            uploaded.setFileSizeMax(<span class="number">5L</span> * <span class="number">1024L</span> * <span class="number">1024L</span> * <span class="number">1024L</span>);</span><br><span class="line">            <span class="comment">//æ€»æ–‡ä»¶ä¸è¶…è¿‡10g</span></span><br><span class="line">            uploaded.setSizeMax(<span class="number">10L</span> * <span class="number">1024L</span> * <span class="number">1024L</span> * <span class="number">1024L</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è§£æ</span></span><br><span class="line">            List&lt;FileItem&gt; items = uploaded.parseRequest(request);</span><br><span class="line">            <span class="comment">//éå†æ‰€æœ‰è¡¨å•å±æ€§</span></span><br><span class="line">            <span class="keyword">for</span> (FileItem item : items) &#123;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯æ–‡ä»¶ï¼Œtrueï¼šè¡¨å•å±æ€§ï¼Œfalseï¼šä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">                <span class="keyword">if</span>(item.isFormField())&#123;</span><br><span class="line">                    <span class="comment">//å½“å‰åˆ†ç‰‡</span></span><br><span class="line">                    <span class="keyword">if</span>(<span class="string">&quot;chunk&quot;</span>.equals(item.getFieldName()))&#123;</span><br><span class="line">                        schunk = Integer.parseInt(item.getString(UTF8));</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//æ€»åˆ†ç‰‡</span></span><br><span class="line">                    <span class="keyword">if</span>(<span class="string">&quot;chunks&quot;</span>.equals(item.getFieldName()))&#123;</span><br><span class="line">                        schunks = Integer.parseInt(item.getString(UTF8));</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//åç§°</span></span><br><span class="line">                    <span class="keyword">if</span>(<span class="string">&quot;name&quot;</span>.equals(item.getFieldName()))&#123;</span><br><span class="line">                        name = item.getString(UTF8);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//éå†æ‰€æœ‰ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">            <span class="keyword">for</span>(FileItem item : items)&#123;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯æ–‡ä»¶ï¼Œtrueï¼šè¡¨å•å±æ€§ï¼Œfalseï¼šä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">                <span class="keyword">if</span>(!item.isFormField())&#123;</span><br><span class="line">                    <span class="comment">//ä¸´æ—¶æ–‡ä»¶å</span></span><br><span class="line">                    String temFileName = name;</span><br><span class="line">                    <span class="comment">//åå­—ä¸èƒ½ä¸ºç©º</span></span><br><span class="line">                    <span class="keyword">if</span>(name != <span class="keyword">null</span>)&#123;</span><br><span class="line">                        <span class="comment">//å½“å‰åˆ†ç‰‡ä¸ºç©ºï¼Œè¡¨ç¤ºä¸Šä¼ çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶</span></span><br><span class="line">                        <span class="keyword">if</span>(schunk != <span class="keyword">null</span>)&#123;</span><br><span class="line">                            <span class="comment">//ä¿®æ”¹ä¸´æ—¶æ–‡ä»¶åï¼Œå› ä¸ºå½“å‰åˆ†ç‰‡æ–‡ä»¶åªæ˜¯å®Œæ•´æ–‡ä»¶çš„ä¸€ä¸ªåˆ†ç‰‡</span></span><br><span class="line">                            temFileName = schunk +<span class="string">&quot;_&quot;</span>+name;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//æŸ¥è¯¢ç£ç›˜ä¸­æ˜¯å¦æœ‰å½“å‰åˆ†ç‰‡æ–‡ä»¶</span></span><br><span class="line">                        File temFile = <span class="keyword">new</span> File(UPLOAD_DOWNLOAD_PATH,temFileName);</span><br><span class="line">                        <span class="comment">//æ–­ç‚¹ç»­ä¼ ï¼Œå½“å‰åˆ†ç‰‡æ–‡ä»¶ä¸åœ¨ç£ç›˜ä¸­</span></span><br><span class="line">                        <span class="keyword">if</span>(!temFile.exists())&#123;</span><br><span class="line">                            <span class="comment">//å†™å…¥å½“å‰åˆ†ç‰‡æ–‡ä»¶åˆ°ç£ç›˜ä¸­</span></span><br><span class="line">                            item.write(temFile);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ–‡ä»¶åˆå¹¶ï¼Œåˆå¹¶æ‰€æœ‰åˆ†ç‰‡æ–‡ä»¶</span></span><br><span class="line">            <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰åˆ†ç‰‡ã€åˆ¤æ–­æ˜¯å¦ä¸ºæœ€åä¸€ä¸ªåˆ†ç‰‡</span></span><br><span class="line">            <span class="keyword">if</span>(schunk != <span class="keyword">null</span> &amp;&amp; schunk.intValue() == schunks.intValue()-<span class="number">1</span>)&#123;</span><br><span class="line">                File tempFile = <span class="keyword">new</span> File(UPLOAD_DOWNLOAD_PATH,name);</span><br><span class="line">                os = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(tempFile));</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span> ;i&lt;schunks;i++)&#123;</span><br><span class="line">                    <span class="comment">//è·å–åˆ†ç‰‡</span></span><br><span class="line">                    File file = <span class="keyword">new</span> File(UPLOAD_DOWNLOAD_PATH,i+<span class="string">&quot;_&quot;</span>+name);</span><br><span class="line">                    <span class="comment">//åˆ¤æ–­å½“å‰åˆ†ç‰‡æ˜¯å¦å·²ç»å°±ä½</span></span><br><span class="line">                    <span class="keyword">while</span>(!file.exists())&#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                        file = <span class="keyword">new</span> File(UPLOAD_DOWNLOAD_PATH,i+<span class="string">&quot;_&quot;</span>+name);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//è·å–å½“å‰åˆ†ç‰‡æ•°æ®</span></span><br><span class="line">                    <span class="keyword">byte</span>[] bytes = FileUtils.readFileToByteArray(file);</span><br><span class="line">                    <span class="comment">//å†™å…¥æ•°æ®</span></span><br><span class="line">                    os.write(bytes);</span><br><span class="line">                    <span class="comment">//æ¸…ç©ºç¼“å†²æµä¸­çš„æ•°æ®</span></span><br><span class="line">                    os.flush();</span><br><span class="line">                    <span class="comment">//åˆ é™¤å½“å‰åˆ†ç‰‡</span></span><br><span class="line">                    file.delete();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æ¸…ç©ºç¼“å†²æµä¸­çš„æ•°æ®</span></span><br><span class="line">                os.flush();</span><br><span class="line">            &#125;</span><br><span class="line">            response.getWriter().write(<span class="string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>+name);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (os!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    os.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><img src="https://i.loli.net/2021/10/07/ms3dFSjvi7IrVEb.png" alt="image-20211007102110148"></p><p><img src="https://i.loli.net/2021/10/07/cibpy2V9YTqzCxt.png" alt="image-20211007102137588"></p><p><img src="https://i.loli.net/2021/10/07/Ir7a4SyFq6Cz1xj.png" alt="image-20211007102306094"></p><h2 id="åˆ†ç‰‡ä¸‹è½½"><a href="#åˆ†ç‰‡ä¸‹è½½" class="headerlink" title="åˆ†ç‰‡ä¸‹è½½"></a>åˆ†ç‰‡ä¸‹è½½</h2><h3 id="æœåŠ¡å™¨ç«¯ä»£ç "><a href="#æœåŠ¡å™¨ç«¯ä»£ç " class="headerlink" title="æœåŠ¡å™¨ç«¯ä»£ç "></a>æœåŠ¡å™¨ç«¯ä»£ç </h3><p><code>å¦‚æœåªå®ç°äº†æœåŠ¡å™¨ä»£ç ï¼Œæœªå®ç°å®¢æˆ·ç«¯ä»£ç  åˆ™ä¸ æ™®é€šä¸‹è½½æ— ä»»ä½•å·®å¼‚</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†ç‰‡ä¸Šä¼ ä¸‹è½½</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: zh&#x27;b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021/10/6 15:03</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadAndDownloadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String UTF8 =<span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶ä¿å­˜ä¸‹è½½è·¯å¾„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String UPLOAD_DOWNLOAD_PATH = <span class="string">&quot;D:\\upload_test&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®ç°æœåŠ¡å™¨ç«¯æ”¯æŒåˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line"><span class="comment">     * ä¸‹è½½ç¤ºä¾‹ï¼šhttp://localhost:8080/download?downloadFileName=JWTè§†é¢‘.mp4</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> downloadFileName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downLoadFile</span><span class="params">(HttpServletRequest request, HttpServletResponse response,String downloadFileName)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//å‚æ•°ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (downloadFileName==<span class="keyword">null</span>|| <span class="string">&quot;&quot;</span>.equals(downloadFileName)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¯»å–æ–‡ä»¶</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(UPLOAD_DOWNLOAD_PATH+<span class="string">&quot;\\&quot;</span>+downloadFileName);</span><br><span class="line">        <span class="comment">//è®¾ç½®å“åº”ç¼–ç æ ¼å¼</span></span><br><span class="line">        response.setCharacterEncoding(UTF8);</span><br><span class="line">        <span class="comment">//è¾“å…¥æµ</span></span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//è¾“å‡ºæµ</span></span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//å®ç°æœåŠ¡å™¨ç«¯æ”¯æŒåˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//è·å–æ–‡ä»¶æ€»é•¿åº¦ï¼Œç”¨äºåˆ†ç‰‡</span></span><br><span class="line">            <span class="keyword">long</span> fSize = file.length();</span><br><span class="line">            <span class="comment">//è®¾ç½®å†…å®¹ç±»å‹ï¼Œä¸‹è½½</span></span><br><span class="line">            response.setContentType(<span class="string">&quot;application/x-download&quot;</span>);</span><br><span class="line">            <span class="comment">//ä¸‹è½½æç¤ºæ¡†æ˜¾ç¤ºæ­£ç¡®çš„åå­—</span></span><br><span class="line">            String fileName = URLEncoder.encode(file.getName(),UTF8);</span><br><span class="line">            <span class="comment">//ä¸‹è½½æç¤ºæ¡†</span></span><br><span class="line">            response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span> + fileName);</span><br><span class="line">            <span class="comment">//å‘Šè¯‰å‰ç«¯ æ”¯æŒåˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;Accept-Range&quot;</span>,<span class="string">&quot;bytes&quot;</span>);</span><br><span class="line">            <span class="comment">//æ€»é•¿åº¦</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;fSize&quot;</span>,String.valueOf(fSize));</span><br><span class="line">            <span class="comment">//æ–‡ä»¶åç§°</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;fName&quot;</span>,fileName);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è¿›è¡Œåˆ†ç‰‡æ“ä½œ</span></span><br><span class="line">            <span class="comment">//æ–‡ä»¶èµ·å§‹ï¼Œæ–‡ä»¶å·²ç»è¯»å–äº†å¤šå°‘</span></span><br><span class="line">            <span class="keyword">long</span> pos = <span class="number">0</span>,last = fSize-<span class="number">1</span>,sum = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å‰ç«¯ä¼ è¿‡æ¥çš„requestæ˜¯å¦æ”¯æŒåˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != request.getHeader(<span class="string">&quot;Range&quot;</span>))&#123;</span><br><span class="line">                <span class="comment">//æ”¯æŒæ–­ç‚¹ç»­ä¼ </span></span><br><span class="line">                response.setStatus(HttpServletResponse.SC_PARTIAL_CONTENT);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//è·å–è¯¥åˆ†ç‰‡èµ·å§‹ä½ç½®</span></span><br><span class="line">                String numRange = request.getHeader(<span class="string">&quot;Range&quot;</span>).replaceAll(<span class="string">&quot;bytes=&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">                String[] strRange = numRange.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">                <span class="comment">//http  Range bytes=100-1000   bytes=100-å°¾</span></span><br><span class="line">                <span class="comment">//ç­‰äº2ï¼Œè¡¨æ˜æœ‰ç¡®å®šçš„èµ·å§‹ä½ç½®</span></span><br><span class="line">                <span class="keyword">if</span>(strRange.length == <span class="number">2</span>)&#123;</span><br><span class="line">                    pos = Long.parseLong(strRange[<span class="number">0</span>].trim());</span><br><span class="line">                    last = Long.parseLong(strRange[<span class="number">1</span>].trim());</span><br><span class="line">                    <span class="keyword">if</span>(last &gt; fSize-<span class="number">1</span>)&#123;</span><br><span class="line">                        last = fSize-<span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                <span class="comment">//ä¸ç­‰äº2ï¼Œè¡¨æ˜åªæœ‰ç¡®å®šçš„èµ·ç‚¹ï¼Œæ˜¯åˆ†ç‰‡çš„æœ€åä¸€æ®µ</span></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    pos = Long.parseLong(numRange.replaceAll(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>).trim());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¯¥åˆ†ç‰‡çš„å¤§å°</span></span><br><span class="line">            <span class="keyword">long</span> rangeLenght = last - pos +<span class="number">1</span>;</span><br><span class="line">            String contentRange = <span class="string">&quot;bytes &quot;</span> + pos + <span class="string">&quot;-&quot;</span> + last + <span class="string">&quot;/&quot;</span> + fSize;</span><br><span class="line">            <span class="comment">//å“åº”åˆ†ç‰‡çš„èµ·å§‹åŠå¤§å°</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Range&quot;</span>,contentRange);</span><br><span class="line">            <span class="comment">//å“åº”åˆ†ç‰‡é•¿åº¦</span></span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Lenght&quot;</span>,String.valueOf(rangeLenght));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è¾“å…¥è¾“å‡ºæ•°æ®</span></span><br><span class="line">            os = <span class="keyword">new</span> BufferedOutputStream(response.getOutputStream());</span><br><span class="line">            is = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(file));</span><br><span class="line">            <span class="comment">//è·³è¿‡å‰é¢å·²ç»è¯»å–è¿‡çš„åˆ†ç‰‡</span></span><br><span class="line">            is.skip(pos);</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> lenght = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//å½“å‰åˆ†ç‰‡çš„æ€»æ•°æ®é‡è¿˜æœªä¼ è¾“å®Œ</span></span><br><span class="line">            <span class="keyword">while</span>(sum &lt; rangeLenght)&#123;</span><br><span class="line">                <span class="comment">//è¯»å–çš„èµ·å§‹ä½ç½®ï¼Œå‰©ä½™é•¿åº¦å°äºç­‰äºbufferåˆ™å–è‡ªèº«ï¼Œå¦åˆ™å–bufferçš„é•¿åº¦</span></span><br><span class="line">                lenght = is.read(buffer,<span class="number">0</span>,((rangeLenght-sum) &lt;= buffer.length ? ((<span class="keyword">int</span>)(rangeLenght-sum)) :  buffer.length));</span><br><span class="line">                <span class="comment">//è®¡ç®—å·²ç»è¾“å‡ºçš„æ€»æ•°æ®é‡</span></span><br><span class="line">                sum = sum+ lenght;</span><br><span class="line">                <span class="comment">//è¾“å‡ºæ•°æ®</span></span><br><span class="line">                os.write(buffer,<span class="number">0</span>,lenght);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸‹è½½å®Œæˆ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(os != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    os.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯ä»£ç "><a href="#å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="å®¢æˆ·ç«¯ä»£ç "></a>å®¢æˆ·ç«¯ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®¢æˆ·ç«¯åˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: zh&#x27;b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021/10/6 20:34</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownloadClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†ç‰‡å¤§å°</span></span><br><span class="line"><span class="comment">     * 50MB</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> PER_PAGE = <span class="number">1024L</span> * <span class="number">1024L</span> * <span class="number">50L</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜è·¯å¾„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String DOWNPATH = <span class="string">&quot;D:\\upload_test\\mytest&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†ç‰‡ä¸‹è½½ç”¨çš„çº¿ç¨‹æ± ï¼Œå»ºè®®è‡ªå·±æ‰‹åŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ExecutorService pool = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®¢æˆ·ç«¯æ”¯æŒåˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line"><span class="comment">     * ä¸‹è½½ç¤ºä¾‹ï¼šhttp://localhost:8080/downloadFile?downloadFileName=JWTè§†é¢‘.mp4</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> downloadFileName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/downloadFile&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">downloadFile</span><span class="params">(String downloadFileName)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//ä¸‹è½½æ–‡ä»¶åä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span>(downloadFileName==<span class="keyword">null</span>||<span class="string">&quot;&quot;</span>.equals(downloadFileName))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ¢æµ‹,è¯•æ¢æ€§ä¸‹è½½</span></span><br><span class="line">        FileInfo fileInfo = download( <span class="number">0</span>, <span class="number">10</span>, -<span class="number">1</span>, downloadFileName,<span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//æ€»åˆ†ç‰‡æ•°é‡</span></span><br><span class="line">        <span class="keyword">long</span> pages = fileInfo.fSize / PER_PAGE;</span><br><span class="line">        <span class="comment">//è¿›è¡Œåˆ†ç‰‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">long</span> i=<span class="number">0</span>;i&lt;=pages; i++)&#123;</span><br><span class="line">            <span class="comment">//å°†è¯·æ±‚æäº¤åˆ°çº¿ç¨‹æ± ï¼Œå®ç°å¼‚æ­¥</span></span><br><span class="line">            pool.submit(<span class="keyword">new</span> Download(i*PER_PAGE,(i+<span class="number">1</span>)*PER_PAGE-<span class="number">1</span>,i,downloadFileName,fileInfo.fName));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‚¨å­˜åˆ†ç‰‡ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AllArgsConstructor</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FileInfo</span></span>&#123;</span><br><span class="line">        <span class="comment">//åˆ†ç‰‡å¤§å°</span></span><br><span class="line">        <span class="keyword">long</span> fSize;</span><br><span class="line">        <span class="comment">//åˆ†ç‰‡å</span></span><br><span class="line">        String fName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨äºå®ç°åˆ†ç‰‡çš„å¼‚æ­¥ä¸‹è½½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AllArgsConstructor</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Download</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">        <span class="comment">//åˆ†ç‰‡çš„å¤´</span></span><br><span class="line">        <span class="keyword">long</span> start;</span><br><span class="line">        <span class="comment">//åˆ†ç‰‡çš„å°¾</span></span><br><span class="line">        <span class="keyword">long</span> end;</span><br><span class="line">        <span class="comment">//ç¬¬å‡ ä¸ªåˆ†ç‰‡</span></span><br><span class="line">        <span class="keyword">long</span> page;</span><br><span class="line">        <span class="comment">//ä¸‹è½½çš„æ–‡ä»¶å</span></span><br><span class="line">        String downloadFileName;</span><br><span class="line">        <span class="comment">//æ–‡ä»¶å</span></span><br><span class="line">        String fName;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                FileInfo info = download( start, end, page, downloadFileName,fName);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®¢æˆ·ç«¯å®ç°åˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> downloadFileName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> FileInfo <span class="title">download</span><span class="params">(<span class="keyword">long</span> start,<span class="keyword">long</span> end,<span class="keyword">long</span> page,String downloadFileName,String fName)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//æ–­ç‚¹ä¸‹è½½</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(DOWNPATH,page+<span class="string">&quot;-&quot;</span>+fName);</span><br><span class="line">        <span class="comment">//ä¸æ˜¯æ¢æµ‹æ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶å·²ç»ä¸‹è½½å®Œæˆï¼Œå¹¶ä¸”æ–‡ä»¶å®Œæ•´</span></span><br><span class="line">        <span class="keyword">if</span>(page!=-<span class="number">1</span> &amp;&amp; file.exists() &amp;&amp; file.length()==PER_PAGE)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å®ç°åˆ†ç‰‡ä¸‹è½½</span></span><br><span class="line">        HttpClient client = HttpClients.createDefault();</span><br><span class="line">        <span class="comment">//åŸä¸‹è½½è·¯å¾„</span></span><br><span class="line">        HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">&quot;http://127.0.0.1:8080/download?downloadFileName=&quot;</span>+downloadFileName);</span><br><span class="line">        <span class="comment">//è®¾ç½®åˆ†ç‰‡</span></span><br><span class="line">        httpGet.setHeader(<span class="string">&quot;Range&quot;</span>,<span class="string">&quot;bytes=&quot;</span>+start+<span class="string">&quot;-&quot;</span>+end);</span><br><span class="line">        <span class="comment">//å‘é€è¯·æ±‚</span></span><br><span class="line">        HttpResponse response = client.execute(httpGet);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶æµ</span></span><br><span class="line">        HttpEntity entity = response.getEntity();</span><br><span class="line">        InputStream is = entity.getContent();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–åˆ†ç‰‡å¤§å°</span></span><br><span class="line">        String fSize = response.getFirstHeader(<span class="string">&quot;fSize&quot;</span>).getValue();</span><br><span class="line">        <span class="comment">//è·å–åˆ†ç‰‡å</span></span><br><span class="line">        fName = URLDecoder.decode(response.getFirstHeader(<span class="string">&quot;fName&quot;</span>).getValue(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¼ è¾“æ•°æ®</span></span><br><span class="line">        FileOutputStream fis = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> ch =<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((ch = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            fis.write(buffer,<span class="number">0</span>,ch);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­ä¼ è¾“æµ</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            is.close();</span><br><span class="line">            fis.flush();</span><br><span class="line">            fis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºæœ€åä¸€ä¸ªåˆ†ç‰‡</span></span><br><span class="line">        <span class="keyword">if</span>(end - Long.parseLong(fSize) &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">            mergeFile(fName,page);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FileInfo(Long.parseLong(fSize), fName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå¹¶ä¸‹è½½å®Œæˆçš„åˆ†ç‰‡æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">mergeFile</span><span class="params">(String fName, <span class="keyword">long</span> page)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//æœ€ç»ˆæ–‡ä»¶</span></span><br><span class="line">        File tempFile = <span class="keyword">new</span> File(DOWNPATH,fName);</span><br><span class="line">        <span class="comment">//è·å–ç›¸åº”çš„è¾“å‡ºæµ</span></span><br><span class="line">        BufferedOutputStream os = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(tempFile));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span> ;i&lt;=page;i++)&#123;</span><br><span class="line">            <span class="comment">//å¯»æ‰¾åˆ†ç‰‡æ–‡ä»¶</span></span><br><span class="line">            File file = <span class="keyword">new</span> File(DOWNPATH,i+<span class="string">&quot;-&quot;</span>+fName);</span><br><span class="line">            <span class="comment">//å¯èƒ½æŸä¸€åˆ†ç‰‡è¿˜æœªä¸‹è½½å®Œæˆ</span></span><br><span class="line">            <span class="keyword">while</span>(!file.exists() || (i != page &amp;&amp; file.length() &lt; PER_PAGE))&#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = FileUtils.readFileToByteArray(file);</span><br><span class="line">            <span class="comment">//è¾“å‡ºåˆ°æ€»æ–‡ä»¶åé¢</span></span><br><span class="line">            os.write(bytes);</span><br><span class="line">            os.flush();</span><br><span class="line">            <span class="comment">//åˆ é™¤ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">            file.delete();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤æ¢æµ‹æ–‡ä»¶</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(DOWNPATH,-<span class="number">1</span>+<span class="string">&quot;-null&quot;</span>);</span><br><span class="line">        file.delete();</span><br><span class="line">        os.flush();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            os.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h3><p><code>å¦‚æœåªå®ç°äº†æœåŠ¡å™¨ä»£ç ï¼Œæœªå®ç°å®¢æˆ·ç«¯ä»£ç  åˆ™ä¸ æ™®é€šä¸‹è½½æ— ä»»ä½•å·®å¼‚ï¼Œåœ¨æ­¤å°±ä¸è¿›è¡Œæ¼”ç¤º</code></p><p>å¦‚æœè¦å®ç°å®¢æˆ·ç«¯çš„åˆ†ç‰‡ä¸‹è½½ï¼Œéœ€åŒæ—¶å®ç°ä¸Šé¢ä¸¤æ®µä»£ç ï¼Œå› ä¸º<code>å®¢æˆ·ç«¯ä»£ç éœ€å»è¯·æ±‚æœåŠ¡å™¨ç«¯ä»£ç ï¼Œæ¥å®ç°åˆ†ç‰‡ä¸‹è½½ï¼Œè¯·æ³¨æ„å®¢æˆ·ç«¯ä»£ç çš„ç¬¬110è¡Œ</code></p><p>åœ¨è¯·æ±‚æ—¶ä½¿ç”¨å®¢æˆ·ç«¯ä»£ç çš„è¯·æ±‚æ–¹å¼å°±èƒ½å®ç°å®¢æˆ·ç«¯çš„åˆ†ç‰‡ä¸‹è½½ï¼Œè¯·çœ‹ä¸€ä¸‹ç¤ºä¾‹</p><h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><img src="https://i.loli.net/2021/10/07/u5EANJnOdGI8HeK.png" alt="image-20211007103307366"></p><p><img src="https://i.loli.net/2021/10/07/yS57hxVtzJjEkGH.png" alt="image-20211007103422944"></p><p><img src="https://i.loli.net/2021/10/07/93VylEdOTfgQ8jr.png" alt="image-20211007103441408"></p><p><img src="https://i.loli.net/2021/10/07/8GBRhWusDyNgS6m.png" alt="image-20211007103729374"></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸Šä¼ ä¸‹è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½</title>
      <link href="/2021/10/07/%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD/"/>
      <url>/2021/10/07/%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€å•æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½"><a href="#ç®€å•æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½" class="headerlink" title="ç®€å•æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½"></a>ç®€å•æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½</h1><h2 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h2><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="attr">max-file-size:</span> <span class="string">300MB</span></span><br><span class="line">      <span class="attr">max-request-size:</span> <span class="string">300MB</span></span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯ä»£ç "><a href="#å‰ç«¯ä»£ç " class="headerlink" title="å‰ç«¯ä»£ç "></a>å‰ç«¯ä»£ç </h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- classä¸ç”¨ç®¡ï¼ï¼ï¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/admin/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ui form&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;required field&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui left labeled input&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui right aligned container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;ui teal submit button&quot;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ui button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;window.history.go(-1)&quot;</span>&gt;</span>è¿”å›<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åç«¯ä»£ç "><a href="#åç«¯ä»£ç " class="headerlink" title="åç«¯ä»£ç "></a>åç«¯ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸Šä¼ åæ–‡ä»¶ä¿å­˜ä½ç½®</span></span><br><span class="line">    <span class="meta">@Value(&quot;static/files&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String fileLocation;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/admin/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(MultipartFile file, Model model)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥upload&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å¾— classpath çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">        String realPath = ResourceUtils.getURL(<span class="string">&quot;classpath:&quot;</span>).getPath() + fileLocation;</span><br><span class="line">        File newFile = <span class="keyword">new</span> File(realPath);</span><br><span class="line">        <span class="comment">// å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ã€åˆ™æ–°å»º</span></span><br><span class="line">        <span class="keyword">if</span> (!newFile.exists())&#123;</span><br><span class="line">            newFile.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸Šä¼ </span></span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        String fileName = date.getTime() +<span class="string">&quot;@&quot;</span> + file.getOriginalFilename();</span><br><span class="line">        file.transferTo(<span class="keyword">new</span> File(newFile, fileName));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;admin/upload&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><img src="https://i.loli.net/2021/10/06/DL69bNUP3ovTARi.png" alt="image-20211006143604933"></p><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;static/files&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String fileLocation;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/admin/download&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">(String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;download&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å¾—å¾…ä¸‹è½½æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">        String realPath = ResourceUtils.getURL(<span class="string">&quot;classpath:&quot;</span>).getPath() + fileLocation;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è·å¾—æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">        FileInputStream inputStream = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(realPath, fileName));</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”å¤´ã€ä»¥é™„ä»¶å½¢å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-disposition&quot;</span>, <span class="string">&quot;attachment; fileName=&quot;</span> + fileName);</span><br><span class="line">        ServletOutputStream outputStream = response.getOutputStream();</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len = inputStream.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            outputStream.write(data, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        outputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯·æ±‚æ–¹å¼"><a href="#è¯·æ±‚æ–¹å¼" class="headerlink" title="è¯·æ±‚æ–¹å¼"></a>è¯·æ±‚æ–¹å¼</h3><p><code>http://localhost:8080/admin/download?fileName=1631839958785@13.jpg</code></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸Šä¼ ä¸‹è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹³è¡¡äºŒå‰æ ‘è°ƒæ•´</title>
      <link href="/2021/09/29/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E8%B0%83%E6%95%B4/"/>
      <url>/2021/09/29/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E8%B0%83%E6%95%B4/</url>
      
        <content type="html"><![CDATA[<h1 id="å¹³è¡¡äºŒå‰æ ‘è°ƒæ•´"><a href="#å¹³è¡¡äºŒå‰æ ‘è°ƒæ•´" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘è°ƒæ•´"></a>å¹³è¡¡äºŒå‰æ ‘è°ƒæ•´</h1><p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1Ro4y1S7wb?from=search&seid=1347340633041499968&spm_id_from=333.337.0.0">ç®€å•ç²—æš´çš„æ–¹å¼è§£å†³å¹³è¡¡äºŒå‰æ ‘çš„è°ƒæ•´_å“”å“©å“”å“©_bilibili</a></p><h2 id="LLå‹"><a href="#LLå‹" class="headerlink" title="LLå‹"></a>LLå‹</h2><p>å³æ—‹ï¼Œå³å­©å­å˜å·¦å­©å­</p><p><img src="https://i.loli.net/2021/09/29/mhDLyVX7zE4vF6B.png" alt="image-20210929115632431"></p><h2 id="RRå‹"><a href="#RRå‹" class="headerlink" title="RRå‹"></a>RRå‹</h2><p>å·¦æ—‹ï¼Œå·¦å­©å­å˜å³å­©å­</p><p><img src="https://i.loli.net/2021/09/29/1OtwNrz6KmTUIc5.png" alt="image-20210929115731480"></p><h2 id="LRå‹"><a href="#LRå‹" class="headerlink" title="LRå‹"></a>LRå‹</h2><p>é»„è‰²èŠ‚ç‚¹æˆæ ¹èŠ‚ç‚¹ï¼Œå…¶å·¦å­©å­å˜å³å­©å­ï¼Œå³å­©å­å˜å·¦å­©å­</p><p><img src="https://i.loli.net/2021/09/29/4YZyI6XS7Kzuahk.png" alt="image-20210929115821162"></p><h2 id="RLå‹"><a href="#RLå‹" class="headerlink" title="RLå‹"></a>RLå‹</h2><p>é»„è‰²èŠ‚ç‚¹æˆæ ¹èŠ‚ç‚¹ï¼Œå…¶å·¦å­©å­å˜å³å­©å­ï¼Œå³å­©å­å˜å·¦å­©å­</p><p><img src="https://i.loli.net/2021/09/29/D1Two9EXbYpPzN2.png" alt="image-20210929120212360"></p><h2 id="ç¡®å®šç±»å‹"><a href="#ç¡®å®šç±»å‹" class="headerlink" title="ç¡®å®šç±»å‹"></a>ç¡®å®šç±»å‹</h2><p>ç”±ä¸å¹³è¡¡çš„èŠ‚ç‚¹å‘æ–°æ’å…¥çš„èŠ‚ç‚¹éå†ï¼Œå–å‰3ä¸ªç»“ç‚¹è¿èµ·æ¥çš„å½¢çŠ¶</p><p>å¦‚LLã€RRã€LRã€RL</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>é¦–å…ˆç¡®å®šç±»å‹æ˜¯LLã€RRã€LRã€RLä¸­çš„é‚£ç§</p><p>å¦‚æœæ˜¯LLæˆ–RRï¼Œå…ˆå³æ—‹æˆ–å·¦æ—‹ï¼Œå†æŠŠå˜æ¢å‰ç¬¬2ä¸ªç»“ç‚¹ï¼ˆå˜æ¢åçš„æ ¹èŠ‚ç‚¹ï¼‰çš„å­èŠ‚ç‚¹çš„ä½ç½®</p><p>å¦‚æœæ˜¯LLï¼Œå› ä¸ºè¦å³æ—‹ï¼Œåˆ™æŠŠå…¶å³å­©å­å˜ä¸ºç¬¬1ä¸ªç»“ç‚¹ï¼ˆå˜æ¢å‰çš„æ ¹èŠ‚ç‚¹ï¼‰çš„å·¦å­©å­</p><p>å¦‚æœæ˜¯RRï¼Œå› ä¸ºè¦å·¦æ—‹ï¼Œåˆ™æŠŠå…¶å·¦å­©å­å˜ä¸ºç¬¬1ä¸ªç»“ç‚¹ï¼ˆå˜æ¢å‰çš„æ ¹èŠ‚ç‚¹ï¼‰çš„å³å­©å­</p><p>å¦‚æœæ˜¯LRæˆ–RLï¼Œç›´æ¥å°†ç¬¬3ä¸ªç»“ç‚¹å˜ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå³å°†3ä¸ªç»“ç‚¹ä¸­æœ€ä¸‹æ–¹æˆ–å¤„äºä¸­é—´é‚£ä¸ªç»“ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹</p><p>æŠŠå®ƒçš„å·¦å­©å­å˜ä¸ºå³å­©å­ï¼Œå³å­©å­å˜ä¸ºå·¦å­©å­ï¼Œ</p><p>å³å·¦å­©å­å»å®ƒï¼ˆå˜æ¢åä¸ºæ ¹èŠ‚ç‚¹ï¼‰çš„å·¦å­æ ‘åšå³å­©å­ã€‚å³å­©å­å»å®ƒï¼ˆå˜æ¢åä¸ºæ ¹èŠ‚ç‚¹ï¼‰çš„å³å­æ ‘åšå·¦å­©å­</p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisï¼š5å¤§åŸºæœ¬æ•°æ®ç±»å‹åº•å±‚å®ç°ï¼ˆåˆæ¢ï¼‰</title>
      <link href="/2021/09/16/Redis%EF%BC%9A5%E5%A4%A7%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%88%9D%E6%8E%A2%EF%BC%89/"/>
      <url>/2021/09/16/Redis%EF%BC%9A5%E5%A4%A7%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%88%9D%E6%8E%A2%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Redisï¼š5å¤§åŸºæœ¬æ•°æ®ç±»å‹åº•å±‚å®ç°ï¼ˆåˆæ¢ï¼‰"><a href="#Redisï¼š5å¤§åŸºæœ¬æ•°æ®ç±»å‹åº•å±‚å®ç°ï¼ˆåˆæ¢ï¼‰" class="headerlink" title="Redisï¼š5å¤§åŸºæœ¬æ•°æ®ç±»å‹åº•å±‚å®ç°ï¼ˆåˆæ¢ï¼‰"></a>Redisï¼š5å¤§åŸºæœ¬æ•°æ®ç±»å‹åº•å±‚å®ç°ï¼ˆåˆæ¢ï¼‰</h1><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://xie.infoq.cn/article/98c984f6462aec99ffc0c3b42">Redisç³»åˆ—ï¼ˆäºŒï¼‰: è¿é›†åˆåº•å±‚å®ç°åŸç†éƒ½ä¸çŸ¥é“ï¼Œä½ æ•¢è¯´Redisç”¨çš„å¾ˆæºœï¼Ÿ - InfoQ å†™ä½œå¹³å°</a></p><p><a href="https://blog.csdn.net/weixin_41519463/article/details/109208476">redisçš„5ç§æ•°æ®ç»“æ„åŠå…¶åº•å±‚å®ç°åŸç†_zhongzhh8çš„åšå®¢-CSDNåšå®¢_redisæ•°æ®ç»“æ„çš„åº•å±‚å®ç°</a></p><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p><code>SDS</code>ï¼šå…¨ç§° <code>Simple Dynamic String</code>ï¼Œå³ç®€å•åŠ¨æ€å­—ç¬¦ä¸²</p><h3 id="SDS"><a href="#SDS" class="headerlink" title="SDS"></a>SDS</h3><ul><li>SDSï¼š<ul><li>ç»„æˆéƒ¨åˆ†<ul><li><strong>freeï¼šè¡¨ç¤º buf ä¸­çš„ç©ºé—²çš„ç©ºé—´å¤§å°</strong></li><li><strong>lenï¼šè¡¨ç¤º buf ä¸­çš„å†…å®¹é•¿åº¦</strong></li><li><strong>bufï¼šä¸€ä¸ª char ç±»å‹çš„æ•°ç»„ï¼Œç”¨äºå­˜å‚¨å®é™…å­—ç¬¦ä¸²çš„å†…å®¹ã€‚</strong></li></ul></li><li>ä¼˜ç‚¹<ul><li><strong>è·å–å­—ç¬¦ä¸²é•¿åº¦çš„å¤æ‚åº¦ä¸º O(1)</strong></li><li><strong>é˜²æ­¢ buf å­˜å‚¨å†…å®¹æº¢å‡ºçš„é—®é¢˜</strong></li><li><strong>ç©ºé—´é¢„åˆ†é… &amp;ç©ºé—´æƒ°æ€§é‡Šæ”¾</strong></li><li><strong>äºŒçº§åˆ¶å®‰å…¨æ€§</strong></li></ul></li></ul></li></ul><h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>redis3.2ä¹‹å‰ç”± <code>ZipList</code> å’Œ <code>LinkedList</code> å®ç°ï¼Œ3.2ä¹‹åç”± <code>QuickList</code>å®ç°</p><h3 id="ZipList"><a href="#ZipList" class="headerlink" title="ZipList"></a>ZipList</h3><ul><li>ZipListï¼šç”±ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ç»„æˆ<ul><li>ä½¿ç”¨æ¡ä»¶<ul><li><strong>List ä¸­å­˜å‚¨çš„æ¯ä¸ªå…ƒç´ çš„é•¿åº¦å°äº 64byte</strong></li><li><strong>å…ƒç´ ä¸ªæ•°å°äº 512</strong></li></ul></li><li>ç»„æˆéƒ¨åˆ†<ul><li><strong>zlbytesï¼šè¡¨ç¤ºå½“å‰ list çš„å­˜å‚¨å…ƒç´ çš„æ€»é•¿åº¦ã€‚</strong></li><li><strong>zllenï¼šè¡¨ç¤ºå½“å‰ list å­˜å‚¨çš„å…ƒç´ çš„ä¸ªæ•°ã€‚</strong></li><li><strong>zltailï¼šè¡¨ç¤ºå½“å‰ list çš„å¤´ç»“ç‚¹çš„åœ°å€ï¼Œé€šè¿‡ zltail å°±æ˜¯å¯ä»¥å®ç° list çš„éå†ã€‚</strong></li><li><strong>zlendï¼šè¡¨ç¤ºå½“å‰ list çš„ç»“æŸæ ‡è¯†ã€‚</strong></li><li><strong>entryï¼šè¡¨ç¤ºå­˜å‚¨å®é™…æ•°æ®çš„èŠ‚ç‚¹ï¼Œæ¯ä¸ª entry ä»£è¡¨ä¸€ä¸ªå…ƒç´ ã€‚</strong></li><li><strong>previours_entry_length: è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å…ƒç´ çš„é•¿åº¦ï¼Œé€šè¿‡å…¶é•¿åº¦å¯ä»¥è®¡ç®—å‡ºä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ã€‚</strong></li><li><strong>encodingï¼šè¡¨ç¤ºå…ƒç´ çš„ç¼–ç æ ¼å¼ã€‚</strong></li><li><strong>contentï¼šè¡¨ç¤ºå®é™…å­˜å‚¨çš„å…ƒç´ å†…å®¹ã€‚</strong></li></ul></li></ul></li></ul><h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><ul><li>LinkedListï¼šç”±ä¸è¿ç»­çš„å†…å­˜å—å½¢æˆçš„åŒå‘é“¾è¡¨ç»„æˆ<ul><li>ç»„æˆéƒ¨åˆ†<ul><li><strong>headï¼šè¡¨ç¤º List çš„å¤´ç»“ç‚¹ï¼›é€šè¿‡å…¶å¯ä»¥æ‰¾åˆ° List çš„å¤´èŠ‚ç‚¹ã€‚</strong></li><li><strong>tailï¼šè¡¨ç¤º List çš„å°¾èŠ‚ç‚¹ï¼›é€šè¿‡å…¶å¯ä»¥æ‰¾åˆ° List çš„å°¾èŠ‚ç‚¹ã€‚</strong></li><li><strong>lenï¼šè¡¨ç¤º List å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ã€‚</strong></li><li><strong>dupï¼šè¡¨ç¤ºç”¨äºå¤åˆ¶å…ƒç´ çš„å‡½æ•°ã€‚</strong></li><li><strong>freeï¼šè¡¨ç¤ºç”¨äºé‡Šæ”¾å…ƒç´ çš„å‡½æ•°ã€‚</strong></li><li><strong>matchï¼šè¡¨ç¤ºç”¨äºå¯¹æ¯”å…ƒç´ çš„å‡½æ•°ã€‚</strong></li></ul></li></ul></li></ul><h3 id="QuickList"><a href="#QuickList" class="headerlink" title="QuickList"></a>QuickList</h3><ul><li>QuickListï¼šç»“åˆZipListå’ŒLinkedList<ul><li>ç»„æˆéƒ¨åˆ†<ul><li>æ•´ä½“ä¸Šé‡‡ç”¨LinkedList</li><li>å…·ä½“æ¯ä¸ªç»“ç‚¹é‡‡ç”¨ZipList</li></ul></li></ul></li></ul><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Seté›†åˆç”±Intsetå’Œå­—å…¸ç»„æˆ</p><h3 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h3><ul><li>Intset<ul><li>ä½¿ç”¨æ¡ä»¶<ul><li><strong>å…ƒç´ å‡ä¸ºæ•´æ•°</strong></li><li><strong>å…ƒç´ ä¸ªæ•°å°äº 512</strong></li></ul></li></ul></li></ul><h3 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h3><ul><li>å­—å…¸</li></ul><h2 id="Zset"><a href="#Zset" class="headerlink" title="Zset"></a>Zset</h2><p>Zsetç”±ZipList å’Œ SkipListç»„æˆï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«æ•°æ®æœ¬èº«å’Œä¸€ä¸ªå¯¹åº”çš„åˆ†æ•°(score)</p><h3 id="ZipList-1"><a href="#ZipList-1" class="headerlink" title="ZipList"></a>ZipList</h3><ul><li>ZipList </li></ul><h3 id="SkipList"><a href="#SkipList" class="headerlink" title="SkipList"></a>SkipList</h3><ul><li> SkipList</li><li>ç»„æˆéƒ¨åˆ†<ul><li>dict<ul><li>å­—å…¸</li></ul></li><li>zset <ul><li>è·³è¡¨</li></ul></li></ul></li></ul><h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><p>Hashç”±ZipList å’ŒHashTable ç»„æˆ</p><h3 id="ZipList-2"><a href="#ZipList-2" class="headerlink" title="ZipList"></a>ZipList</h3><ul><li>ZipList </li></ul><h3 id="HashTable"><a href="#HashTable" class="headerlink" title="HashTable"></a>HashTable</h3><ul><li>HashTable</li></ul>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JWTå°ç»“</title>
      <link href="/2021/08/24/JWT%E5%B0%8F%E7%BB%93/"/>
      <url>/2021/08/24/JWT%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="JWTå°ç»“"><a href="#JWTå°ç»“" class="headerlink" title="JWTå°ç»“"></a>JWTå°ç»“</h1><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.jianshu.com/p/576dbf44b2ae">ä»€ä¹ˆæ˜¯ JWT â€“ JSON WEB TOKEN - ç®€ä¹¦ (jianshu.com)</a></p><h2 id="ä»€ä¹ˆæ˜¯JWT"><a href="#ä»€ä¹ˆæ˜¯JWT" class="headerlink" title="ä»€ä¹ˆæ˜¯JWT"></a>ä»€ä¹ˆæ˜¯JWT</h2><blockquote><p>JSON WEB TOKEN (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäºJSONçš„å¼€æ”¾æ ‡å‡†ï¼ˆ<a href="https://link.jianshu.com/?t=https://tools.ietf.org/html/rfc7519">(RFC 7519</a>).è¯¥tokenè¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWTçš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥tokenä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚</p></blockquote><h2 id="tokençš„æ„æˆ"><a href="#tokençš„æ„æˆ" class="headerlink" title="tokençš„æ„æˆ"></a>tokençš„æ„æˆ</h2><p>tokenç”±<code>å¤´éƒ¨</code>ã€<code>è½½è·</code>ã€<code>ç­¾å</code>ä¸‰éƒ¨åˆ†ç»„æˆ</p><h3 id="å¤´éƒ¨ï¼ˆheaderï¼‰"><a href="#å¤´éƒ¨ï¼ˆheaderï¼‰" class="headerlink" title="å¤´éƒ¨ï¼ˆheaderï¼‰"></a>å¤´éƒ¨ï¼ˆheaderï¼‰</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#x27;typ&#x27;: &#x27;JWT&#x27;,<span class="comment">//å£°æ˜ç±»å‹</span></span><br><span class="line">  &#x27;alg&#x27;: &#x27;HS256&#x27;<span class="comment">//åŠ å¯†ç®—æ³•</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å¤´éƒ¨è¿›è¡Œbase64åŠ å¯†åå¾—åˆ°ç¬¬ä¸€éƒ¨åˆ†</span></span><br><span class="line">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9</span><br></pre></td></tr></table></figure><h3 id="è½½è·ï¼ˆplayloadï¼‰"><a href="#è½½è·ï¼ˆplayloadï¼‰" class="headerlink" title="è½½è·ï¼ˆplayloadï¼‰"></a>è½½è·ï¼ˆplayloadï¼‰</h3><p>è½½è·ç”¨äºå­˜æ”¾è¦ä¿å­˜çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·idã€æƒé™ã€<strong>è¿‡æœŸæ—¶é—´</strong>ç­‰ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;sub&quot;</span>: <span class="string">&quot;1234567890&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;admin&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†è½½è·è¿›è¡Œbase64åŠ å¯†åå¾—åˆ°ç¬¬äºŒéƒ¨åˆ†</span></span><br><span class="line">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9</span><br></pre></td></tr></table></figure><h3 id="ç­¾åï¼ˆsignatureï¼‰"><a href="#ç­¾åï¼ˆsignatureï¼‰" class="headerlink" title="ç­¾åï¼ˆsignatureï¼‰"></a>ç­¾åï¼ˆsignatureï¼‰</h3><p>ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šåŠ å¯†åçš„å¤´éƒ¨headerï¼ŒåŠ å¯†åçš„è½½è·playloadï¼ŒåŠ ç›secret</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// javascript</span></span><br><span class="line"><span class="keyword">var</span> encodedString = base64UrlEncode(header) + <span class="string">&#x27;.&#x27;</span> + base64UrlEncode(payload);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> signature = HMACSHA256(encodedString, <span class="string">&#x27;secret&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†åŠ å¯†åçš„å¤´éƒ¨å’Œè½½è·ç»“åˆèµ·æ¥ï¼Œä½¿ç”¨headerä¸­çš„åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ ç›secretç»„åˆåŠ å¯†ï¼Œå¾—åˆ°ç¬¬ä¸‰éƒ¨åˆ†</span></span><br><span class="line">TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</span><br></pre></td></tr></table></figure><h3 id="å®Œæ•´çš„token"><a href="#å®Œæ•´çš„token" class="headerlink" title="å®Œæ•´çš„token"></a>å®Œæ•´çš„token</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ"><a href="#å¦‚ä½•éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ" class="headerlink" title="å¦‚ä½•éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ"></a>å¦‚ä½•éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ</h2><p>è·å–tokençš„å‰ä¸¤éƒ¨åˆ†ï¼Œå³åŠ å¯†åçš„å¤´éƒ¨å’Œè½½è·</p><ul><li>æ£€æŸ¥tokenæ˜¯å¦è¿‡æœŸï¼šå°†è½½è·è§£å¯†åæ£€æŸ¥è¿‡æœŸæ—¶é—´</li><li>éªŒè¯tokenæ˜¯å¦æœªè¢«ç¯¡æ”¹ï¼šå†æ¬¡ä½¿ç”¨åŠ å¯†åçš„å¤´éƒ¨å’Œè½½è·ç”Ÿæˆç­¾åï¼Œæ¯”è¾ƒä¸¤æ¬¡ç­¾åæ˜¯å¦ç›¸åŒ</li></ul><h2 id="tokenç”±è°é¢å‘"><a href="#tokenç”±è°é¢å‘" class="headerlink" title="tokenç”±è°é¢å‘"></a>tokenç”±è°é¢å‘</h2><p>ç”¨æˆ·åœ¨ç¬¬ä¸€æ¬¡ç™»å½•åï¼Œç”¨è®¤è¯ä¸­å¿ƒç»Ÿä¸€é¢å‘token</p><h2 id="tokenå¦‚ä½•ä¼ è¾“"><a href="#tokenå¦‚ä½•ä¼ è¾“" class="headerlink" title="tokenå¦‚ä½•ä¼ è¾“"></a>tokenå¦‚ä½•ä¼ è¾“</h2><p>å®¢æˆ·ç«¯åœ¨è¿›è¡Œè¯·æ±‚çš„æ—¶å€™ï¼Œå°†tokenå­˜æ”¾åœ¨cookieä¸­æˆ–è€…å­˜æ”¾åœ¨è¯·æ±‚å¤´ä¸­</p><h2 id="tokenç»­ç­¾"><a href="#tokenç»­ç­¾" class="headerlink" title="tokenç»­ç­¾"></a>tokenç»­ç­¾</h2><h3 id="ä½¿ç”¨redisç¼“å­˜"><a href="#ä½¿ç”¨redisç¼“å­˜" class="headerlink" title="ä½¿ç”¨redisç¼“å­˜"></a>ä½¿ç”¨redisç¼“å­˜</h3><p>è®¤è¯ä¸­å¿ƒåœ¨é¢å‘tokençš„åŒæ—¶ï¼Œåœ¨redisè®¾ç½®keyä¸º<code>ç”¨æˆ·æ•°æ®ï¼ˆç”¨æˆ·idæˆ–å…¶ä»–ç‰¹å¾ä¿¡æ¯ï¼‰+å®¢æˆ·ç«¯ç¯å¢ƒç‰¹å¾ï¼ˆIPã€UAã€ç½‘å¡MACç­‰ï¼‰ï¼Œæœ€å¥½å†å°†keyè¿›è¡ŒåŠ å¯†ï¼Œå¦‚MD5</code>ï¼Œå¹¶è®¾ç½®å¯¹åº”çš„è¿‡æœŸæ—¶é—´ã€‚</p><p>å½“æ”¶åˆ°tokenæ—¶ï¼Œæ£€æŸ¥åœ¨redisæ˜¯å¦è¿‡æœŸï¼š</p><ol><li>å¦‚æœè¿‡æœŸåˆ™è¦æ±‚ç”¨æˆ·é‡æ–°ç™»å½•ï¼Œ</li><li>å¦åˆ™æ£€æŸ¥æ—¶é—´æ˜¯å¦è¿‡åŠï¼Œå¦‚æœæ²¡æœ‰åˆ™æŒ‰ç…§æ­£å¸¸æµç¨‹æ‰§è¡Œï¼Œ</li><li>å¦åˆ™åœ¨redisä¸­ä¸ºkeyå¢åŠ ä¸€åŠçš„æœ‰æ•ˆæ—¶é—´</li></ol><h3 id="ä½¿ç”¨ä¸¤ä¸ªtoken"><a href="#ä½¿ç”¨ä¸¤ä¸ªtoken" class="headerlink" title="ä½¿ç”¨ä¸¤ä¸ªtoken"></a>ä½¿ç”¨ä¸¤ä¸ªtoken</h3><p>è®¤è¯ä¸­å¿ƒåœ¨é¢å‘tokençš„æ—¶å€™ï¼Œé¢å‘ä¸¤ä¸ªtokenï¼Œä¸€ä¸ªä¸ºæ­£å¸¸ä½¿ç”¨tokenï¼Œä¸€ä¸ªä¸ºç»­ç­¾tokenï¼Œç»­ç­¾tokenè¿‡æœŸæ—¶é—´æ¯”æ­£å¸¸ä½¿ç”¨tokenæ—¶é—´é•¿ä¸€å€ã€‚</p><ol><li>å½“æ­£å¸¸ä½¿ç”¨tokenæœªè¿‡æœŸåˆ™æŒ‰æ­£å¸¸æµç¨‹æ‰§è¡Œï¼›</li><li>å½“æ­£å¸¸ä½¿ç”¨tokenè¿‡æœŸï¼Œç»­ç­¾tokenæœªè¿‡æœŸï¼Œåˆ™é‡æ–°ç­¾å‘ä¸¤ä¸ªæ–°çš„tokenï¼Œå»¶é•¿å…¶è¿‡æœŸæ—¶é—´å¤–å…¶ä»–ä¿¡æ¯å®Œå…¨ç›¸åŒï¼›</li><li>å¦‚æœç»­ç­¾tokenè¿‡æœŸï¼Œåˆ™è¦æ±‚ç”¨æˆ·é‡æ–°ç™»å½•ã€‚</li></ol><p><strong>å­˜åœ¨é‡å¤ç”ŸæˆJWTçš„é—®é¢˜ï¼Œè§£å†³åŠæ³•ï¼šåœ¨è®¤è¯ä¸­å¿ƒè®¾è®¡ä¸€ä¸ªMapï¼Œè®°å½•è¿‡å»ä¸€æ®µæ—¶é—´å†…ï¼ˆå‡ ç§’é’Ÿï¼‰çš„åŸå§‹JWTï¼ˆkeyï¼‰å’Œæ–°ç”Ÿæˆçš„JWTï¼ˆvalueï¼‰ï¼Œå¦‚æœåœ¨ä¸€æ®µæ—¶é—´å‘ç°åŒæ ·çš„åŸå§‹JWTï¼Œåˆ™è¿”å›ç›¸åŒçš„æ–°JWTã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPSå’ŒSSL</title>
      <link href="/2021/08/24/HTTPS%E5%92%8CSSL/"/>
      <url>/2021/08/24/HTTPS%E5%92%8CSSL/</url>
      
        <content type="html"><![CDATA[<h1 id="HTTPSå’ŒSSL"><a href="#HTTPSå’ŒSSL" class="headerlink" title="HTTPSå’ŒSSL"></a>HTTPSå’ŒSSL</h1><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/qq_40149612/article/details/82795656">SSLåŠå…¶åŠ å¯†é€šä¿¡è¿‡ç¨‹_Jxhackerçš„åšå®¢-CSDNåšå®¢_sslåŠ å¯†è¿‡ç¨‹</a>ï¼Œ<a href="https://blog.csdn.net/qq_38265137/article/details/90112705">SSLåè®®åŸç†è¯¦è§£_æ›¹ä¸–å®çš„åšå®¢-CSDNåšå®¢_sslåè®®</a></p><h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTPï¼ˆHyper TEXT Transfer Protocolè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ç›®å‰äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºåœ¨Webæµè§ˆå™¨å’Œç½‘ç«™æœåŠ¡å™¨ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œä½†æ˜¯HTTPåè®®ä»¥æ˜æ–‡çš„æ–¹å¼å‘é€å†…å®¹ï¼Œä¸æä¾›ä»»ä½•æ•°æ®åŠ å¯†ï¼Œæ”»å‡»è€…èƒ½å¤Ÿå¾ˆè½»æ˜“é€šè¿‡æŠ“åŒ…çš„æ–¹å¼æˆªå–ä¼ è¾“å†…å®¹å¹¶è¯»æ‡‚å…¶ä¸­çš„ä¿¡æ¯ï¼Œæ‰€ä»¥HTTPä¸é€‚åˆä¼ è¾“ä¸€äº›æ¯”è¾ƒç§å¯†çš„ä¿¡æ¯ï¼Œä¸ºäº†è§£å†³HTTPè¿™ä¸€ç¼ºé™·ï¼ŒHTTPSï¼ˆHyper TEXT Transfer Protocol over Secure Socket Layerï¼‰åè®®å‡ºç°ã€‚HTTPSæ˜¯åœ¨HTTPçš„åŸºç¡€ä¸ŠåŠ å…¥SSLåè®®ã€‚ä¼ è¾“ä»¥å¯†æ–‡ä¼ è¾“ï¼Œä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ä»¥åŠç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ï¼ˆæ•°å­—è¯ä¹¦ï¼‰ã€‚</p><h2 id="SSL"><a href="#SSL" class="headerlink" title="SSL"></a>SSL</h2><p>SSLè‹±æ–‡å…¨ç§°Secure Socket Layerï¼Œå®‰å…¨å¥—æ¥å±‚ï¼Œæ˜¯ä¸€ç§ä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨ä»¥åŠæ•°æ®å®Œæ•´æ€§çš„å®‰å…¨åè®®ï¼Œå®ƒåœ¨ä¼ è¾“å±‚å¯¹ç½‘ç»œè¿›è¡ŒåŠ å¯†ã€‚å®ƒä¸»è¦æ˜¯åˆ†ä¸ºä¸¤å±‚ï¼š</p><ul><li>SSLè®°å½•åè®®ï¼šä¸ºé«˜å±‚åè®®æä¾›å®‰å…¨å°è£…ã€å‹ç¼©ã€åŠ å¯†ç­‰åŸºæœ¬åŠŸèƒ½</li><li>SSLæ¡æ‰‹åè®®ï¼šç”¨äºåœ¨æ•°æ®ä¼ è¾“å¼€å§‹å‰è¿›è¡Œé€šä¿¡åŒæ–¹çš„èº«ä»½éªŒè¯ã€åŠ å¯†ç®—æ³•çš„åå•†ã€äº¤æ¢å¯†é’¥<br>OpenSSLæ˜¯SSLçš„å¼€æºå®ç°ï¼Œå®ƒæ˜¯ä½œä¸ºå¯†ç å­¦çš„å®‰å…¨å¼€å‘åŒ…ï¼Œæä¾›ç›¸å½“å¼ºå¤§å…¨é¢çš„åŠŸèƒ½ï¼Œå›Šæ‹¬äº†ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨çš„å¯†é’¥å’Œè¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½ä»¥åŠSSLåè®®ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„åº”ç”¨ç¨‹åºä¾›æµ‹è¯•æˆ–å…¶å®ƒç›®çš„ä½¿ç”¨ã€‚å®ƒä¸€å…±æä¾›äº†8ä¸­å¯¹ç§°åŠ å¯†ç®—æ³•å’Œ4ä¸­éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚</li></ul><h2 id="SSLåŠ å¯†è¿‡ç¨‹"><a href="#SSLåŠ å¯†è¿‡ç¨‹" class="headerlink" title="SSLåŠ å¯†è¿‡ç¨‹"></a>SSLåŠ å¯†è¿‡ç¨‹</h2><ol><li>ç¬¬ä¸€æ­¥ï¼šå®¢æˆ·ç«¯Aç»™å‡º<code>å®¢æˆ·ç«¯ç‰ˆæœ¬</code>+<code>ä¸€ä¸ªéšæœºæ•°</code>+<code>è‡ªå·±æ”¯æŒçš„åŠ å¯†æ–¹å¼</code></li><li>ç¬¬äºŒæ­¥ï¼šæœåŠ¡å™¨Bè¿”å›<code>ä»å®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†æ–¹å¼ä¸­é€‰æ‹©ä¸€ç§</code>+<code>ä¸€ä¸ªéšæœºæ•°</code>+<code>å®‰å…¨è¯ä¹¦</code></li><li>ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯AéªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼ˆä»¥ä¸‹æ˜¯éªŒè¯è¯ä¹¦çš„æ­¥éª¤ï¼‰ï¼Œç„¶åå†ç”Ÿæˆ<code>ä¸€ä¸ªéšæœºæ•°</code>ï¼Œå¹¶ä½¿ç”¨è¯ä¹¦ä¸­çš„å…¬é’¥åŠ å¯†ï¼Œå‘é€ç»™æœåŠ¡å™¨B<ul><li>å®¢æˆ·ç«¯é€šè¿‡æµè§ˆå™¨å†…ç½®çš„CAæ ¹è¯ä¹¦ï¼Œè·å–å¯¹åº”CAæœºæ„çš„å…¬é’¥</li><li>æœåŠ¡å™¨Bè¿”å›è‡ªå·±çš„å®‰å…¨è¯ä¹¦ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨CAå…¬é’¥è§£å¯†è¢«CAç§é’¥åŠ å¯†çš„ä¿¡æ¯å¾—åˆ°ä¸€ä¸ªhashå€¼ï¼Œå†ä½¿ç”¨è¯ä¹¦ä¸­çš„hashç®—æ³•ç”Ÿæˆhashå€¼ï¼Œæ¯”è¾ƒä¸¤ä¸ªhashå€¼</li></ul></li><li>ç¬¬å››æ­¥ï¼šæœåŠ¡å™¨Bä½¿ç”¨ç§é’¥è§£å¯†è¿™ä¸ªéšæœºæ•°</li><li>ç¬¬äº”æ­¥ï¼šé€šè¿‡ç¬¬äºŒæ­¥ç¡®è®¤çš„åŠ å¯†æ–¹å¼å’Œç¬¬ä¸€ã€äºŒã€ä¸‰æ­¥ç”Ÿæˆçš„3ä¸ªéšæœºæ•°ç”Ÿæˆä¸€ä¸ªå¯¹è¯ç§˜é’¥ï¼Œç”¨äºé€šä¿¡ã€‚</li></ol><p><strong>å°ç»“ï¼šHTTPSåœ¨éªŒè¯è¯ä¹¦é˜¶æ®µä½¿ç”¨çš„æ˜¯éå¯¹ç§°åŠ å¯†ï¼ˆæ›´å®‰å…¨ï¼‰ï¼Œåœ¨æ•°æ®ä¼ è¾“é˜¶æ®µä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼ˆæ›´é«˜æ•ˆï¼‰ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…</title>
      <link href="/2021/08/23/01%E8%83%8C%E5%8C%85%E5%92%8C%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85/"/>
      <url>/2021/08/23/01%E8%83%8C%E5%8C%85%E5%92%8C%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h1 id="01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…"><a href="#01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…" class="headerlink" title="01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…"></a>01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…</h1><h2 id="01èƒŒåŒ…"><a href="#01èƒŒåŒ…" class="headerlink" title="01èƒŒåŒ…"></a>01èƒŒåŒ…</h2><h3 id="é¢˜ç›®ä»‹ç»"><a href="#é¢˜ç›®ä»‹ç»" class="headerlink" title="é¢˜ç›®ä»‹ç»"></a>é¢˜ç›®ä»‹ç»</h3><p><strong>æœ‰ N ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸º V çš„èƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“æœ‰å„è‡ªçš„ä»·å€¼ä¸”åªèƒ½è¢«é€‰æ‹©ä¸€æ¬¡ï¼Œè¦æ±‚åœ¨æœ‰é™çš„èƒŒåŒ…å®¹é‡ä¸‹ï¼Œä½¿è£…å…¥çš„ç‰©å“æ€»ä»·å€¼æœ€å¤§</strong></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.acwing.com/solution/content/1374/">AcWing 2. 01èƒŒåŒ…é—®é¢˜ï¼ˆçŠ¶æ€è½¬ç§»æ–¹ç¨‹è®²è§£ï¼‰ - AcWing</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> N=s.nextInt();</span><br><span class="line">        <span class="keyword">int</span> V=s.nextInt();</span><br><span class="line">        <span class="keyword">int</span>[] v=<span class="keyword">new</span> <span class="keyword">int</span>[N+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span>[] w=<span class="keyword">new</span> <span class="keyword">int</span>[N+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">            v[i]=s.nextInt();</span><br><span class="line">            w[i]=s.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        s.close();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//äºŒç»´æ•°ç»„è§£å†³</span></span><br><span class="line">        <span class="comment">// int[][] dp=new int[N+1][V+1];</span></span><br><span class="line">        <span class="comment">// for (int i = 1; i &lt;= N; i++) &#123;</span></span><br><span class="line">        <span class="comment">//     for (int j = 0; j &lt;= V; j++) &#123;</span></span><br><span class="line">        <span class="comment">//         if (j&gt;=v[i])&#123;</span></span><br><span class="line">        <span class="comment">//             dp[i][j]=Math.max(dp[i-1][j],dp[i-1][j-v[i]]+w[i]);</span></span><br><span class="line">        <span class="comment">//         &#125;else &#123;</span></span><br><span class="line">        <span class="comment">//             dp[i][j]=dp[i-1][j];</span></span><br><span class="line">        <span class="comment">//         &#125;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// System.out.println(dp[N][V]);</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä¸€ç»´æ•°ç»„è§£å†³</span></span><br><span class="line">        <span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[V+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=v[i];j--)&#123;</span><br><span class="line">                dp[j]=Math.max(dp[j],dp[j-v[i]]+w[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(dp[V]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®Œå…¨èƒŒåŒ…"><a href="#å®Œå…¨èƒŒåŒ…" class="headerlink" title="å®Œå…¨èƒŒåŒ…"></a>å®Œå…¨èƒŒåŒ…</h2><h3 id="é¢˜ç›®ä»‹ç»-1"><a href="#é¢˜ç›®ä»‹ç»-1" class="headerlink" title="é¢˜ç›®ä»‹ç»"></a>é¢˜ç›®ä»‹ç»</h3><p><strong>æœ‰ N ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸º V çš„èƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“æœ‰å„è‡ªçš„ä»·å€¼ä¸”éƒ½æœ‰æ— é™ä»¶å¯ç”¨ï¼Œè¦æ±‚åœ¨æœ‰é™çš„èƒŒåŒ…å®¹é‡ä¸‹ï¼Œä½¿è£…å…¥çš„ç‰©å“æ€»ä»·å€¼æœ€å¤§</strong></p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.acwing.com/solution/content/5345/">AcWing 3. å®Œå…¨èƒŒåŒ…é—®é¢˜ - AcWing</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        Scanner s=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> N=s.nextInt();</span><br><span class="line">        <span class="keyword">int</span> V=s.nextInt();</span><br><span class="line">        <span class="keyword">int</span>[] v=<span class="keyword">new</span> <span class="keyword">int</span>[N+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span>[] w=<span class="keyword">new</span> <span class="keyword">int</span>[N+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">            v[i]=s.nextInt();</span><br><span class="line">            w[i]=s.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        s.close();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//äºŒç»´æ•°ç»„è§£å†³</span></span><br><span class="line">        <span class="comment">// int[][] dp=new int[N+1][V+1];</span></span><br><span class="line">        <span class="comment">// for(int i=1;i&lt;=N;i++)&#123;</span></span><br><span class="line">        <span class="comment">//     for(int j=0;j&lt;=V;j++)&#123;</span></span><br><span class="line">        <span class="comment">//         for(int k=0;k*v[i]&lt;=j;k++)&#123;</span></span><br><span class="line">        <span class="comment">//             dp[i][j]=Math.max(dp[i][j],dp[i-1][j-k*v[i]]+k*w[i]);</span></span><br><span class="line">        <span class="comment">//         &#125;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// System.out.println(dp[N][V]);</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä¸€ç»´æ•°ç»„è§£å†³</span></span><br><span class="line">        <span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[V+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=v[i];j&lt;=V;j++)&#123;</span><br><span class="line">                dp[j]=Math.max(dp[j],dp[j-v[i]]+w[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(dp[V]);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èƒŒè®°"><a href="#èƒŒè®°" class="headerlink" title="èƒŒè®°"></a>èƒŒè®°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[V+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//01èƒŒåŒ…</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=v[i];j--)&#123;</span><br><span class="line">        dp[j]=Math.max(dp[j],dp[j-v[i]]+w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®Œå…¨èƒŒåŒ…</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=v[i];j&lt;=V;j++)&#123;</span><br><span class="line">        dp[j]=Math.max(dp[j],dp[j-v[i]]+w[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(dp[V]);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ·é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK1.8æ–°ç‰¹æ€§</title>
      <link href="/2021/08/23/JDK1-8%E6%96%B0%E7%89%B9%E6%80%A7/"/>
      <url>/2021/08/23/JDK1-8%E6%96%B0%E7%89%B9%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="JDK1-8æ–°ç‰¹æ€§"><a href="#JDK1-8æ–°ç‰¹æ€§" class="headerlink" title="JDK1.8æ–°ç‰¹æ€§"></a>JDK1.8æ–°ç‰¹æ€§</h1><ol><li>lambdaç®€åŒ–</li><li>streamæµ</li><li>æ–°çš„hashmapã€concurrentHashmap</li><li>å…ƒç©ºé—´</li><li>æ¥å£ä¸­å…è®¸æœ‰é™æ€æ–¹æ³•å’Œé»˜è®¤æ–¹æ³•</li><li>localdatetime</li><li>optional</li><li>CompletableFuture</li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é›†åˆæ¡†æ¶ </tag>
            
            <tag> stream </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ConcurrentHashMapéƒ¨åˆ†æºç ç®€æ</title>
      <link href="/2021/08/17/ConcurrentHashMap%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E7%AE%80%E6%9E%90/"/>
      <url>/2021/08/17/ConcurrentHashMap%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="ConcurrentHashMapéƒ¨åˆ†æºç ç®€æ"><a href="#ConcurrentHashMapéƒ¨åˆ†æºç ç®€æ" class="headerlink" title="ConcurrentHashMapéƒ¨åˆ†æºç ç®€æ"></a>ConcurrentHashMapéƒ¨åˆ†æºç ç®€æ</h1><p>æœ¬æ–‡å‚è€ƒï¼š<a href="https://blog.csdn.net/jianghuxiaojin/article/details/52006118">java-å¹¶å‘-ConcurrentHashMapé«˜å¹¶å‘æœºåˆ¶-jdk1.8_é˜¿é‡ŒDarker-CSDNåšå®¢</a></p><h2 id="æ ¸å¿ƒå±æ€§æˆ–æ–¹æ³•"><a href="#æ ¸å¿ƒå±æ€§æˆ–æ–¹æ³•" class="headerlink" title="æ ¸å¿ƒå±æ€§æˆ–æ–¹æ³•"></a>æ ¸å¿ƒå±æ€§æˆ–æ–¹æ³•</h2><h3 id="table"><a href="#table" class="headerlink" title="table"></a>table</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The array of bins. Lazily initialized upon first insertion.</span></span><br><span class="line"><span class="comment"> * Size is always a power of two. Accessed directly by iterators.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//ç››è£…Nodeå…ƒç´ çš„æ•°ç»„ å®ƒçš„å¤§å°æ˜¯2çš„æ•´æ•°æ¬¡å¹‚</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">volatile</span> Node&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure><h3 id="sizeCtl"><a href="#sizeCtl" class="headerlink" title="sizeCtl"></a>sizeCtl</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Table initialization and resizing control.  When negative, the</span></span><br><span class="line"><span class="comment">     * table is being initialized or resized: -1 for initialization,</span></span><br><span class="line"><span class="comment">     * else -(1 + the number of active resizing threads).  Otherwise,</span></span><br><span class="line"><span class="comment">     * when table is null, holds the initial table size to use upon</span></span><br><span class="line"><span class="comment">     * creation, or 0 for default. After initialization, holds the</span></span><br><span class="line"><span class="comment">     * next element count value upon which to resize the table.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//è¡¨åˆå§‹åŒ–å’Œè°ƒæ•´å¤§å°æ§åˆ¶ã€‚ </span></span><br><span class="line"><span class="comment">//å¦‚æœä¸ºè´Ÿï¼Œåˆ™è¡¨æ­£åœ¨åˆå§‹åŒ–æˆ–æ‰©å®¹ï¼š-1 è¡¨ç¤ºåˆå§‹åŒ–ï¼Œå¦åˆ™è¡¨ç¤ºæœ‰N-1ä¸ªçº¿ç¨‹æ­£åœ¨ååŠ©æ‰©å®¹ã€‚ </span></span><br><span class="line"><span class="comment">//0æˆ–æ­£æ•°ä»£è¡¨tableè¿˜æœªåˆå§‹åŒ–ï¼Œæˆ–ä¸‹ä¸€æ¬¡æ‰©å®¹çš„é˜ˆå€¼</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> <span class="keyword">int</span> sizeCtl;</span><br></pre></td></tr></table></figure><h3 id="hashcode"><a href="#hashcode" class="headerlink" title="hashcode"></a>hashcode</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Encodings for Node hash fields. See above for explanation.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªForwardingNodeç»“ç‚¹ï¼Œè¡¨ç¤ºåœ¨æ‰©å®¹æ—¶æ‰©å®¹çº¿ç¨‹è·³è¿‡è¯¥ç»“ç‚¹ï¼ˆå·²è¢«å¤„ç†ï¼‰</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MOVED     = -<span class="number">1</span>; <span class="comment">// hash for forwarding nodes</span></span><br><span class="line"><span class="comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€é¢—æ ‘</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEBIN   = -<span class="number">2</span>; <span class="comment">// hash for roots of trees</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RESERVED  = -<span class="number">3</span>; <span class="comment">// hash for transient reservations</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HASH_BITS = <span class="number">0x7fffffff</span>; <span class="comment">// usable bits of normal node hash</span></span><br></pre></td></tr></table></figure><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Key-value entry.  This class is never exported out as a</span></span><br><span class="line"><span class="comment">     * user-mutable Map.Entry (i.e., one supporting setValue; see</span></span><br><span class="line"><span class="comment">     * MapEntry below), but can be used for read-only traversals used</span></span><br><span class="line"><span class="comment">     * in bulk tasks.  Subclasses of Node with a negative hash field</span></span><br><span class="line"><span class="comment">     * are special, and contain null keys and values (but are never</span></span><br><span class="line"><span class="comment">     * exported).  Otherwise, keys and vals are never null.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//ConcurrentHashMap1.8é‡‡ç”¨Nodeæ•°ç»„ï¼Œç»“æ„ä¸hashmapç›¸ä¼¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">    <span class="keyword">final</span> K key;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä¿è¯valå’Œnextçš„å¯è§æ€§</span></span><br><span class="line">    <span class="keyword">volatile</span> V val;</span><br><span class="line">    <span class="keyword">volatile</span> Node&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•</span></span><br><span class="line">    Node(<span class="keyword">int</span> hash, K key, V val, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">        <span class="keyword">this</span>.hash = hash;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.val = val;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> K <span class="title">getKey</span><span class="params">()</span>       </span>&#123; <span class="keyword">return</span> key; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">getValue</span><span class="params">()</span>     </span>&#123; <span class="keyword">return</span> val; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span>   </span>&#123; <span class="keyword">return</span> key.hashCode() ^ val.hashCode(); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">toString</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> key + <span class="string">&quot;=&quot;</span> + val; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">setValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒä¸ºMap.Entryï¼Œkeyã€valueä¸ä¸ºç©ºä¸”keyã€valueç›¸ç­‰ï¼Œåˆ™è¿”å›true</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        Object k, v, u; Map.Entry&lt;?,?&gt; e;</span><br><span class="line">        <span class="keyword">return</span> ((o <span class="keyword">instanceof</span> Map.Entry) &amp;&amp;</span><br><span class="line">                (k = (e = (Map.Entry&lt;?,?&gt;)o).getKey()) != <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">                (v = e.getValue()) != <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">                (k == key || k.equals(key)) &amp;&amp;</span><br><span class="line">                (v == (u = val) || v.equals(u)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Virtualized support for map.get(); overridden in subclasses.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    <span class="function">Node&lt;K,V&gt; <span class="title">find</span><span class="params">(<span class="keyword">int</span> h, Object k)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt; e = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span> (k != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                K ek;</span><br><span class="line">                <span class="keyword">if</span> (e.hash == h &amp;&amp;</span><br><span class="line">                    ((ek = e.key) == k || (ek != <span class="keyword">null</span> &amp;&amp; k.equals(ek))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ForwardingNode"><a href="#ForwardingNode" class="headerlink" title="ForwardingNode"></a>ForwardingNode</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A node inserted at head of bins during transfer operations.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//è¡¨ç¤ºåœ¨æ‰©å®¹æ—¶è¯¥ç»“ç‚¹è·³è¿‡è¯¥ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ForwardingNode</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;K,V&gt;[] nextTable;</span><br><span class="line">    ForwardingNode(Node&lt;K,V&gt;[] tab) &#123;</span><br><span class="line">        <span class="keyword">super</span>(MOVED, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">this</span>.nextTable = tab;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Node&lt;K,V&gt; <span class="title">find</span><span class="params">(<span class="keyword">int</span> h, Object k)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// loop to avoid arbitrarily deep recursion on forwarding nodes</span></span><br><span class="line">        outer: <span class="keyword">for</span> (Node&lt;K,V&gt;[] tab = nextTable;;) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e; <span class="keyword">int</span> n;</span><br><span class="line">            <span class="keyword">if</span> (k == <span class="keyword">null</span> || tab == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span> ||</span><br><span class="line">                (e = tabAt(tab, (n - <span class="number">1</span>) &amp; h)) == <span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">                <span class="keyword">int</span> eh; K ek;</span><br><span class="line">                <span class="keyword">if</span> ((eh = e.hash) == h &amp;&amp;</span><br><span class="line">                    ((ek = e.key) == k || (ek != <span class="keyword">null</span> &amp;&amp; k.equals(ek))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">                <span class="keyword">if</span> (eh &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (e <span class="keyword">instanceof</span> ForwardingNode) &#123;</span><br><span class="line">                        tab = ((ForwardingNode&lt;K,V&gt;)e).nextTable;</span><br><span class="line">                        <span class="keyword">continue</span> outer;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        <span class="keyword">return</span> e.find(h, k);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> ((e = e.next) == <span class="keyword">null</span>)</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CAS"><a href="#CAS" class="headerlink" title="CAS"></a>CAS</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Unsafe mechanics</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> sun.misc.Unsafe U;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> SIZECTL;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> TRANSFERINDEX;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> BASECOUNT;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> CELLSBUSY;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> CELLVALUE;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> ABASE;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ASHIFT;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        U = sun.misc.Unsafe.getUnsafe();</span><br><span class="line">        Class&lt;?&gt; k = ConcurrentHashMap.class;</span><br><span class="line">        SIZECTL = U.objectFieldOffset</span><br><span class="line">            (k.getDeclaredField(<span class="string">&quot;sizeCtl&quot;</span>));</span><br><span class="line">        TRANSFERINDEX = U.objectFieldOffset</span><br><span class="line">            (k.getDeclaredField(<span class="string">&quot;transferIndex&quot;</span>));</span><br><span class="line">        BASECOUNT = U.objectFieldOffset</span><br><span class="line">            (k.getDeclaredField(<span class="string">&quot;baseCount&quot;</span>));</span><br><span class="line">        CELLSBUSY = U.objectFieldOffset</span><br><span class="line">            (k.getDeclaredField(<span class="string">&quot;cellsBusy&quot;</span>));</span><br><span class="line">        Class&lt;?&gt; ck = CounterCell.class;</span><br><span class="line">        CELLVALUE = U.objectFieldOffset</span><br><span class="line">            (ck.getDeclaredField(<span class="string">&quot;value&quot;</span>));</span><br><span class="line">        Class&lt;?&gt; ak = Node[].class;</span><br><span class="line">        ABASE = U.arrayBaseOffset(ak);</span><br><span class="line">        <span class="keyword">int</span> scale = U.arrayIndexScale(ak);</span><br><span class="line">        <span class="keyword">if</span> ((scale &amp; (scale - <span class="number">1</span>)) != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">&quot;data type scale not a power of two&quot;</span>);</span><br><span class="line">        ASHIFT = <span class="number">31</span> - Integer.numberOfLeadingZeros(scale);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Error(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="tabAt"><a href="#tabAt" class="headerlink" title="tabAt"></a>tabAt</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line"><span class="comment">//è·å¾—iä½ç½®çš„Nodeç»“ç‚¹</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> &lt;K,V&gt; <span class="function">Node&lt;K,V&gt; <span class="title">tabAt</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((<span class="keyword">long</span>)i &lt;&lt; ASHIFT) + ABASE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨CASæ“ä½œæ›´æ”¹iä½ç½®çš„Nodeç»“ç‚¹</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> &lt;K,V&gt; <span class="function"><span class="keyword">boolean</span> <span class="title">casTabAt</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="keyword">int</span> i,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    Node&lt;K,V&gt; c, Node&lt;K,V&gt; v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> U.compareAndSwapObject(tab, ((<span class="keyword">long</span>)i &lt;&lt; ASHIFT) + ABASE, c, v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®iä½ç½®Nodeç»“ç‚¹çš„å€¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> &lt;K,V&gt; <span class="function"><span class="keyword">void</span> <span class="title">setTabAt</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="keyword">int</span> i, Node&lt;K,V&gt; v)</span> </span>&#123;</span><br><span class="line">    U.putObjectVolatile(tab, ((<span class="keyword">long</span>)i &lt;&lt; ASHIFT) + ABASE, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ‰å‚æ„é€ "><a href="#æœ‰å‚æ„é€ " class="headerlink" title="æœ‰å‚æ„é€ "></a>æœ‰å‚æ„é€ </h2><h3 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a>ConcurrentHashMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates a new, empty map with an initial table size based on</span></span><br><span class="line"><span class="comment"> * the given number of elements (&#123;<span class="doctag">@code</span> initialCapacity&#125;), table</span></span><br><span class="line"><span class="comment"> * density (&#123;<span class="doctag">@code</span> loadFactor&#125;), and number of concurrently</span></span><br><span class="line"><span class="comment"> * updating threads (&#123;<span class="doctag">@code</span> concurrencyLevel&#125;).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> initialCapacity the initial capacity. The implementation</span></span><br><span class="line"><span class="comment"> * performs internal sizing to accommodate this many elements,</span></span><br><span class="line"><span class="comment"> * given the specified load factor.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> loadFactor the load factor (table density) for</span></span><br><span class="line"><span class="comment"> * establishing the initial table size</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> concurrencyLevel the estimated number of concurrently</span></span><br><span class="line"><span class="comment"> * updating threads. The implementation may use this value as</span></span><br><span class="line"><span class="comment"> * a sizing hint.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalArgumentException if the initial capacity is</span></span><br><span class="line"><span class="comment"> * negative or the load factor or concurrencyLevel are</span></span><br><span class="line"><span class="comment"> * nonpositive</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConcurrentHashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="keyword">float</span> loadFactor, <span class="keyword">int</span> concurrencyLevel)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(loadFactor &gt; <span class="number">0.0f</span>) || initialCapacity &lt; <span class="number">0</span> || concurrencyLevel &lt;= <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; concurrencyLevel)   <span class="comment">// Use at least as many bins</span></span><br><span class="line">        initialCapacity = concurrencyLevel;   <span class="comment">// as estimated threads</span></span><br><span class="line">    <span class="keyword">long</span> size = (<span class="keyword">long</span>)(<span class="number">1.0</span> + (<span class="keyword">long</span>)initialCapacity / loadFactor);</span><br><span class="line">    <span class="keyword">int</span> cap = (size &gt;= (<span class="keyword">long</span>)MAXIMUM_CAPACITY) ?</span><br><span class="line">        MAXIMUM_CAPACITY : tableSizeFor((<span class="keyword">int</span>)size);</span><br><span class="line">    <span class="keyword">this</span>.sizeCtl = cap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–table"><a href="#åˆå§‹åŒ–table" class="headerlink" title="åˆå§‹åŒ–table"></a>åˆå§‹åŒ–table</h2><h3 id="initTable"><a href="#initTable" class="headerlink" title="initTable"></a>initTable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Initializes table, using the size recorded in sizeCtl.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Node&lt;K,V&gt;[] initTable() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; <span class="keyword">int</span> sc;</span><br><span class="line">    <span class="comment">//å½“tableæœªåˆå§‹åŒ–æˆ–é•¿åº¦ä¸º0</span></span><br><span class="line">    <span class="keyword">while</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//è¡¨æ˜æœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–tableï¼Œå½“å‰çº¿ç¨‹ç¤¼è®©å…¶ä»–çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">if</span> ((sc = sizeCtl) &lt; <span class="number">0</span>)</span><br><span class="line">            Thread.yield(); <span class="comment">// lost initialization race; just spin</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä½¿ç”¨CASæ“ä½œæŠŠsizeCtlç½®ä¸º-1ï¼Œè¡¨ç¤ºæœ¬çº¿ç¨‹è¿›è¡Œåˆå§‹åŒ–table</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, -<span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//tableæœªåˆå§‹åŒ–æˆ–é•¿åº¦ä¸º0</span></span><br><span class="line">                <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="comment">//private static final int DEFAULT_CAPACITY = 16;</span></span><br><span class="line">                    <span class="keyword">int</span> n = (sc &gt; <span class="number">0</span>) ? sc : DEFAULT_CAPACITY;</span><br><span class="line">                    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                    Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node&lt;?,?&gt;[n];</span><br><span class="line">                    table = tab = nt;</span><br><span class="line">                    <span class="comment">//æ‰©å®¹é˜ˆå€¼ä¸º0.75n</span></span><br><span class="line">                    sc = n - (n &gt;&gt;&gt; <span class="number">2</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                sizeCtl = sc;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="putæ–¹æ³•"><a href="#putæ–¹æ³•" class="headerlink" title="putæ–¹æ³•"></a>putæ–¹æ³•</h2><h3 id="put"><a href="#put" class="headerlink" title="put"></a>put</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Maps the specified key to the specified value in this table.</span></span><br><span class="line"><span class="comment"> * Neither the key nor the value can be null.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;The value can be retrieved by calling the &#123;<span class="doctag">@code</span> get&#125; method</span></span><br><span class="line"><span class="comment"> * with a key that is equal to the original key.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key key with which the specified value is to be associated</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value value to be associated with the specified key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the previous value associated with &#123;<span class="doctag">@code</span> key&#125;, or</span></span><br><span class="line"><span class="comment"> *         &#123;<span class="doctag">@code</span> null&#125; if there was no mapping for &#123;<span class="doctag">@code</span> key&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NullPointerException if the specified key or value is null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//keyã€valueéç©º</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(key, value, <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="putVal"><a href="#putVal" class="headerlink" title="putVal"></a>putVal</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Implementation for put and putIfAbsent */</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(K key, V value, <span class="keyword">boolean</span> onlyIfAbsent)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//keyã€valueéç©º</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span> || value == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    <span class="comment">//è®¡ç®—hashå€¼</span></span><br><span class="line">    <span class="keyword">int</span> hash = spread(key.hashCode());</span><br><span class="line">    <span class="keyword">int</span> binCount = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æ­»å¾ªç¯  æ’å…¥æˆåŠŸåé€€å‡ºå¾ªç¯</span></span><br><span class="line">    <span class="keyword">for</span> (Node&lt;K,V&gt;[] tab = table;;) &#123;</span><br><span class="line">        Node&lt;K,V&gt; f; <span class="keyword">int</span> n, i, fh;</span><br><span class="line">        <span class="comment">//tableæœªåˆå§‹åŒ–æˆ–é•¿åº¦ä¸º0ï¼Œè¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">if</span> (tab == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            tab = initTable();</span><br><span class="line">        <span class="comment">//è¯¥ç»“ç‚¹ä¸Šæ— å…ƒç´ ï¼Œç›´æ¥æ’å…¥ï¼Œæ²¡æœ‰åŠ é”</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((f = tabAt(tab, i = (n - <span class="number">1</span>) &amp; hash)) == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (casTabAt(tab, i, <span class="keyword">null</span>,</span><br><span class="line">                         <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key, value, <span class="keyword">null</span>)))</span><br><span class="line">                <span class="keyword">break</span>;                   <span class="comment">// no lock when adding to empty bin</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¡¨æ˜tableæ­£åœ¨è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">        <span class="comment">//static final int MOVED = -1; // hash for forwarding nodes</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((fh = f.hash) == MOVED)</span><br><span class="line">            <span class="comment">//ååŠ©tableæ‰©å®¹</span></span><br><span class="line">            tab = helpTransfer(tab, f);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            V oldVal = <span class="keyword">null</span>;</span><br><span class="line">            <span class="comment">//è¯¥ç»“ç‚¹å…ƒç´ ä¸ä¸ºç©ºï¼ŒåŠ é”</span></span><br><span class="line">            <span class="keyword">synchronized</span> (f) &#123;</span><br><span class="line">                <span class="comment">//è¯¥ç»“ç‚¹å…ƒç´ æœªè¢«å…¶ä»–çº¿ç¨‹è¦†ç›–</span></span><br><span class="line">                <span class="keyword">if</span> (tabAt(tab, i) == f) &#123;</span><br><span class="line">                    <span class="comment">//è¯´æ˜è¿™æ˜¯ä¸€æ¡é“¾è¡¨</span></span><br><span class="line">                    <span class="keyword">if</span> (fh &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                        binCount = <span class="number">1</span>;</span><br><span class="line">                        <span class="comment">//éå†é“¾è¡¨</span></span><br><span class="line">                        <span class="keyword">for</span> (Node&lt;K,V&gt; e = f;; ++binCount) &#123;</span><br><span class="line">                            K ek;</span><br><span class="line">                            <span class="comment">//å¦‚æœkeyç›¸åŒï¼Œåˆ™éœ€è¦ä¿®æ”¹valueå€¼ï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">                            <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                                ((ek = e.key) == key ||</span><br><span class="line">                                 (ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek)))) &#123;</span><br><span class="line">                                oldVal = e.val;</span><br><span class="line">                                <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                    e.val = value;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            Node&lt;K,V&gt; pred = e;</span><br><span class="line">                            <span class="comment">//éå†å®Œé“¾è¡¨æœªæ‰¾åˆ°keyç›¸ç­‰çš„ç»“ç‚¹ï¼Œåˆ™åœ¨é“¾è¡¨å°¾éƒ¨æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼Œå¹¶é€€å‡ºå¾ªç¯</span></span><br><span class="line">                            <span class="keyword">if</span> ((e = e.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                                pred.next = <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key,</span><br><span class="line">                                                          value, <span class="keyword">null</span>);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//static final int TREEBIN = -2; // hash for roots of trees</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (f <span class="keyword">instanceof</span> TreeBin) &#123;</span><br><span class="line">                        Node&lt;K,V&gt; p;</span><br><span class="line">                        binCount = <span class="number">2</span>;</span><br><span class="line">                        <span class="keyword">if</span> ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,</span><br><span class="line">                                                       value)) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            oldVal = p.val;</span><br><span class="line">                            <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                p.val = value;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (binCount != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœé“¾è¡¨é•¿åº¦è¾¾åˆ°ä¸´ç•Œå€¼ï¼Œåˆ™è½¬å˜ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                <span class="comment">//static final int TREEIFY_THRESHOLD = 8;</span></span><br><span class="line">                <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD)</span><br><span class="line">                    treeifyBin(tab, i);</span><br><span class="line">                <span class="keyword">if</span> (oldVal != <span class="keyword">null</span>)</span><br><span class="line">                    <span class="keyword">return</span> oldVal;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å°†ConcurrentHashMapä¸­å…ƒç´ æ•°é‡+1</span></span><br><span class="line">    addCount(<span class="number">1L</span>, binCount);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="spread"><a href="#spread" class="headerlink" title="spread"></a>spread</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Spreads (XORs) higher bits of hash to lower and also forces top</span></span><br><span class="line"><span class="comment"> * bit to 0. Because the table uses power-of-two masking, sets of</span></span><br><span class="line"><span class="comment"> * hashes that vary only in bits above the current mask will</span></span><br><span class="line"><span class="comment"> * always collide. (Among known examples are sets of Float keys</span></span><br><span class="line"><span class="comment"> * holding consecutive whole numbers in small tables.)  So we</span></span><br><span class="line"><span class="comment"> * apply a transform that spreads the impact of higher bits</span></span><br><span class="line"><span class="comment"> * downward. There is a tradeoff between speed, utility, and</span></span><br><span class="line"><span class="comment"> * quality of bit-spreading. Because many common sets of hashes</span></span><br><span class="line"><span class="comment"> * are already reasonably distributed (so don&#x27;t benefit from</span></span><br><span class="line"><span class="comment"> * spreading), and because we use trees to handle large sets of</span></span><br><span class="line"><span class="comment"> * collisions in bins, we just XOR some shifted bits in the</span></span><br><span class="line"><span class="comment"> * cheapest possible way to reduce systematic lossage, as well as</span></span><br><span class="line"><span class="comment"> * to incorporate impact of the highest bits that would otherwise</span></span><br><span class="line"><span class="comment"> * never be used in index calculations because of table bounds.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//ä¸hashmapçš„hashæ–¹æ³•ç›¸ä¼¼ï¼Œé«˜16ä½ä¸ä½16ä½å¼‚æˆ–å¹¶ä¿è¯æœ€é«˜ä½ä¸º0ï¼ˆä»è€Œä¿è¯æœ€ç»ˆç»“æœä¸ºæ­£æ•´æ•°ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">spread</span><span class="params">(<span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//static final int HASH_BITS = 0x7fffffff; // usable bits of normal node hash</span></span><br><span class="line">    <span class="keyword">return</span> (h ^ (h &gt;&gt;&gt; <span class="number">16</span>)) &amp; HASH_BITS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å®¹æ–¹æ³•"><a href="#æ‰©å®¹æ–¹æ³•" class="headerlink" title="æ‰©å®¹æ–¹æ³•"></a>æ‰©å®¹æ–¹æ³•</h2><h3 id="addCount"><a href="#addCount" class="headerlink" title="addCount"></a>addCount</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Adds to count, and if table is too small and not already</span></span><br><span class="line"><span class="comment"> * resizing, initiates transfer. If already resizing, helps</span></span><br><span class="line"><span class="comment"> * perform transfer if work is available.  Rechecks occupancy</span></span><br><span class="line"><span class="comment"> * after a transfer to see if another resize is already needed</span></span><br><span class="line"><span class="comment"> * because resizings are lagging additions.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> x the count to add</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> check if &lt;0, don&#x27;t check resize, if &lt;= 1 only check if uncontended</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addCount</span><span class="params">(<span class="keyword">long</span> x, <span class="keyword">int</span> check)</span> </span>&#123;</span><br><span class="line">    CounterCell[] as; <span class="keyword">long</span> b, s;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨CASæ›´æ–°baseCountçš„å€¼</span></span><br><span class="line">    <span class="keyword">if</span> ((as = counterCells) != <span class="keyword">null</span> ||</span><br><span class="line">        !U.compareAndSwapLong(<span class="keyword">this</span>, BASECOUNT, b = baseCount, s = b + x)) &#123;</span><br><span class="line">        CounterCell a; <span class="keyword">long</span> v; <span class="keyword">int</span> m;</span><br><span class="line">        <span class="keyword">boolean</span> uncontended = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (as == <span class="keyword">null</span> || (m = as.length - <span class="number">1</span>) &lt; <span class="number">0</span> ||</span><br><span class="line">            (a = as[ThreadLocalRandom.getProbe() &amp; m]) == <span class="keyword">null</span> ||</span><br><span class="line">            !(uncontended =</span><br><span class="line">              U.compareAndSwapLong(a, CELLVALUE, v = a.value, v + x))) &#123;</span><br><span class="line">            fullAddCount(x, uncontended);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (check &lt;= <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        s = sumCount();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœcheckå¤§äºç­‰äº0ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (check &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab, nt; <span class="keyword">int</span> n, sc;</span><br><span class="line">        <span class="keyword">while</span> (s &gt;= (<span class="keyword">long</span>)(sc = sizeCtl) &amp;&amp; (tab = table) != <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">               (n = tab.length) &lt; MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            <span class="keyword">int</span> rs = resizeStamp(n);</span><br><span class="line">            <span class="comment">//è¡¨ç¤ºtableæ­£åœ¨åˆå§‹åŒ–æˆ–æ‰©å®¹</span></span><br><span class="line">            <span class="keyword">if</span> (sc &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + <span class="number">1</span> ||</span><br><span class="line">                    sc == rs + MAX_RESIZERS || (nt = nextTable) == <span class="keyword">null</span> ||</span><br><span class="line">                    transferIndex &lt;= <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">//å¦‚æœå·²æœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨è¿›è¡Œæ‰©å®¹ï¼ŒååŠ©å…¶ä»–çº¿ç¨‹æ‰©å®¹</span></span><br><span class="line">                <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, sc + <span class="number">1</span>))</span><br><span class="line">                    transfer(tab, nt);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å½“å‰çº¿ç¨‹æ˜¯ç¬¬ä¸€ä¸ªå‘èµ·æ‰©å®¹æˆ–å”¯ä¸€ä¸€ä¸ªæ­£åœ¨æ‰©å®¹çš„çº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc,</span><br><span class="line">                                         (rs &lt;&lt; RESIZE_STAMP_SHIFT) + <span class="number">2</span>))</span><br><span class="line">                transfer(tab, <span class="keyword">null</span>);</span><br><span class="line">            s = sumCount();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="helpTransfer"><a href="#helpTransfer" class="headerlink" title="helpTransfer"></a>helpTransfer</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Helps transfer if a resize is in progress.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//ååŠ©æ‰©å®¹</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] helpTransfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt; f) &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] nextTab; <span class="keyword">int</span> sc;</span><br><span class="line">    <span class="comment">//tableä¸ä¸ºç©ºï¼Œå½“å‰ç»“ç‚¹ä¸ºForwardingNodeç»“ç‚¹ï¼Œä¸”ForwardingNodeçš„nextTableå±æ€§ä¸ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (tab != <span class="keyword">null</span> &amp;&amp; (f <span class="keyword">instanceof</span> ForwardingNode) &amp;&amp;</span><br><span class="line">        (nextTab = ((ForwardingNode&lt;K,V&gt;)f).nextTable) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//è®¡ç®—æ£€éªŒç </span></span><br><span class="line">        <span class="keyword">int</span> rs = resizeStamp(tab.length);</span><br><span class="line">        <span class="keyword">while</span> (nextTab == nextTable &amp;&amp; table == tab &amp;&amp;</span><br><span class="line">               (sc = sizeCtl) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + <span class="number">1</span> ||</span><br><span class="line">                sc == rs + MAX_RESIZERS || transferIndex &lt;= <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">//å¦‚æœå·²æœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨è¿›è¡Œæ‰©å®¹ï¼ŒååŠ©å…¶ä»–çº¿ç¨‹æ‰©å®¹</span></span><br><span class="line">            <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, sc + <span class="number">1</span>)) &#123;</span><br><span class="line">                transfer(tab, nextTab);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nextTab;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> table;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="transfer"><a href="#transfer" class="headerlink" title="transfer"></a>transfer</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Moves and/or copies the nodes in each bin to new table. See</span></span><br><span class="line"><span class="comment"> * above for explanation.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt;[] nextTab)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = tab.length, stride;</span><br><span class="line">    <span class="comment">//å°†length/8ç„¶åé™¤ä»¥CPUæ ¸å¿ƒæ•°ã€‚å¦‚æœå¾—åˆ°çš„ç»“æœå°äº16ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨16</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œçš„ç›®çš„æ˜¯è®©æ¯ä¸ªCPUå¤„ç†çš„æ¡¶ä¸€æ ·å¤šï¼Œé¿å…å‡ºç°è½¬ç§»ä»»åŠ¡ä¸å‡åŒ€çš„ç°è±¡ï¼Œå¦‚æœæ¡¶è¾ƒå°‘çš„è¯ï¼Œé»˜è®¤ä¸€ä¸ªCPU(ä¸€ä¸ªçº¿ç¨‹ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> ((stride = (NCPU &gt; <span class="number">1</span>) ? (n &gt;&gt;&gt; <span class="number">3</span>) / NCPU : n) &lt; MIN_TRANSFER_STRIDE)</span><br><span class="line">        stride = MIN_TRANSFER_STRIDE; <span class="comment">// subdivide range</span></span><br><span class="line">    <span class="comment">//å¦‚æœæ–°tableä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (nextTab == <span class="keyword">null</span>) &#123;            <span class="comment">// initiating</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">            <span class="comment">//åˆ›å»ºå®¹é‡ä¸ºåŸtable2å€çš„æ–°table</span></span><br><span class="line">            Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node&lt;?,?&gt;[n &lt;&lt; <span class="number">1</span>];</span><br><span class="line">            nextTab = nt;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable ex) &#123;      <span class="comment">// try to cope with OOME</span></span><br><span class="line">            sizeCtl = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        nextTable = nextTab;</span><br><span class="line">        transferIndex = n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> nextn = nextTab.length;</span><br><span class="line">    <span class="comment">//ç”¨äºå ä½ï¼Œçº¿ç¨‹å‘ç°æŸä¸€ç»“ç‚¹ä¸ºForwardingNodeï¼Œåˆ™è·³è¿‡è¯¥ç»“ç‚¹</span></span><br><span class="line">    ForwardingNode&lt;K,V&gt; fwd = <span class="keyword">new</span> ForwardingNode&lt;K,V&gt;(nextTab);</span><br><span class="line">    <span class="comment">//å¦‚æœadvanceç­‰äºtrue è¡¨æ˜è¯¥ç»“ç‚¹å·²å¤„ç†è¿‡</span></span><br><span class="line">    <span class="keyword">boolean</span> advance = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">boolean</span> finishing = <span class="keyword">false</span>; <span class="comment">// to ensure sweep before committing nextTab</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, bound = <span class="number">0</span>;;) &#123;</span><br><span class="line">        Node&lt;K,V&gt; f; <span class="keyword">int</span> fh;</span><br><span class="line">        <span class="comment">//éå†æ‰€æœ‰ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (advance) &#123;</span><br><span class="line">            <span class="keyword">int</span> nextIndex, nextBound;</span><br><span class="line">            <span class="keyword">if</span> (--i &gt;= bound || finishing)</span><br><span class="line">                advance = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((nextIndex = transferIndex) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                i = -<span class="number">1</span>;</span><br><span class="line">                advance = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt</span><br><span class="line">                     (<span class="keyword">this</span>, TRANSFERINDEX, nextIndex,</span><br><span class="line">                      nextBound = (nextIndex &gt; stride ?</span><br><span class="line">                                   nextIndex - stride : <span class="number">0</span>))) &#123;</span><br><span class="line">                bound = nextBound;</span><br><span class="line">                i = nextIndex - <span class="number">1</span>;</span><br><span class="line">                advance = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= n || i + n &gt;= nextn) &#123;</span><br><span class="line">            <span class="keyword">int</span> sc;</span><br><span class="line">            <span class="comment">//ç»“ç‚¹å®Œæˆå¤åˆ¶å·¥ä½œ</span></span><br><span class="line">            <span class="keyword">if</span> (finishing) &#123;</span><br><span class="line">                <span class="comment">//æ¸…ç©ºä¸´æ—¶å˜é‡nextTable</span></span><br><span class="line">                nextTable = <span class="keyword">null</span>;</span><br><span class="line">                <span class="comment">//å°†tableèµ‹å€¼ä¸ºnextTab</span></span><br><span class="line">                table = nextTab;</span><br><span class="line">                <span class="comment">//é˜ˆå€¼è¿˜æ˜¯å½“å‰å®¹é‡çš„0.75</span></span><br><span class="line">                sizeCtl = (n &lt;&lt; <span class="number">1</span>) - (n &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨CASæ›´æ–°æ‰©å®¹é˜ˆå€¼</span></span><br><span class="line">            <span class="comment">//sc-1è¡¨æ˜æœ‰æ–°çš„çº¿ç¨‹åŠ å…¥æ‰©å®¹</span></span><br><span class="line">            <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc = sizeCtl, sc - <span class="number">1</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((sc - <span class="number">2</span>) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT)</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                finishing = advance = <span class="keyword">true</span>;</span><br><span class="line">                i = n; <span class="comment">// recheck before commit</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœç»“ç‚¹ä¸ºnullï¼Œæ”¾å…¥ForwardingNode</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((f = tabAt(tab, i)) == <span class="keyword">null</span>)</span><br><span class="line">            advance = casTabAt(tab, i, <span class="keyword">null</span>, fwd);</span><br><span class="line">        <span class="comment">//å½“å‰ç»“ç‚¹å·²ç»è¢«å¤„ç†</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((fh = f.hash) == MOVED)</span><br><span class="line">            advance = <span class="keyword">true</span>; <span class="comment">// already processed</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ç»“ç‚¹åŠ é”</span></span><br><span class="line">            <span class="keyword">synchronized</span> (f) &#123;</span><br><span class="line">                <span class="comment">//è¯¥ç»“ç‚¹æœªè¢«å…¶ä»–çº¿ç¨‹è¦†ç›–</span></span><br><span class="line">                <span class="keyword">if</span> (tabAt(tab, i) == f) &#123;</span><br><span class="line">                    Node&lt;K,V&gt; ln, hn;</span><br><span class="line">                    <span class="comment">//é“¾è¡¨</span></span><br><span class="line">                    <span class="keyword">if</span> (fh &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">int</span> runBit = fh &amp; n;</span><br><span class="line">                        <span class="comment">//æ„é€ ä¸¤ä¸ªé“¾è¡¨ä¸€ä¸ªä¸ºåŸé“¾è¡¨ï¼Œä¸€ä¸ªä¸ºåå‘é“¾è¡¨</span></span><br><span class="line">                        Node&lt;K,V&gt; lastRun = f;</span><br><span class="line">                        <span class="keyword">for</span> (Node&lt;K,V&gt; p = f.next; p != <span class="keyword">null</span>; p = p.next) &#123;</span><br><span class="line">                            <span class="keyword">int</span> b = p.hash &amp; n;</span><br><span class="line">                            <span class="keyword">if</span> (b != runBit) &#123;</span><br><span class="line">                                runBit = b;</span><br><span class="line">                                lastRun = p;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (runBit == <span class="number">0</span>) &#123;</span><br><span class="line">                            ln = lastRun;</span><br><span class="line">                            hn = <span class="keyword">null</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            hn = lastRun;</span><br><span class="line">                            ln = <span class="keyword">null</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">for</span> (Node&lt;K,V&gt; p = f; p != lastRun; p = p.next) &#123;</span><br><span class="line">                            <span class="keyword">int</span> ph = p.hash; K pk = p.key; V pv = p.val;</span><br><span class="line">                            <span class="keyword">if</span> ((ph &amp; n) == <span class="number">0</span>)</span><br><span class="line">                                ln = <span class="keyword">new</span> Node&lt;K,V&gt;(ph, pk, pv, ln);</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hn = <span class="keyword">new</span> Node&lt;K,V&gt;(ph, pk, pv, hn);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//æ’å…¥é“¾è¡¨</span></span><br><span class="line">                        setTabAt(nextTab, i, ln);</span><br><span class="line">                        setTabAt(nextTab, i + n, hn);</span><br><span class="line">                        <span class="comment">//æ”¾å…¥ForwardingNodeï¼Œè¡¨æ˜è¯¥ç»“ç‚¹å·²è¢«å¤„ç†</span></span><br><span class="line">                        setTabAt(tab, i, fwd);</span><br><span class="line">                        advance = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//ä¸é“¾è¡¨æ“ä½œç›¸ä¼¼</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (f <span class="keyword">instanceof</span> TreeBin) &#123;</span><br><span class="line">                        TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f;</span><br><span class="line">                        TreeNode&lt;K,V&gt; lo = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                        TreeNode&lt;K,V&gt; hi = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                        <span class="keyword">int</span> lc = <span class="number">0</span>, hc = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">for</span> (Node&lt;K,V&gt; e = t.first; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">                            <span class="keyword">int</span> h = e.hash;</span><br><span class="line">                            TreeNode&lt;K,V&gt; p = <span class="keyword">new</span> TreeNode&lt;K,V&gt;</span><br><span class="line">                                (h, e.key, e.val, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">                            <span class="keyword">if</span> ((h &amp; n) == <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">if</span> ((p.prev = loTail) == <span class="keyword">null</span>)</span><br><span class="line">                                    lo = p;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    loTail.next = p;</span><br><span class="line">                                loTail = p;</span><br><span class="line">                                ++lc;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> ((p.prev = hiTail) == <span class="keyword">null</span>)</span><br><span class="line">                                    hi = p;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    hiTail.next = p;</span><br><span class="line">                                hiTail = p;</span><br><span class="line">                                ++hc;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) :</span><br><span class="line">                            (hc != <span class="number">0</span>) ? <span class="keyword">new</span> TreeBin&lt;K,V&gt;(lo) : t;</span><br><span class="line">                        hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) :</span><br><span class="line">                            (lc != <span class="number">0</span>) ? <span class="keyword">new</span> TreeBin&lt;K,V&gt;(hi) : t;</span><br><span class="line">                        setTabAt(nextTab, i, ln);</span><br><span class="line">                        setTabAt(nextTab, i + n, hn);</span><br><span class="line">                        setTabAt(tab, i, fwd);</span><br><span class="line">                        advance = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é›†åˆæ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArrayListéƒ¨åˆ†æºç ç®€æ</title>
      <link href="/2021/08/16/ArrayList%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E7%AE%80%E6%9E%90/"/>
      <url>/2021/08/16/ArrayList%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="ArrayListéƒ¨åˆ†æºç ç®€æ"><a href="#ArrayListéƒ¨åˆ†æºç ç®€æ" class="headerlink" title="ArrayListéƒ¨åˆ†æºç ç®€æ"></a>ArrayListéƒ¨åˆ†æºç ç®€æ</h1><h2 id="æœ‰å‚æ„é€ "><a href="#æœ‰å‚æ„é€ " class="headerlink" title="æœ‰å‚æ„é€ "></a>æœ‰å‚æ„é€ </h2><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Constructs an empty list with the specified initial capacity.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  initialCapacity  the initial capacity of the list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalArgumentException if the specified initial capacity</span></span><br><span class="line"><span class="comment"> *         is negative</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœåˆå§‹å®¹é‡å¤§äº0</span></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">    <span class="comment">//ç­‰äº0</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Illegal Capacity: &quot;</span>+</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="addæ–¹æ³•"><a href="#addæ–¹æ³•" class="headerlink" title="addæ–¹æ³•"></a>addæ–¹æ³•</h2><h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Appends the specified element to the end of this list.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e element to be appended to this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &lt;tt&gt;true&lt;/tt&gt; (as specified by &#123;<span class="doctag">@link</span> Collection#add&#125;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç¡®ä¿å†…éƒ¨å®¹é‡è¶³å¤Ÿ</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="comment">//æ·»åŠ å…ƒç´ </span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ensureCapacityInternal"><a href="#ensureCapacityInternal" class="headerlink" title="ensureCapacityInternal"></a>ensureCapacityInternal</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç¡®ä¿æ˜¾ç¤ºå®¹é‡è¶³å¤Ÿ</span></span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="calculateCapacity"><a href="#calculateCapacity" class="headerlink" title="calculateCapacity"></a>calculateCapacity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰æ•°ç»„è¿˜æœªåˆå§‹åŒ–ï¼Œå³ä¸ºç©ºæ•°ç»„</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="comment">//è¿”å›é»˜è®¤é•¿åº¦10ï¼Œå› ä¸ºæ­¤æ—¶minCapacityç­‰äº1</span></span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰æ•°ç»„å·²ç»å®Œæˆåˆå§‹åŒ–ï¼Œåˆ™ç›´æ¥è¿”å›å½“å‰size+1</span></span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ensureExplicitCapacity"><a href="#ensureExplicitCapacity" class="headerlink" title="ensureExplicitCapacity"></a>ensureExplicitCapacity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰size+1å¤§äºæ•°ç»„é•¿åº¦ï¼Œåˆ™è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="growæ–¹æ³•"><a href="#growæ–¹æ³•" class="headerlink" title="growæ–¹æ³•"></a>growæ–¹æ³•</h2><h3 id="grow"><a href="#grow" class="headerlink" title="grow"></a>grow</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="comment">//å½“å‰å®¹é‡</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">    <span class="comment">//æ–°å®¹é‡ç­‰äº1.5å€å½“å‰å®¹é‡</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//å¦‚æœæ–°å®¹é‡è¿˜ä¸è¶³å¤Ÿé•¿ï¼Œåˆ™æ–°å®¹é‡ç›´æ¥èµ‹å€¼ä¸ºminCapacity</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="comment">//å¦‚æœæ–°å®¹é‡å¤§äºMAX_ARRAY_SIZEï¼ˆprivate static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">//è°ƒç”¨hugeCapacityå‡½æ•°</span></span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    <span class="comment">//å®Œæˆæ–°æ•°ç»„çš„å¤åˆ¶</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="hugeCapacity"><a href="#hugeCapacity" class="headerlink" title="hugeCapacity"></a>hugeCapacity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›¸å½“äºå¯¹ArrayListæ•°ç»„è¿›è¡Œä¿æŠ¤ï¼Œé˜²æ­¢æ•°ç»„å®¹é‡æº¢å‡º</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hugeCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">        Integer.MAX_VALUE :</span><br><span class="line">        MAX_ARRAY_SIZE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é›†åˆæ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMapéƒ¨åˆ†æºç ç®€æ</title>
      <link href="/2021/08/16/HashMap%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E7%AE%80%E6%9E%90/"/>
      <url>/2021/08/16/HashMap%E9%83%A8%E5%88%86%E6%BA%90%E7%A0%81%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="HashMapéƒ¨åˆ†æºç ç®€æ"><a href="#HashMapéƒ¨åˆ†æºç ç®€æ" class="headerlink" title="HashMapéƒ¨åˆ†æºç ç®€æ"></a>HashMapéƒ¨åˆ†æºç ç®€æ</h1><h2 id="æœ‰å‚æ„é€ "><a href="#æœ‰å‚æ„é€ " class="headerlink" title="æœ‰å‚æ„é€ "></a>æœ‰å‚æ„é€ </h2><h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the specified initial</span></span><br><span class="line"><span class="comment">     * capacity and load factor.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  initialCapacity the initial capacity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  loadFactor      the load factor</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalArgumentException if the initial capacity is negative</span></span><br><span class="line"><span class="comment">     *         or the load factor is nonpositive</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//å®¹é‡ã€è´Ÿè½½å› å­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Illegal initial capacity: &quot;</span> +</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Illegal load factor: &quot;</span> +</span><br><span class="line">                                           loadFactor);</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="comment">//ç¡®ä¿å®¹é‡æ˜¯2çš„æ•´æ•°æ¬¡å¹‚</span></span><br><span class="line">    <span class="keyword">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="tableSizeFor"><a href="#tableSizeFor" class="headerlink" title="tableSizeFor"></a>tableSizeFor</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a power of two size for the given target capacity.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//è¿”å›å¤§äºè¾“å…¥å‚æ•°ä¸”æœ€è¿‘çš„2çš„æ•´æ•°æ¬¡å¹‚çš„æ•°ã€‚æ¯”å¦‚10ï¼Œåˆ™è¿”å›16</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">tableSizeFor</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = cap - <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="putæ–¹æ³•"><a href="#putæ–¹æ³•" class="headerlink" title="putæ–¹æ³•"></a>putæ–¹æ³•</h2><h3 id="put"><a href="#put" class="headerlink" title="put"></a>put</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Associates the specified value with the specified key in this map.</span></span><br><span class="line"><span class="comment">     * If the map previously contained a mapping for the key, the old</span></span><br><span class="line"><span class="comment">     * value is replaced.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key key with which the specified value is to be associated</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value value to be associated with the specified key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or</span></span><br><span class="line"><span class="comment">     *         &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;.</span></span><br><span class="line"><span class="comment">     *         (A &lt;tt&gt;null&lt;/tt&gt; return can also indicate that the map</span></span><br><span class="line"><span class="comment">     *         previously associated &lt;tt&gt;null&lt;/tt&gt; with &lt;tt&gt;key&lt;/tt&gt;.)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//è°ƒç”¨hash(Object key)å‡½æ•°è·å–å®ƒçš„hashcodeé«˜16ä½ä¸ä½16ä½å¼‚æˆ–åçš„å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›hashcodeé«˜16ä½ä¸ä½16ä½å¼‚æˆ–åçš„å€¼</span></span><br><span class="line"><span class="comment">//å¦‚æœkeyä¸ºnullï¼Œç›´æ¥è¿”å›0ï¼Œå³keyä¸ºnullæ”¾ç½®åœ¨æ•°ç»„&#x27;0&#x27;ä¸‹æ ‡å¤„</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="putVal"><a href="#putVal" class="headerlink" title="putVal"></a>putVal</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Implements Map.put and related methods.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hash hash for key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key the key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value the value to put</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> onlyIfAbsent if true, don&#x27;t change existing value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> evict if false, the table is in creation mode.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> previous value, or null if none</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="params"><span class="function">               <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">    <span class="comment">//å¦‚æœtableæ•°ç»„æœªåˆå§‹åŒ–æˆ–é•¿åº¦ä¸º0ï¼Œåˆ™è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        <span class="comment">//æ‰©å®¹</span></span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="comment">//å°†hashå€¼ä¸æ•°ç»„é•¿åº¦-1åšä¸è¿ç®—è·å¾—æ‰€åœ¨ä¸‹æ ‡</span></span><br><span class="line">    <span class="comment">//å³(hash &amp; (table.length-1)) ç­‰ä»·äº hash % table.length)</span></span><br><span class="line">    <span class="comment">//ä½è¿ç®—é€Ÿåº¦æ›´å¿«</span></span><br><span class="line">    <span class="comment">//å¦‚æœæ•°ç»„è¯¥ä¸‹æ ‡å¤„å…ƒç´ ä¸ºç©ºï¼Œç›´æ¥æ”¾å…¥</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">//æ•°ç»„è¯¥ä¸‹æ ‡å¤„å…ƒç´ ä¸ä¸ºç©º</span></span><br><span class="line">        <span class="comment">//æ£€æŸ¥ä¸ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰ç›´æ¥æ›¿æ¢</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="comment">//å¦åˆ™å¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™éå†æ ‘</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">        <span class="comment">//å¦åˆ™å¦‚æœæ˜¯é“¾è¡¨ï¼Œåˆ™éå†é“¾è¡¨</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//éå†é“¾è¡¨</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœéå†åˆ°é“¾è¡¨å°¾éƒ¨ä»æ²¡æ‰¾åˆ°keyç›¸ç­‰çš„ç»“ç‚¹ï¼Œåˆ™åœ¨å°¾éƒ¨æ’å…¥ï¼Œå¹¶ç»“æŸå¾ªç¯</span></span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                    <span class="comment">//å¦‚æœé•¿åº¦è¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™è½¬çº¢é»‘æ ‘</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//å¦‚æœåœ¨é“¾è¡¨ä¸­æ‰¾åˆ°keyç›¸ç­‰çš„ç»“ç‚¹ï¼Œåˆ™è·³å‡ºå¾ªç¯</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœåœ¨é“¾è¡¨ä¸­æ‰¾åˆ°keyç›¸ç­‰çš„ç»“ç‚¹ï¼Œåˆ™è¿”å›æ—§å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">//å¦‚æœå®¹é‡è¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™æ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="resizeæ–¹æ³•"><a href="#resizeæ–¹æ³•" class="headerlink" title="resizeæ–¹æ³•"></a>resizeæ–¹æ³•</h2><h3 id="resize"><a href="#resize" class="headerlink" title="resize"></a>resize</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Initializes or doubles table size.  If null, allocates in</span></span><br><span class="line"><span class="comment">     * accord with initial capacity target held in field threshold.</span></span><br><span class="line"><span class="comment">     * Otherwise, because we are using power-of-two expansion, the</span></span><br><span class="line"><span class="comment">     * elements from each bin must either stay at same index, or move</span></span><br><span class="line"><span class="comment">     * with a power of two offset in the new table.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the table</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    <span class="comment">//ä¿å­˜å½“å‰çš„table</span></span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    <span class="comment">//ä¿å­˜å½“å‰tableçš„å®¹é‡</span></span><br><span class="line">    <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">    <span class="comment">//ä¿å­˜å½“å‰çš„é˜ˆå€¼</span></span><br><span class="line">    <span class="keyword">int</span> oldThr = threshold;</span><br><span class="line">    <span class="comment">//æ–°å®¹é‡ï¼Œæ–°é˜ˆå€¼</span></span><br><span class="line">    <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰å®¹é‡å¤§äº0</span></span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœå½“å‰å®¹é‡å¤§äºæœ€å¤§å®¹é‡ï¼ˆstatic final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            <span class="comment">//å°±å°†é˜ˆå€¼è®¾ä¸ºæœ€å¤§æ•´å‹</span></span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°†å®¹é‡ç¿»å€åå°äºæœ€å¤§å®¹é‡ å¹¶ä¸” å½“å‰å®¹é‡å¤§äºç­‰äºé»˜è®¤å®¹é‡ï¼ˆstatic final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4 å°±æ˜¯16ï¼‰</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            <span class="comment">//æ–°é˜ˆå€¼ç¿»å€</span></span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å½“å‰å®¹é‡ç­‰äº0ï¼Œé˜ˆå€¼å¤§äº0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    <span class="comment">//å½“å‰å®¹é‡å’Œå½“å‰é˜ˆå€¼éƒ½ä¸º0</span></span><br><span class="line">    <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">        newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ–°é˜ˆå€¼ç­‰äº0</span></span><br><span class="line">    <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//é‡æ–°è®¾ç½®é˜ˆå€¼</span></span><br><span class="line">        <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                  (<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å½“å‰é˜ˆå€¼æ”¹ä¸ºæ–°é˜ˆå€¼</span></span><br><span class="line">    threshold = newThr;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°å®¹é‡é•¿åº¦çš„æ•°ç»„</span></span><br><span class="line">    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node[newCap];</span><br><span class="line">    <span class="comment">//å½“å‰æ•°ç»„æ”¹ä¸ºæ–°æ•°ç»„</span></span><br><span class="line">    table = newTab;</span><br><span class="line">    <span class="comment">//æ—§tableä¸ä¸ºnull</span></span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//éå†æ•´ä¸ªhashmapæ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="comment">//å¦‚æœæŸä¸€ä¸‹æ ‡å¤„å…ƒç´ ä¸ä¸ºnull</span></span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                oldTab[j] = <span class="keyword">null</span>;</span><br><span class="line">                <span class="comment">//åªæœ‰ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="keyword">null</span>)</span><br><span class="line">                    <span class="comment">//ç›´æ¥æ”¾å…¥æ–°tableä¸­</span></span><br><span class="line">                    newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                <span class="comment">//å¦‚æœä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="keyword">this</span>, newTab, j, oldCap);</span><br><span class="line">                <span class="comment">//å¦‚æœä¸ºé“¾è¡¨</span></span><br><span class="line">                <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="comment">//å°†æ—§é“¾è¡¨æ‹†åˆ†æˆä¸¤æ¡æ–°é“¾è¡¨</span></span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="comment">//æ‹†åˆ†é“¾è¡¨çš„æ¡ä»¶</span></span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</span><br><span class="line">                    <span class="comment">//ä¸¤æ¡æ–°é“¾è¡¨ç›¸éš”ä¸€ä¸ªoldCapè¿™ä¹ˆè¿œ</span></span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        loTail.next = <span class="keyword">null</span>;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›æ–°table</span></span><br><span class="line">    <span class="keyword">return</span> newTab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é›†åˆæ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ›æ‰£LRUç¼“å­˜é¢˜è§£</title>
      <link href="/2021/08/16/%E5%8A%9B%E6%89%A3LRU%E7%BC%93%E5%AD%98%E9%A2%98%E8%A7%A3/"/>
      <url>/2021/08/16/%E5%8A%9B%E6%89%A3LRU%E7%BC%93%E5%AD%98%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ›æ‰£LRUç¼“å­˜é¢˜è§£"><a href="#åŠ›æ‰£LRUç¼“å­˜é¢˜è§£" class="headerlink" title="åŠ›æ‰£LRUç¼“å­˜é¢˜è§£"></a>åŠ›æ‰£LRUç¼“å­˜é¢˜è§£</h1><p>é¢˜ç›®é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/lru-cache/">146. LRU ç¼“å­˜æœºåˆ¶ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)</a></p><p>æ€è·¯ï¼šé¢˜ç›®è¦æ±‚å°½é‡ç”¨O(1)çš„æ—¶é—´å¤æ‚åº¦ï¼ŒæŸ¥æ‰¾ç”¨hashè¡¨ï¼Œæ’å…¥åˆ é™¤ç”¨é“¾è¡¨</p><h2 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h2><p>åˆ©ç”¨LinkedHashMap</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">    LinkedHashMap&lt;Integer, Integer&gt; linkedHashMap=<span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//capacityï¼šå®¹é‡</span></span><br><span class="line">        <span class="comment">//0.75fï¼šè´Ÿè½½å› å­</span></span><br><span class="line">        <span class="comment">//trueï¼šå°†getåçš„æ•°æ®åˆ é™¤ï¼Œç„¶åé‡æ–°æ”¾åˆ°é“¾è¡¨å¤´éƒ¨</span></span><br><span class="line">        linkedHashMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(capacity,<span class="number">0.75f</span>,<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">//å½“é“¾è¡¨é•¿åº¦è¶…è¿‡å®¹é‡æ—¶ï¼Œåˆ é™¤å°¾éƒ¨çš„å…ƒç´ </span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">removeEldestEntry</span><span class="params">(Map.Entry eldest)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> size()&gt;capacity;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//getæ•°æ®ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›-1</span></span><br><span class="line">        <span class="keyword">return</span> linkedHashMap.getOrDefault(key,-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        linkedHashMap.put(key,value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your LRUCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * LRUCache obj = new LRUCache(capacity);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.get(key);</span></span><br><span class="line"><span class="comment"> * obj.put(key,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h2><p>è‡ªå·±æ„é€ åŒå‘é“¾è¡¨ï¼Œå¹¶ç»“åˆhashmap</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//hashmapå­˜å‚¨&lt;key,Node&lt;key,value&gt;&gt;</span></span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;Integer,Node&gt; map;</span><br><span class="line">    <span class="keyword">private</span> DoubleLinkedList list;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> cap;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        map=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        list=<span class="keyword">new</span> DoubleLinkedList();</span><br><span class="line">        cap=capacity;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é€šè¿‡keyè·å–Nodeç»“ç‚¹çš„valueï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›-1</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(key))</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> value = map.get(key).value;</span><br><span class="line">        <span class="comment">//æŠŠç»“ç‚¹é‡ç½®åˆ°é“¾è¡¨å¤´éƒ¨</span></span><br><span class="line">        put(key,value);</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¦‚æœç»“ç‚¹å­˜åœ¨ï¼Œåˆ é™¤ç»“ç‚¹å¹¶é‡æ–°æ·»åŠ åˆ°é“¾è¡¨å¤´éƒ¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        Node newNode = <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key))&#123;</span><br><span class="line">            list.delete(map.get(key));</span><br><span class="line">            list.addFirst(newNode);</span><br><span class="line">            map.put(key,newNode);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦è¶…è¿‡å®¹é‡ï¼Œè¶…è¿‡å°±åˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (map.size()&gt;=cap)&#123;</span><br><span class="line">                <span class="keyword">int</span> last = list.delLast();</span><br><span class="line">                map.remove(last);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å°†ç»“ç‚¹æ”¾å…¥é“¾è¡¨å¤´éƒ¨</span></span><br><span class="line">            list.addFirst(newNode);</span><br><span class="line">            map.put(key,newNode);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒå‘é“¾è¡¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleLinkedList</span></span>&#123;</span><br><span class="line">    Node head;</span><br><span class="line">    Node tail;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–é“¾è¡¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DoubleLinkedList</span><span class="params">()</span></span>&#123;</span><br><span class="line">        head=<span class="keyword">new</span> Node(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        tail=<span class="keyword">new</span> Node(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        head.next=tail;</span><br><span class="line">        tail.prev=head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†ç»“ç‚¹æ·»åŠ åˆ°é“¾è¡¨é¦–éƒ¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(Node newNode)</span></span>&#123;</span><br><span class="line">        newNode.next=head.next;</span><br><span class="line">        newNode.prev=head;</span><br><span class="line">        head.next.prev=newNode;</span><br><span class="line">        head.next=newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤æŸä¸€ç»“ç‚¹</span></span><br><span class="line">    <span class="comment">//è¿”å›keyä¾¿äºåœ¨hashmapä¸­æŸ¥æ‰¾</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delete</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> key=node.key;</span><br><span class="line">        node.next.prev=node.prev;</span><br><span class="line">        node.prev.next=node.next;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤å°¾ç»“ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delLast</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head.next==tail)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> delete(tail.prev);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰Nodeç»“ç‚¹ï¼Œå­˜å‚¨keyï¼Œvalue</span></span><br><span class="line"><span class="comment">//æŒ‡å‘å‰åç»“ç‚¹çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    Node prev;</span><br><span class="line">    Node next;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> key,<span class="keyword">int</span> value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key=key;</span><br><span class="line">        <span class="keyword">this</span>.value=value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ·é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¥å‚æ¨¡å¼</title>
      <link href="/2021/08/16/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>/2021/08/16/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h1><p>æœ¬æ–‡å‚è€ƒäºï¼š<a href="https://www.runoob.com/design-pattern/factory-pattern.html">å·¥å‚æ¨¡å¼ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a>ï¼Œ<a href="https://zhuanlan.zhihu.com/p/110419316">è®¾è®¡æ¨¡å¼ç¯‡â€”â€”å·¥å‚æ¨¡å¼è¯¦è§£ - çŸ¥ä¹ (zhihu.com)</a></p><h2 id="å·¥å‚æ–¹æ³•"><a href="#å·¥å‚æ–¹æ³•" class="headerlink" title="å·¥å‚æ–¹æ³•"></a>å·¥å‚æ–¹æ³•</h2><h3 id="åˆ›å»ºæ¥å£"><a href="#åˆ›å»ºæ¥å£" class="headerlink" title="åˆ›å»ºæ¥å£"></a>åˆ›å»ºæ¥å£</h3><h4 id="Human"><a href="#Human" class="headerlink" title="Human"></a>Human</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“å°è‚¤è‰²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®ä½“ç±»"><a href="#ç¼–å†™å®ä½“ç±»" class="headerlink" title="ç¼–å†™å®ä½“ç±»"></a>ç¼–å†™å®ä½“ç±»</h3><h4 id="BlackHuman"><a href="#BlackHuman" class="headerlink" title="BlackHuman"></a>BlackHuman</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlackHuman</span> <span class="keyword">implements</span> <span class="title">Human</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»‘ç§äºº&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="WhiteHuman"><a href="#WhiteHuman" class="headerlink" title="WhiteHuman"></a>WhiteHuman</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WhiteHuman</span> <span class="keyword">implements</span> <span class="title">Human</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™½ç§äºº&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="YellowHuman"><a href="#YellowHuman" class="headerlink" title="YellowHuman"></a>YellowHuman</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YellowHuman</span> <span class="keyword">implements</span> <span class="title">Human</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»„ç§äºº&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå·¥å‚"><a href="#åˆ›å»ºå·¥å‚" class="headerlink" title="åˆ›å»ºå·¥å‚"></a>åˆ›å»ºå·¥å‚</h3><h4 id="HumanFactory"><a href="#HumanFactory" class="headerlink" title="HumanFactory"></a>HumanFactory</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HumanFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Human <span class="title">createHuman</span><span class="params">(String color)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (color==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;BlackHuman&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> BlackHuman();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;WhiteHuman&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> WhiteHuman();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;YellowHuman&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> YellowHuman();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><h4 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        HumanFactory factory = <span class="keyword">new</span> HumanFactory();</span><br><span class="line">        Human blackHuman = factory.createHuman(<span class="string">&quot;BlackHuman&quot;</span>);</span><br><span class="line">        blackHuman.printColor();</span><br><span class="line">        Human whiteHuman = factory.createHuman(<span class="string">&quot;WhiteHuman&quot;</span>);</span><br><span class="line">        whiteHuman.printColor();</span><br><span class="line">        Human yellowHuman = factory.createHuman(<span class="string">&quot;YellowHuman&quot;</span>);</span><br><span class="line">        yellowHuman.printColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">//é»‘ç§äºº</span></span><br><span class="line"><span class="comment">//ç™½ç§äºº</span></span><br><span class="line"><span class="comment">//é»„ç§äºº</span></span><br></pre></td></tr></table></figure><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€ä¸€ä¸ªè°ƒç”¨è€…æƒ³åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦çŸ¥é“å…¶åç§°å°±å¯ä»¥äº†ã€‚ 2ã€æ‰©å±•æ€§é«˜ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªäº§å“ï¼Œåªè¦æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»å°±å¯ä»¥ã€‚ 3ã€å±è”½äº§å“çš„å…·ä½“å®ç°ï¼Œè°ƒç”¨è€…åªå…³å¿ƒäº§å“çš„æ¥å£ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong>æ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“æ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹è±¡å®ç°å·¥å‚ï¼Œä½¿å¾—ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå…·ä½“ç±»çš„ä¾èµ–ã€‚è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¥½äº‹ã€‚</p><h2 id="æŠ½è±¡å·¥å‚"><a href="#æŠ½è±¡å·¥å‚" class="headerlink" title="æŠ½è±¡å·¥å‚"></a>æŠ½è±¡å·¥å‚</h2><h3 id="åˆ›å»ºæ¥å£-1"><a href="#åˆ›å»ºæ¥å£-1" class="headerlink" title="åˆ›å»ºæ¥å£"></a>åˆ›å»ºæ¥å£</h3><h4 id="Shape"><a href="#Shape" class="headerlink" title="Shape"></a>Shape</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“å°å½¢çŠ¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printShape</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Color"><a href="#Color" class="headerlink" title="Color"></a>Color</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“å°é¢œè‰²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å®ä½“ç±»-1"><a href="#ç¼–å†™å®ä½“ç±»-1" class="headerlink" title="ç¼–å†™å®ä½“ç±»"></a>ç¼–å†™å®ä½“ç±»</h3><h4 id="Shapeçš„å®ä½“ç±»"><a href="#Shapeçš„å®ä½“ç±»" class="headerlink" title="Shapeçš„å®ä½“ç±»"></a>Shapeçš„å®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printShape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çŸ©å½¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> <span class="keyword">implements</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printShape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸‰è§’å½¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">implements</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printShape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åœ†å½¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Colorçš„å®ä½“ç±»"><a href="#Colorçš„å®ä½“ç±»" class="headerlink" title="Colorçš„å®ä½“ç±»"></a>Colorçš„å®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Red</span> <span class="keyword">implements</span> <span class="title">Color</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çº¢è‰²&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Yellow</span> <span class="keyword">implements</span> <span class="title">Color</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»„è‰²&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blue</span> <span class="keyword">implements</span> <span class="title">Color</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è“è‰²&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæŠ½è±¡å·¥å‚"><a href="#åˆ›å»ºæŠ½è±¡å·¥å‚" class="headerlink" title="åˆ›å»ºæŠ½è±¡å·¥å‚"></a>åˆ›å»ºæŠ½è±¡å·¥å‚</h3><h4 id="AbstractFactory"><a href="#AbstractFactory" class="headerlink" title="AbstractFactory"></a>AbstractFactory</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å½¢çŠ¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> shape å½¢çŠ¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å½¢çŠ¶çš„å®ç°ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Shape <span class="title">getShape</span><span class="params">(String shape)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–é¢œè‰²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> color é¢œè‰²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é¢œè‰²çš„å®ç°ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Color <span class="title">getColor</span><span class="params">(String color)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå…·ä½“å·¥å‚"><a href="#åˆ›å»ºå…·ä½“å·¥å‚" class="headerlink" title="åˆ›å»ºå…·ä½“å·¥å‚"></a>åˆ›å»ºå…·ä½“å·¥å‚</h3><h4 id="ShapeFactory"><a href="#ShapeFactory" class="headerlink" title="ShapeFactory"></a>ShapeFactory</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShapeFactory</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shape <span class="title">getShape</span><span class="params">(String shape)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (shape==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Rectangle&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Rectangle();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Triangle&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Triangle();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Circle&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Circle();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Color <span class="title">getColor</span><span class="params">(String color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ColorFactory"><a href="#ColorFactory" class="headerlink" title="ColorFactory"></a>ColorFactory</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorFactory</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shape <span class="title">getShape</span><span class="params">(String shape)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Color <span class="title">getColor</span><span class="params">(String color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (color==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Red&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Red();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Yellow&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Yellow();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Blue&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Blue();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è·å–å·¥å‚"><a href="#è·å–å·¥å‚" class="headerlink" title="è·å–å·¥å‚"></a>è·å–å·¥å‚</h3><h4 id="FactoryProducer"><a href="#FactoryProducer" class="headerlink" title="FactoryProducer"></a>FactoryProducer</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryProducer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> AbstractFactory <span class="title">getFactory</span><span class="params">(String choice)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (choice==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (choice) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Shape&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ShapeFactory();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;Color&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ColorFactory();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><h4 id="Test-1"><a href="#Test-1" class="headerlink" title="Test"></a>Test</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FactoryProducer factoryProducer = <span class="keyword">new</span> FactoryProducer();</span><br><span class="line">        AbstractFactory shapeFactory = factoryProducer.getFactory(<span class="string">&quot;Shape&quot;</span>);</span><br><span class="line">        Shape triangle = shapeFactory.getShape(<span class="string">&quot;Triangle&quot;</span>);</span><br><span class="line">        triangle.printShape();</span><br><span class="line"></span><br><span class="line">        AbstractFactory colorFactory = factoryProducer.getFactory(<span class="string">&quot;Color&quot;</span>);</span><br><span class="line">        Color blue = colorFactory.getColor(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line">        blue.printColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹ï¼š</strong>å½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½ä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong>äº§å“æ—æ‰©å±•éå¸¸å›°éš¾ï¼Œè¦å¢åŠ ä¸€ä¸ªç³»åˆ—çš„æŸä¸€äº§å“ï¼Œæ—¢è¦åœ¨æŠ½è±¡çš„ Creator é‡ŒåŠ ä»£ç ï¼Œåˆè¦åœ¨å…·ä½“çš„é‡Œé¢åŠ ä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµå¼è®¡ç®—</title>
      <link href="/2021/07/25/%E6%B5%81%E5%BC%8F%E8%AE%A1%E7%AE%97/"/>
      <url>/2021/07/25/%E6%B5%81%E5%BC%8F%E8%AE%A1%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<h1 id="æµå¼è®¡ç®—"><a href="#æµå¼è®¡ç®—" class="headerlink" title="æµå¼è®¡ç®—"></a>æµå¼è®¡ç®—</h1><p>æµçš„åŸºæœ¬æ–¹æ³•ï¼š<a href="https://www.cnblogs.com/gaopengfirst/p/10813803.html">java1.8æ–°ç‰¹æ€§ä¹‹streamæµå¼ç®—æ³• - ç‹è€…ä¹‹å·… - åšå®¢å›­ (cnblogs.com)</a></p><h2 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><h3 id="é¢˜ç›®è¦æ±‚"><a href="#é¢˜ç›®è¦æ±‚" class="headerlink" title="é¢˜ç›®è¦æ±‚"></a>é¢˜ç›®è¦æ±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é¢˜ç›®ï¼šè¯·æŒ‰ç…§ç»™å‡ºæ•°æ®ï¼Œæ‰¾å‡ºåŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> * ä¹Ÿå³ä»¥ä¸‹æ¡ä»¶ï¼š</span></span><br><span class="line"><span class="comment"> * 1ã€å…¨éƒ¨æ»¡è¶³å¶æ•°ID</span></span><br><span class="line"><span class="comment"> * 2ã€å¹´é¾„å¤§äº24</span></span><br><span class="line"><span class="comment"> * 3ã€ç”¨æˆ·åè½¬ä¸ºå¤§å†™</span></span><br><span class="line"><span class="comment"> * 4ã€ç”¨æˆ·åå­—æ¯å€’æ’åº</span></span><br><span class="line"><span class="comment"> * 5ã€åªè¾“å‡ºä¸€ä¸ªç”¨æˆ·åå­—</span></span><br><span class="line"><span class="comment"> **/</span></span><br></pre></td></tr></table></figure><h3 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ„é€ æµ‹è¯•æ•°æ®"><a href="#æ„é€ æµ‹è¯•æ•°æ®" class="headerlink" title="æ„é€ æµ‹è¯•æ•°æ®"></a>æ„é€ æµ‹è¯•æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">User u1 = <span class="keyword">new</span> User(<span class="number">11</span>, <span class="string">&quot;a&quot;</span>, <span class="number">23</span>);</span><br><span class="line">User u2 = <span class="keyword">new</span> User(<span class="number">12</span>, <span class="string">&quot;b&quot;</span>, <span class="number">24</span>);</span><br><span class="line">User u3 = <span class="keyword">new</span> User(<span class="number">13</span>, <span class="string">&quot;c&quot;</span>, <span class="number">22</span>);</span><br><span class="line">User u4 = <span class="keyword">new</span> User(<span class="number">14</span>, <span class="string">&quot;d&quot;</span>, <span class="number">28</span>);</span><br><span class="line">User u5 = <span class="keyword">new</span> User(<span class="number">16</span>, <span class="string">&quot;e&quot;</span>, <span class="number">26</span>);</span><br><span class="line">List&lt;User&gt; list = Arrays.asList(u1, u2, u3, u4, u5);</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list.stream()</span><br><span class="line">    .filter(u-&gt;&#123;<span class="keyword">return</span> u.getId()%<span class="number">2</span>==<span class="number">0</span>;&#125;)</span><br><span class="line">    .filter(u-&gt;&#123;<span class="keyword">return</span> u.getAge()&gt;<span class="number">24</span>;&#125;)</span><br><span class="line">    .map(u-&gt;&#123;<span class="keyword">return</span> u.getUserName().toUpperCase();&#125;)</span><br><span class="line">    .sorted((o1,o2)-&gt;&#123;<span class="keyword">return</span> o2.compareTo(o1);&#125;)</span><br><span class="line">    .limit(<span class="number">1</span>)</span><br><span class="line">    .forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment">//E</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stream </tag>
            
            <tag> å‡½æ•°å¼æ¥å£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–¹æ³•é‡å†™</title>
      <link href="/2021/07/25/%E6%96%B9%E6%B3%95%E9%87%8D%E5%86%99/"/>
      <url>/2021/07/25/%E6%96%B9%E6%B3%95%E9%87%8D%E5%86%99/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–¹æ³•é‡å†™"><a href="#æ–¹æ³•é‡å†™" class="headerlink" title="æ–¹æ³•é‡å†™"></a>æ–¹æ³•é‡å†™</h1><h2 id="æ™®é€šæ–¹æ³•å¯ä»¥é‡å†™"><a href="#æ™®é€šæ–¹æ³•å¯ä»¥é‡å†™" class="headerlink" title="æ™®é€šæ–¹æ³•å¯ä»¥é‡å†™"></a>æ™®é€šæ–¹æ³•å¯ä»¥é‡å†™</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;animal eat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;cat eat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Animal animal = <span class="keyword">new</span> Cat();</span><br><span class="line">    animal.eat();</span><br><span class="line">    animal=<span class="keyword">new</span> Animal();</span><br><span class="line">    animal.eat();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment">//cat eat</span></span><br><span class="line"><span class="comment">//animal eat</span></span><br></pre></td></tr></table></figure><h2 id="é™æ€æ–¹æ³•ä¸èƒ½é‡å†™"><a href="#é™æ€æ–¹æ³•ä¸èƒ½é‡å†™" class="headerlink" title="é™æ€æ–¹æ³•ä¸èƒ½é‡å†™"></a>é™æ€æ–¹æ³•ä¸èƒ½é‡å†™</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Person&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Student&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Person p = <span class="keyword">new</span> Student();</span><br><span class="line">    p.test();</span><br><span class="line">    p=<span class="keyword">new</span> Person();</span><br><span class="line">    p.test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment">//Person</span></span><br><span class="line"><span class="comment">//Person</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡½æ•°å¼æ¥å£</title>
      <link href="/2021/07/25/%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/"/>
      <url>/2021/07/25/%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="å‡½æ•°å¼æ¥å£"><a href="#å‡½æ•°å¼æ¥å£" class="headerlink" title="å‡½æ•°å¼æ¥å£"></a>å‡½æ•°å¼æ¥å£</h1><h2 id="å››å¤§å‡½æ•°å¼æ¥å£"><a href="#å››å¤§å‡½æ•°å¼æ¥å£" class="headerlink" title="å››å¤§å‡½æ•°å¼æ¥å£"></a>å››å¤§å‡½æ•°å¼æ¥å£</h2><ol><li>Function  å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹</li><li>Predicate  å‚æ•°ç±»å‹</li><li>Consumer  å‚æ•°ç±»å‹</li><li>Supplier  è¿”å›å€¼ç±»å‹</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Function&lt;String,Integer&gt; function = s-&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> s.length();</span><br><span class="line">&#125;;</span><br><span class="line">Predicate&lt;String&gt; predicate = s-&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> s.isEmpty();</span><br><span class="line">&#125;;</span><br><span class="line">Consumer&lt;String&gt; consumer = s -&gt; &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;;</span><br><span class="line">Supplier&lt;String&gt; supplier = ()-&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">System.out.println(function.apply(<span class="string">&quot;zhb&quot;</span>));</span><br><span class="line">System.out.println(predicate.test(<span class="string">&quot;321&quot;</span>));</span><br><span class="line">consumer.accept(<span class="string">&quot;123abc&quot;</span>);</span><br><span class="line">System.out.println(supplier.get());</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//false</span></span><br><span class="line"><span class="comment">//123abc</span></span><br><span class="line"><span class="comment">//hello</span></span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£"><a href="#è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£"></a>è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™ä¸ªæ³¨è§£çš„ä½œç”¨ï¼šè¡¨æ˜è¿™æ˜¯ä¸ªå‡½æ•°å¼æ¥å£ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™ç¼–è¯‘ä¸èƒ½é€šè¿‡</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MyFunctionInterface</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯ä»¥æœ‰å¸¸é‡ï¼Œé»˜è®¤å°±æ˜¯ã€pubic static finalã€‘</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String NAME=<span class="string">&quot;æµ‹è¯•&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•å‡½æ•°å¼æ¥å£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•é»˜è®¤æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">myDefaultTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯ä»¥æœ‰é»˜è®¤æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•é™æ€æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">myStaticTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯ä»¥æœ‰é™æ€æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–nameçš„å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> java.lang.String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> NAME;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        MyFunctionInterface myFunctionInterface = new MyFunctionInterface() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void test() &#123;</span></span><br><span class="line"><span class="comment">//                System.out.println(&quot;æµ‹è¯•ï¼šå‡½æ•°å¼æ¥å£  é‡å†™&quot;);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸ä¸Šé¢æ–¹å¼ç­‰ä»·ï¼Œä½¿ç”¨äº†lambdaç®€åŒ–</span></span><br><span class="line">MyFunctionInterface myFunctionInterface = ()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æµ‹è¯•ï¼šå‡½æ•°å¼æ¥å£  lambdaç®€åŒ–&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æ–¹æ³•åªèƒ½ç”±ç±»è®¿é—®ï¼Œéé™æ€æ–¹æ³•åªèƒ½ç”±å¯¹è±¡è®¿é—®ï¼ï¼ï¼</span></span><br><span class="line">myFunctionInterface.test();</span><br><span class="line">myFunctionInterface.myDefaultTest();</span><br><span class="line">MyFunctionInterface.myStaticTest();</span><br><span class="line">System.out.println(MyFunctionInterface.NAME);</span><br><span class="line">System.out.println(MyFunctionInterface.getName());</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line"><span class="comment">//æµ‹è¯•ï¼šå‡½æ•°å¼æ¥å£  lambdaç®€åŒ–</span></span><br><span class="line"><span class="comment">//å¯ä»¥æœ‰é»˜è®¤æ–¹æ³•</span></span><br><span class="line"><span class="comment">//å¯ä»¥æœ‰é™æ€æ–¹æ³•</span></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‡½æ•°å¼æ¥å£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾åŠåŸåˆ™</title>
      <link href="/2021/07/11/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81%E5%8F%8A%E5%8E%9F%E5%88%99/"/>
      <url>/2021/07/11/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81%E5%8F%8A%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾åŠåŸåˆ™"><a href="#é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾åŠåŸåˆ™" class="headerlink" title="é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾åŠåŸåˆ™"></a>é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾åŠåŸåˆ™</h1><h2 id="é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾"><a href="#é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾" class="headerlink" title="é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾"></a>é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾</h2><ol><li>æŠ½è±¡</li><li>å°è£…</li><li>ç»§æ‰¿</li><li>å¤šæ€</li></ol><h3 id="æŠ½è±¡"><a href="#æŠ½è±¡" class="headerlink" title="æŠ½è±¡"></a>æŠ½è±¡</h3><p>æŠ½è±¡å°±æ˜¯æŒ‡å¿½ç•¥ä¸€äº›æˆ‘ä»¬ç›®æ ‡æ‰€éœ€ä¹‹å¤–çš„ä¸œè¥¿</p><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p>æ˜¯å¯¹è±¡å’Œç±»æ¦‚å¿µçš„ä¸»è¦ç‰¹æ€§ã€‚å°è£…æ˜¯æŠŠè¿‡ç¨‹å’Œæ•°æ®åŒ…å›´èµ·æ¥ï¼Œåªæä¾›ä¸€ä¸ªæ¥å£ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œè¿™æ ·æé«˜äº†ä»£ç çš„å®‰å…¨æ€§ï¼Œä»¥åŠä½¿ç”¨çš„ç®€ä¾¿æ€§</p><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>å­ç±»å¯ä»¥ä½¿ç”¨çˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶åœ¨æ— éœ€é‡æ–°ç¼–å†™çˆ¶ç±»çš„æƒ…å†µä¸‹å¯¹è¿™äº›åŠŸèƒ½è¿›è¡Œæ‰©å±•ã€‚</p><h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><p>å¤šæ€æ˜¯æŒ‡å…è®¸ä¸åŒç±»å¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯åšå‡ºååº”ï¼ŒåŒä¸€æ¶ˆæ¯è¢«ä¸åŒçš„å¯¹è±¡å“åº”å¯ä»¥é€ æˆä¸åŒçš„ç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤šæ€çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶</span></span><br><span class="line"><span class="comment">//ç»§æ‰¿</span></span><br><span class="line"><span class="comment">//é‡å†™</span></span><br><span class="line"><span class="comment">//çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼šParent p = new Child();</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span></span><br><span class="line"><span class="class">//ç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å³è¾¹</span></span><br><span class="line"><span class="class"><span class="title">Animal</span> <span class="title">animal</span> </span>= <span class="keyword">new</span> Cat();  <span class="comment">// å‘ä¸Šè½¬å‹  </span></span><br><span class="line">animal.eat();               <span class="comment">// è°ƒç”¨çš„æ˜¯ Cat çš„ eat</span></span><br><span class="line">Cat c = (Cat)animal;        <span class="comment">// å‘ä¸‹è½¬å‹  </span></span><br><span class="line">c.work();            <span class="comment">// è°ƒç”¨çš„æ˜¯ Cat çš„ work</span></span><br></pre></td></tr></table></figure><p>é‡è½½ï¼šåœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œæ–¹æ³•åå­—ç›¸åŒï¼Œå‚æ•°çš„ä¸ªæ•°ã€ç±»å‹ã€é¡ºåºæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒã€‚è¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒã€‚</p><p>é‡å†™ï¼šåœ¨å­ç±»ä¸­ï¼Œæ–¹æ³•åå­—ç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ç›¸åŒï¼Œè®¿é—®æƒé™å¤§äºç­‰äºçˆ¶ç±»ï¼Œè¿”å›å€¼ç±»å‹å’Œå¼‚å¸¸å°äºç­‰äºçˆ¶ç±»</p><h2 id="é¢å‘å¯¹è±¡çš„åŸºæœ¬åŸåˆ™"><a href="#é¢å‘å¯¹è±¡çš„åŸºæœ¬åŸåˆ™" class="headerlink" title="é¢å‘å¯¹è±¡çš„åŸºæœ¬åŸåˆ™"></a>é¢å‘å¯¹è±¡çš„åŸºæœ¬åŸåˆ™</h2><p><a href="https://blog.csdn.net/guanmao4322/article/details/85947083">(1æ¡æ¶ˆæ¯) é¢å‘å¯¹è±¡çš„äº”å¤§åŸºæœ¬åŸåˆ™_å¤æ²çš„åšå®¢-CSDNåšå®¢_é¢å‘å¯¹è±¡åŸºæœ¬åŸåˆ™</a></p><ol><li>å•ä¸€èŒè´£</li><li>å¼€æ”¾é—­åˆ</li><li>é‡Œæ°æ›¿æ¢</li><li>ä¾èµ–å€’ç½®</li><li>åˆæˆèšåˆå¤ç”¨</li><li>æ¥å£éš”ç¦»</li><li>è¿ªç±³ç‰¹æ³•åˆ™</li></ol><h3 id="å•ä¸€èŒè´£"><a href="#å•ä¸€èŒè´£" class="headerlink" title="å•ä¸€èŒè´£"></a>å•ä¸€èŒè´£</h3><p>æ¯ä¸€ä¸ªç±»åº”è¯¥ä¸“æ³¨äºåšä¸€ä»¶äº‹æƒ…</p><h3 id="å¼€æ”¾é—­åˆ"><a href="#å¼€æ”¾é—­åˆ" class="headerlink" title="å¼€æ”¾é—­åˆ"></a>å¼€æ”¾é—­åˆ</h3><p>é¢å‘æ‰©å±•å¼€æ”¾ï¼Œé¢å‘ä¿®æ”¹å…³é—­</p><h3 id="é‡Œæ°æ›¿æ¢"><a href="#é‡Œæ°æ›¿æ¢" class="headerlink" title="é‡Œæ°æ›¿æ¢"></a>é‡Œæ°æ›¿æ¢</h3><p>è¶…ç±»å­˜åœ¨çš„åœ°æ–¹ï¼Œå­ç±»æ˜¯å¯ä»¥æ›¿æ¢çš„</p><h3 id="ä¾èµ–å€’ç½®"><a href="#ä¾èµ–å€’ç½®" class="headerlink" title="ä¾èµ–å€’ç½®"></a>ä¾èµ–å€’ç½®</h3><p>å®ç°å°½é‡ä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“å®ç°</p><h3 id="åˆæˆèšåˆå¤ç”¨"><a href="#åˆæˆèšåˆå¤ç”¨" class="headerlink" title="åˆæˆèšåˆå¤ç”¨"></a>åˆæˆèšåˆå¤ç”¨</h3><p>å°½é‡ä½¿ç”¨åˆæˆ/èšåˆè¾¾åˆ°å¤ç”¨ï¼Œå°½é‡å°‘ç”¨ç»§æ‰¿</p><h3 id="æ¥å£éš”ç¦»"><a href="#æ¥å£éš”ç¦»" class="headerlink" title="æ¥å£éš”ç¦»"></a>æ¥å£éš”ç¦»</h3><p>åº”å½“ä¸ºå®¢æˆ·ç«¯æä¾›å°½å¯èƒ½å°çš„å•ç‹¬çš„æ¥å£ï¼Œè€Œä¸æ˜¯æä¾›å¤§çš„æ€»çš„æ¥å£</p><h3 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h3><p>åˆå«æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼Œä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“å°½å¯èƒ½å°‘çš„ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨</p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­»é”</title>
      <link href="/2021/07/11/%E6%AD%BB%E9%94%81/"/>
      <url>/2021/07/11/%E6%AD%BB%E9%94%81/</url>
      
        <content type="html"><![CDATA[<h1 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h1><h2 id="æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶"><a href="#æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶" class="headerlink" title="æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶"></a>æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶</h2><ol><li>äº’æ–¥ï¼šåœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºä»…ä¸ºä¸€è¿›ç¨‹æ‰€å ç”¨</li><li>è¯·æ±‚ä¸ä¿æŒï¼šå½“è¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾</li><li>ä¸å¯å‰¥å¤ºï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾</li><li>å¾ªç¯ç­‰å¾…ï¼šåœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹â€“èµ„æºçš„ç¯å½¢é“¾</li></ol><h2 id="é¢„é˜²å’Œç ´åæ­»é”"><a href="#é¢„é˜²å’Œç ´åæ­»é”" class="headerlink" title="é¢„é˜²å’Œç ´åæ­»é”"></a>é¢„é˜²å’Œç ´åæ­»é”</h2><ol><li>èµ„æºä¸€æ¬¡æ€§åˆ†é…ï¼šå¦‚æœæŸè¿›ç¨‹æ‰€éœ€çš„èµ„æºèƒ½å¤Ÿä¸€æ¬¡åˆ†é…å®Œåˆ™åˆ†é…ï¼Œå¦åˆ™ä¸åˆ†é…</li><li>ç”³è¯·æ–°èµ„æºï¼Œå¿…é¡»å…ˆé‡Šæ”¾æ‰€æ‹¥æœ‰çš„çš„å…¶ä»–èµ„æºï¼Œè‹¥è¿˜éœ€è¦æ­¤èµ„æºï¼Œéœ€å‘ç³»ç»Ÿé‡æ–°ç”³è¯·</li><li>ç”³è¯·æ–°èµ„æºå¤±è´¥ï¼Œé‡Šæ”¾æ‰€æ‹¥æœ‰çš„çš„æ‰€æœ‰èµ„æº</li><li>å¯¹èµ„æºè¿›è¡Œç¼–å·ï¼Œç”³è¯·ç¼–å·å°çš„èµ„æºå¿…é¡»å…ˆé‡Šæ”¾æ‰€æ‹¥æœ‰çš„ç¼–å·å¤§çš„èµ„æº</li><li>å½“äº§ç”Ÿæ­»é”æ—¶ï¼Œå¼ºåˆ¶ç»“æŸä¸€äº›è¿›ç¨‹</li></ol><h2 id="é¿å…æ­»é”"><a href="#é¿å…æ­»é”" class="headerlink" title="é¿å…æ­»é”"></a>é¿å…æ­»é”</h2><p>é“¶è¡Œå®¶ç®—æ³•</p><h2 id="æ‰‹å†™ä¸€ä¸ªæ­»é”"><a href="#æ‰‹å†™ä¸€ä¸ªæ­»é”" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªæ­»é”"></a>æ‰‹å†™ä¸€ä¸ªæ­»é”</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String s1 = <span class="string">&quot;s1&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String s2 = <span class="string">&quot;s2&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread aA = <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (s1)&#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;aAå·²è·å¾—s1&quot;</span>);</span><br><span class="line">                        <span class="keyword">synchronized</span> (s2)&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;aAå·²è·å¾—s2&quot;</span>);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread bB = <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (s2)&#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                        System.out.println(<span class="string">&quot;bBå·²è·å¾—s2&quot;</span>);</span><br><span class="line">                        <span class="keyword">synchronized</span> (s1)&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;bBå·²è·å¾—s1&quot;</span>);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        aA.start();</span><br><span class="line">        bB.start();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•ä¾‹æ¨¡å¼</title>
      <link href="/2021/07/10/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2021/07/10/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h1><p><font color=red><strong>æšä¸¾èƒ½å¤Ÿé˜²æ­¢å•ä¾‹è¢«åå°„ç ´å,å…¶ä»–çš„ä¸èƒ½</strong></font></p><h2 id="é¥¿æ±‰æ¨¡å¼"><a href="#é¥¿æ±‰æ¨¡å¼" class="headerlink" title="é¥¿æ±‰æ¨¡å¼"></a>é¥¿æ±‰æ¨¡å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Hungry</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Hungry</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Hungry hungry = <span class="keyword">new</span> Hungry();</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Hungry <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> hungry;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æ™®é€šçš„æ‡’æ±‰æ¨¡å¼"><a href="#æ™®é€šçš„æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ™®é€šçš„æ‡’æ±‰æ¨¡å¼"></a>æ™®é€šçš„æ‡’æ±‰æ¨¡å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Lazy</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Lazy</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Lazy lazy;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Lazy <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (lazy==<span class="keyword">null</span>)&#123;</span><br><span class="line">                lazy=<span class="keyword">new</span> Lazy();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> lazy;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="DCLæ‡’æ±‰æ¨¡å¼"><a href="#DCLæ‡’æ±‰æ¨¡å¼" class="headerlink" title="DCLæ‡’æ±‰æ¨¡å¼"></a>DCLæ‡’æ±‰æ¨¡å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LazyMan</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">LazyMan</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> LazyMan lazyMan;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazyMan <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (lazyMan==<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (LazyMan.class)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (lazyMan==<span class="keyword">null</span>)&#123;</span><br><span class="line">                        lazyMan=<span class="keyword">new</span> LazyMan();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> lazyMan;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">Holder</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Holder holder = <span class="keyword">new</span> Holder();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Holder <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Inner.holder;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//èƒ½å¤Ÿé˜²æ­¢å•ä¾‹è¢«åå°„ç ´å</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">enum</span> <span class="title">EnumSingleton</span></span>&#123;</span><br><span class="line">        <span class="comment">//æµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line">        INSTANCE1, INSTANCE2,INSTANCE3;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> EnumSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> INSTANCE2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„éå†</title>
      <link href="/2021/07/09/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/"/>
      <url>/2021/07/09/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<h2 id="äºŒå‰æ ‘çš„éå†"><a href="#äºŒå‰æ ‘çš„éå†" class="headerlink" title="äºŒå‰æ ‘çš„éå†"></a>äºŒå‰æ ‘çš„éå†</h2><h2 id="ç»“ç‚¹"><a href="#ç»“ç‚¹" class="headerlink" title="ç»“ç‚¹"></a>ç»“ç‚¹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> String value;</span><br><span class="line">        <span class="keyword">public</span> Node left;</span><br><span class="line">        <span class="keyword">public</span> Node right;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(String value)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.value=value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆæ ‘"><a href="#ç”Ÿæˆæ ‘" class="headerlink" title="ç”Ÿæˆæ ‘"></a>ç”Ÿæˆæ ‘</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**     å‰åºéå†ï¼šABDEGCF ä¸­åºéå†ï¼šDBGEACF ååºéå†ï¼šDGEBFCA</span></span><br><span class="line"><span class="comment">     * ç¬¬ä¸€å±‚:A ç¬¬äºŒå±‚ï¼šBã€C ç¬¬ä¸‰å±‚:Dã€Eã€F ç¬¬å››å±‚ï¼šG</span></span><br><span class="line"><span class="comment">     *          A</span></span><br><span class="line"><span class="comment">     *      B       C</span></span><br><span class="line"><span class="comment">     *   D      E        F</span></span><br><span class="line"><span class="comment">     *        G</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">getNodeList</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Node a = <span class="keyword">new</span> Node(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        Node b = <span class="keyword">new</span> Node(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        Node c = <span class="keyword">new</span> Node(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">        Node d = <span class="keyword">new</span> Node(<span class="string">&quot;D&quot;</span>);</span><br><span class="line">        Node e = <span class="keyword">new</span> Node(<span class="string">&quot;E&quot;</span>);</span><br><span class="line">        Node f = <span class="keyword">new</span> Node(<span class="string">&quot;F&quot;</span>);</span><br><span class="line">        Node g = <span class="keyword">new</span> Node(<span class="string">&quot;G&quot;</span>);</span><br><span class="line">        a.left=b;</span><br><span class="line">        a.right=c;</span><br><span class="line">        b.left=d;</span><br><span class="line">        b.right=e;</span><br><span class="line">        c.right=f;</span><br><span class="line">        e.left=g;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å‰ä¸­ååºéå†-é€’å½’ç‰ˆ"><a href="#å‰ä¸­ååºéå†-é€’å½’ç‰ˆ" class="headerlink" title="å‰ä¸­ååºéå†(é€’å½’ç‰ˆ)"></a>å‰ä¸­ååºéå†(é€’å½’ç‰ˆ)</h2><h3 id="å‰åº"><a href="#å‰åº" class="headerlink" title="å‰åº"></a>å‰åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recursionPre</span><span class="params">(Node head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(head.value);</span><br><span class="line">        recursionPre(head.left);</span><br><span class="line">        recursionPre(head.right);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­åº"><a href="#ä¸­åº" class="headerlink" title="ä¸­åº"></a>ä¸­åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recursionIn</span><span class="params">(Node head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        recursionIn(head.left);</span><br><span class="line">        System.out.print(head.value);</span><br><span class="line">        recursionIn(head.right);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ååº"><a href="#ååº" class="headerlink" title="ååº"></a>ååº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recursionPos</span><span class="params">(Node head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        recursionPos(head.left);</span><br><span class="line">        recursionPos(head.right);</span><br><span class="line">        System.out.print(head.value);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å‰ä¸­ååºéå†-æ ˆå®ç°"><a href="#å‰ä¸­ååºéå†-æ ˆå®ç°" class="headerlink" title="å‰ä¸­ååºéå†(æ ˆå®ç°)"></a>å‰ä¸­ååºéå†(æ ˆå®ç°)</h2><h3 id="å‰åº-1"><a href="#å‰åº-1" class="headerlink" title="å‰åº"></a>å‰åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title">stackPre</span><span class="params">(Node head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Stack&lt;Node&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        s.push(head);</span><br><span class="line">        <span class="keyword">while</span> (!s.isEmpty())&#123;</span><br><span class="line">            Node tmp = s.pop();</span><br><span class="line">            System.out.print(tmp.value);</span><br><span class="line">            <span class="keyword">if</span> (tmp.right!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                s.push(tmp.right);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tmp.left!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                s.push(tmp.left);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­åº-1"><a href="#ä¸­åº-1" class="headerlink" title="ä¸­åº"></a>ä¸­åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title">stackIn</span><span class="params">(Node head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Stack&lt;Node&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        Node tmp =head;</span><br><span class="line">        <span class="keyword">while</span> (!s.isEmpty()||tmp!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span> (tmp!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                s.push(tmp);</span><br><span class="line">                tmp=tmp.left;</span><br><span class="line">            &#125;</span><br><span class="line">            Node node =s.pop();</span><br><span class="line">            System.out.print(node.value);</span><br><span class="line">            <span class="keyword">if</span> (node.right!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                tmp=node.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ååº-1"><a href="#ååº-1" class="headerlink" title="ååº"></a>ååº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title">stackPos</span><span class="params">(Node head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Stack&lt;Node&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        Stack&lt;Node&gt; s2 = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        s.push(head);</span><br><span class="line">        <span class="keyword">while</span> (!s.isEmpty())&#123;</span><br><span class="line">            Node tmp = s.pop();</span><br><span class="line">            s2.push(tmp);</span><br><span class="line">            <span class="keyword">if</span> (tmp.left!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                s.push(tmp.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tmp.right!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                s.push(tmp.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!s2.isEmpty())&#123;</span><br><span class="line">            System.out.print(s2.pop().value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å±‚åºéå†-é˜Ÿåˆ—å®ç°"><a href="#å±‚åºéå†-é˜Ÿåˆ—å®ç°" class="headerlink" title="å±‚åºéå†(é˜Ÿåˆ—å®ç°)"></a>å±‚åºéå†(é˜Ÿåˆ—å®ç°)</h2><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">queueFloor</span><span class="params">(Node head)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Queue&lt;Node&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        q.add(head);</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty())&#123;</span><br><span class="line">            Node node = q.remove();</span><br><span class="line">            System.out.print(node.value);</span><br><span class="line">            <span class="keyword">if</span> (node.left!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                q.add(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                q.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰“å°æ¯ä¸€å±‚çš„å…ƒç´ "><a href="#æ‰“å°æ¯ä¸€å±‚çš„å…ƒç´ " class="headerlink" title="æ‰“å°æ¯ä¸€å±‚çš„å…ƒç´ "></a>æ‰“å°æ¯ä¸€å±‚çš„å…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;String&gt;&gt; queueFloorAndPrint(Node head)&#123;</span><br><span class="line">        <span class="keyword">if</span> (head==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;List&lt;String&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Queue&lt;Node&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        q.add(head);</span><br><span class="line">        List&lt;String&gt; tmp;</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> size = q.size();</span><br><span class="line">            tmp=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span> (size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                Node node = q.remove();</span><br><span class="line">                System.out.print(node.value);</span><br><span class="line">                tmp.add(node.value);</span><br><span class="line">                <span class="keyword">if</span> (node.left!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                    q.add(node.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (node.right!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                    q.add(node.right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            list.add(tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†’æ³¡å’Œå¿«é€Ÿæ’åº</title>
      <link href="/2021/07/09/%E5%86%92%E6%B3%A1%E5%92%8C%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"/>
      <url>/2021/07/09/%E5%86%92%E6%B3%A1%E5%92%8C%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å†’æ³¡å’Œå¿«é€Ÿæ’åº"><a href="#å†’æ³¡å’Œå¿«é€Ÿæ’åº" class="headerlink" title="å†’æ³¡å’Œå¿«é€Ÿæ’åº"></a>å†’æ³¡å’Œå¿«é€Ÿæ’åº</h1><h2 id="å†’æ³¡æ’åºæ”¹è‰¯ç‰ˆ"><a href="#å†’æ³¡æ’åºæ”¹è‰¯ç‰ˆ" class="headerlink" title="å†’æ³¡æ’åºæ”¹è‰¯ç‰ˆ"></a>å†’æ³¡æ’åºæ”¹è‰¯ç‰ˆ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] num)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (num.length==<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> end=num.length-<span class="number">1</span>;end&gt;<span class="number">0</span>;end--) &#123;</span><br><span class="line">            <span class="comment">//è®°å½•æœ€åä¸€æ¬¡äº¤æ¢çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">int</span> sorted=-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">0</span>; begin &lt; end; begin++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (num[begin+<span class="number">1</span>]&lt;num[begin])&#123;</span><br><span class="line">                    <span class="keyword">int</span> tmp=num[begin+<span class="number">1</span>];</span><br><span class="line">                    num[begin+<span class="number">1</span>]=num[begin];</span><br><span class="line">                    num[begin]=tmp;</span><br><span class="line">                    sorted=begin;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            end=sorted+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (sorted==-<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] num, <span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(begin&lt;end)&#123;</span><br><span class="line">           <span class="keyword">int</span> mid=pivotIndex(num,begin,end);</span><br><span class="line">           quickSort(num,begin,mid-<span class="number">1</span>);</span><br><span class="line">           quickSort(num,mid+<span class="number">1</span>,end);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">pivotIndex</span><span class="params">(<span class="keyword">int</span>[] num, <span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">       <span class="comment">//è¿™é‡Œå¯ä»¥æ”¹æˆå–æ•°ç»„éšæœºä¸€ä¸ªæ•°ï¼Œé¿å…O(n^2)çš„æœ€åæƒ…å†µ</span></span><br><span class="line">       <span class="keyword">int</span> pivot=num[begin];</span><br><span class="line">       <span class="keyword">while</span>(begin&lt;end)&#123;</span><br><span class="line">           <span class="keyword">while</span>(begin&lt;end &amp;&amp; pivot&lt;=num[end]) &#123;</span><br><span class="line">               end--;</span><br><span class="line">           &#125;</span><br><span class="line">           swap(num,begin,end);</span><br><span class="line">           <span class="keyword">while</span>(begin&lt;end &amp;&amp; pivot&gt;=num[begin]) &#123;</span><br><span class="line">               begin++;</span><br><span class="line">           &#125;</span><br><span class="line">           swap(num,begin,end);</span><br><span class="line">       &#125;</span><br><span class="line">       num[begin]=pivot;</span><br><span class="line">       <span class="keyword">return</span> begin;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] num, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">       <span class="keyword">int</span> tmp=num[i];</span><br><span class="line">       num[i]=num[j];</span><br><span class="line">       num[j]=tmp;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><h3 id="è·å–éšæœºæ•°ç»„"><a href="#è·å–éšæœºæ•°ç»„" class="headerlink" title="è·å–éšæœºæ•°ç»„"></a>è·å–éšæœºæ•°ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—ä¸€ä¸ªå­˜åœ¨æ­£è´Ÿæ•°çš„éšæœºæ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> maxSize æ•°ç»„æœ€å¤§é•¿åº¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> maxValue æ•°ç»„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›ç”Ÿæˆçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] getRandomArray(<span class="keyword">int</span> maxSize,<span class="keyword">int</span> maxValue)&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[(<span class="keyword">int</span>) ((maxSize+<span class="number">1</span>)*Math.random())];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            array[i]=(<span class="keyword">int</span>) ((maxValue+<span class="number">1</span>)*Math.random() - (maxValue+<span class="number">1</span>)*Math.random());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] num= Util.getRandomArray(<span class="number">50</span>,<span class="number">10000</span>);</span><br><span class="line">        <span class="keyword">int</span>[] num1=Arrays.copyOf(num,num.length);</span><br><span class="line">        <span class="keyword">int</span>[] num2=Arrays.copyOf(num,num.length);</span><br><span class="line">        bubbleSort(num);</span><br><span class="line">        System.out.println(Arrays.toString(num));</span><br><span class="line">        quickSort(num1, <span class="number">0</span>, num1.length - <span class="number">1</span>);</span><br><span class="line">        System.out.println(Arrays.toString(num1));</span><br><span class="line">        Arrays.sort(num2);</span><br><span class="line">        System.out.println(Arrays.toString(num2));</span><br><span class="line">        System.out.println(Arrays.equals(num,num1));</span><br><span class="line">        System.out.println(Arrays.equals(num1,num2));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p><img src="https://i.loli.net/2021/07/09/XwepstAmrWzEBVk.png" alt="image-20210709112116662"></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¨€ç–æ•°ç»„</title>
      <link href="/2021/07/06/%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/"/>
      <url>/2021/07/06/%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¨€ç–æ•°ç»„"><a href="#ç¨€ç–æ•°ç»„" class="headerlink" title="ç¨€ç–æ•°ç»„"></a>ç¨€ç–æ•°ç»„</h1><p>å‚è€ƒäºï¼š<a href="https://blog.csdn.net/baolingye/article/details/99943083">https://blog.csdn.net/baolingye/article/details/99943083</a></p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>å½“ä¸€ä¸ªæ•°ç»„ä¸­å¤§éƒ¨åˆ†å…ƒç´ ä¸ºï¼ï¼Œæˆ–è€…ä¸ºåŒä¸€ä¸ªå€¼çš„æ•°ç»„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¨€ç–æ•°ç»„æ¥ä¿å­˜è¯¥æ•°ç»„ï¼Œç¨€ç–æ•°ç»„çš„å¤„ç†æ–¹æ³•æ˜¯ï¼š</p><ul><li>è®°å½•æ•°ç»„ä¸€å…±æœ‰å‡ è¡Œå‡ åˆ—ï¼Œæœ‰å¤šå°‘ä¸ªä¸åŒçš„å€¼</li><li>æŠŠå…·æœ‰ä¸åŒå€¼çš„å…ƒç´ çš„è¡Œåˆ—åŠå€¼è®°å½•åœ¨ä¸€ä¸ªå°è§„æ¨¡çš„æ•°ç»„ä¸­ï¼Œä»è€Œç¼©å°ç¨‹åºçš„è§„æ¨¡</li></ul><h2 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><p>ç¨€ç–æ•°ç»„å¤§å°ä¸º**(n+1)<em>3</em>*(nä¸ºæ•°ç»„ä¸­æœ‰æ•ˆå…ƒç´ çš„ä¸ªæ•°ï¼Œ+1ä¸ºç¬¬ä¸€è¡Œçš„è®°å½•æ•°ï¼Œ3ä¸ºè¡Œã€åˆ—ã€å€¼ä¸‰åˆ—)</p><ul><li>ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—è®°å½•åŸå§‹æ•°ç»„æ€»è¡Œæ•°ï¼Œç¬¬ä¸€è¡Œç¬¬äºŒåˆ—è®°å½•åŸå§‹æ•°ç»„æ€»åˆ—æ•°ï¼Œç¬¬ä¸€è¡Œç¬¬ä¸‰åˆ—åŸå§‹æ•°ç»„ä¸­çš„æ€»æœ‰æ•ˆå…ƒç´ ä¸ªæ•°</li><li>ç¬¬äºŒè¡Œè®°å½•ç¬¬ä¸€ä¸ªæœ‰æ•ˆå…ƒç´ çš„è¡Œã€åˆ—ã€å€¼</li><li>ç¬¬ä¸‰è¡Œè®°å½•ç¬¬äºŒä¸ªæœ‰æ•ˆå…ƒç´ çš„è¡Œã€åˆ—ã€å€¼</li><li>â€¦â€¦</li></ul><p><img src="https://i.loli.net/2021/04/22/9VUMLg6PwzBiKNZ.png" alt="20190821103853197"></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021ä¸ŠåŠå¹´ç†è´¢å°ç»“</title>
      <link href="/2021/07/04/2021%E4%B8%8A%E5%8D%8A%E5%B9%B4%E7%90%86%E8%B4%A2%E5%B0%8F%E7%BB%93/"/>
      <url>/2021/07/04/2021%E4%B8%8A%E5%8D%8A%E5%B9%B4%E7%90%86%E8%B4%A2%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="2021ä¸ŠåŠå¹´ç†è´¢å°ç»“"><a href="#2021ä¸ŠåŠå¹´ç†è´¢å°ç»“" class="headerlink" title="2021ä¸ŠåŠå¹´ç†è´¢å°ç»“"></a>2021ä¸ŠåŠå¹´ç†è´¢å°ç»“</h1><h2 id="è‚¡ç¥¨"><a href="#è‚¡ç¥¨" class="headerlink" title="è‚¡ç¥¨"></a>è‚¡ç¥¨</h2><p>ä»Šå¹´æ”¶ç›Šç‡è¿‘16%</p><p>æŒä»“ï¼š åŸºæœ¬äºä¸åˆ›ä¸šæ¿èµ°åŠ¿ç›¸åŒ<img src="https://i.loli.net/2021/07/01/unTeQVyIZctmEl8.png" alt="æŒä»“"></p><p>ä¸ªäººçœ‹æ³•ï¼šç°åœ¨Aè‚¡è¿˜åœ¨æ´—ç›˜ä¸­ï¼Œæœªæ¥å¤§æ¦‚ç‡æ˜¯èµ°é•¿ç‰›</p><p><font color=red>ä¸ªäººæ„è§ï¼šå¯¹äºä¸äº†è§£çš„ä¸ªè‚¡å°½é‡åˆ«ç©ï¼Œå°½é‡é€‰æ‹©è‡ªå·±çœ‹å¥½çš„æ¿å—çš„ETF</font></p><p><img src="https://i.loli.net/2021/07/01/pjnqTM5yxo7R2Pc.jpg" alt="è‚¡ç¥¨"></p><h2 id="åŸºé‡‘"><a href="#åŸºé‡‘" class="headerlink" title="åŸºé‡‘"></a>åŸºé‡‘</h2><p>ä»Šå¹´æ”¶ç›Šç‡è¾ƒé«˜ï¼Œè¿‘30%</p><p>é‡ä»“ï¼šå—æ–¹åŸæ²¹A</p><p>æŒä»“æ—¶é—´ï¼š16ä¸ªæœˆ</p><p>ä¸ªäººçœ‹æ³•ï¼šå½“åˆæ˜¯åœ¨åŸæ²¹å¤§è·Œçš„æ—¶å€™è¿›åœºçš„ï¼Œåˆ°ç°åœ¨æ‰ä¸å¤šæŒæœ‰16ä¸ªæœˆï¼Œä»Šå¹´åŸæ²¹å¸‚åœºå›æš–ï¼Œæ”¶ç›Šæ‰å˜ä¸ºæ­£çš„ï¼Œä¹‹å‰è·Œçš„æœ€å‡¶çš„æ—¶å€™ï¼Œæ”¶ç›Šæ˜¯-60%+ï¼Œ<font color=blue>åŸæ²¹ç°åœ¨å¤§æ¦‚70+$ï¼Œç°åœ¨æ™®éè®¤ä¸ºåŸæ²¹ä»·æ ¼åœ¨80+$ï¼Œç°åœ¨åŸºæœ¬å¯ä»¥é€æ¸å‡ä»“ç¦»åœºã€‚</font></p><p><font color=red>ä¸ªäººæ„è§ï¼šä¸è¦éšä¾¿è¿›å…¥è‡ªå·±ä¸ç†Ÿçš„é¢†åŸŸï¼Œä¸è¦è¿½çƒ­ç‚¹ï¼Œå¦‚æœè¿½äº†å¹¶ä¸”çœ‹å¥½åå¸‚ï¼Œè¯·åŠ¡å¿…é•¿æœŸæŒæœ‰ï¼è¿½çƒ­ç‚¹è¯·é€‰æ‹©ä¸“ä¸šçš„åˆ¸å•†å¹³å°ï¼ï¼ï¼</font></p><p><img src="https://i.loli.net/2021/07/01/lnBHWOKpm8C1Ee7.jpg" alt="åŸºé‡‘"></p>]]></content>
      
      
      <categories>
          
          <category> ç†è´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºé‡‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å¸¸è€ƒçš„19é“é¢˜</title>
      <link href="/2021/07/04/%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%80%83%E7%9A%8419%E9%81%93%E9%A2%98/"/>
      <url>/2021/07/04/%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%80%83%E7%9A%8419%E9%81%93%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaå·¥ç¨‹å¸ˆé¢è¯•å¸¸è€ƒé¢˜-é¢è¯•å¸¸è€ƒçš„19é“é¢˜"><a href="#Javaå·¥ç¨‹å¸ˆé¢è¯•å¸¸è€ƒé¢˜-é¢è¯•å¸¸è€ƒçš„19é“é¢˜" class="headerlink" title="#Javaå·¥ç¨‹å¸ˆé¢è¯•å¸¸è€ƒé¢˜# é¢è¯•å¸¸è€ƒçš„19é“é¢˜"></a><a href="https://www.nowcoder.com/subject/index/427020eab5a74553ab470b1efbeb1ebd">#Javaå·¥ç¨‹å¸ˆé¢è¯•å¸¸è€ƒé¢˜#</a> é¢è¯•å¸¸è€ƒçš„19é“é¢˜</h1><p><img src="https://i.loli.net/2021/05/25/ztwMkjl38PCoWAb.png" alt="4A47A0DB6E60853DEDFCFDF08A5CA249.png"></p><p><img src="https://i.loli.net/2021/05/25/9qg3teuwG4IMRVW.png" alt="FB5C81ED3A220004B71069645F112867.png"></p><p><img src="https://i.loli.net/2021/05/25/wiFoOvhrKt94gQp.png" alt="10FB15C77258A991B0028080A64FB42D.png"></p><p><img src="https://i.loli.net/2021/05/25/7ALEhbd6XpOo8fs.png" alt="09DD8C2662B96CE14928333F055C5580.png"></p><p><img src="https://i.loli.net/2021/05/25/LsM2aFo4V5tGfnk.png" alt="8266E4BFEDA1BD42D8F9794EB4EA0A13.png"></p><p><img src="https://i.loli.net/2021/05/25/xNE6wotknlHv5TP.png" alt="F19C9085129709EE14D013BE869DF69B.png"></p><p><img src="https://i.loli.net/2021/05/25/BbkLiWT9uZIyj7A.png" alt="9EB9CD58B9EA5E04C890326B5C1F471F.png"></p><p><img src="https://i.loli.net/2021/05/25/FrolDXdKLYpGVaM.png" alt="602E8F042F463DC47EBFDF6A94ED5A6D.png"></p><p><img src="https://i.loli.net/2021/05/25/wnPI1uZfbU6Hl2B.png" alt="7AFBB1602613EC52B265D7A54AD27330.png"></p>]]></content>
      
      
      <categories>
          
          <category> Javaé¢è¯• </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Cookieå’ŒSessionçš„å¼‚åŒ</title>
      <link href="/2021/07/04/Cookie%E5%92%8CSession%E7%9A%84%E5%BC%82%E5%90%8C/"/>
      <url>/2021/07/04/Cookie%E5%92%8CSession%E7%9A%84%E5%BC%82%E5%90%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="Cookieå’ŒSessionçš„å¼‚åŒ"><a href="#Cookieå’ŒSessionçš„å¼‚åŒ" class="headerlink" title="Cookieå’ŒSessionçš„å¼‚åŒ"></a>Cookieå’ŒSessionçš„å¼‚åŒ</h1><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><ul><li>ä¸€ä¸ªcookieåªèƒ½å­˜æ”¾ä¸€ä¸ªä¿¡æ¯</li><li>ä¸€ä¸ªwebç«™ç‚¹å¯ä»¥ç»™æµè§ˆå™¨å‘é€å¤šä¸ªcookieï¼Œæœ€å¤š20ä¸ª</li><li>cookieæœ€å¤§ä¸º 4 KB</li><li>æµè§ˆå™¨æœ€å¤šå­˜æ”¾300ä¸ªcookie</li><li>å¦‚æœä¸è®¾ç½®æœ‰æ•ˆæœŸï¼Œå…³é—­æµè§ˆå™¨ï¼Œcookieè‡ªåŠ¨å¤±æ•ˆ</li></ul><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><ul><li>æœåŠ¡å™¨ä¸ºæ¯ä¸ªç”¨æˆ·(æµè§ˆå™¨)åˆ›å»ºä¸€ä¸ªsessionå¯¹è±¡</li><li>ä¸€ä¸ªsessionç‹¬å ä¸€ä¸ªæµè§ˆå™¨ï¼Œåªè¦æµè§ˆå™¨æ²¡æœ‰å…³é—­ï¼Œsessionå°±å­˜åœ¨</li><li>sessionç”±æœåŠ¡å™¨åˆ›å»º</li><li>ä¸€èˆ¬ç”¨äºä¿å­˜ç”¨æˆ·ä¿¡æ¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitåŸºæœ¬å‘½ä»¤</title>
      <link href="/2021/07/04/Git%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/07/04/Git%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><p><strong>è¯¦ç»†æ–‡ç« </strong><a href="https://www.cnblogs.com/999520hzy/p/13983084.html">Gitç¬”è®°ï¼ˆç‹‚ç¥è¯´ï¼‰ - å¢¨æŸ“å¿µé¢– - åšå®¢å›­ (cnblogs.com)</a></p><h2 id="1ã€å·¥ä½œåŸç†-æµç¨‹"><a href="#1ã€å·¥ä½œåŸç†-æµç¨‹" class="headerlink" title="1ã€å·¥ä½œåŸç†|æµç¨‹"></a>1ã€å·¥ä½œåŸç†|æµç¨‹</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwME5KNEw5T1BJOWlhMU1taWJwdkRkNmNTZGRCZHZybGJkRXR5RU9yaDRDS25XVmlieWZDSGEzbHpYdy82NDA?x-oss-process=image/format,png" alt="img"></p><p>Workspaceï¼šå·¥ä½œåŒº<br>Index / Stageï¼šæš‚å­˜åŒº<br>Repositoryï¼šæœ¬åœ°ä»“åº“<br>Remoteï¼šè¿œç¨‹ä»“åº“</p><h2 id="2ã€å¸¸ç”¨å‘½ä»¤"><a href="#2ã€å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2ã€å¸¸ç”¨å‘½ä»¤"></a>2ã€å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git config --system --list #æŸ¥çœ‹ç³»ç»Ÿconfig</span><br><span class="line">$ git config --global --list #æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</span><br><span class="line">$ git config --global user.name &quot;name&quot;  #åç§°</span><br><span class="line">$ git config --global user.email 123456@qq.com   #é‚®ç®±</span><br><span class="line">$ git init                   #åˆå§‹åŒ–</span><br><span class="line">$ git add . #å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</span><br><span class="line">$ git commit -m &quot;æ¶ˆæ¯å†…å®¹&quot;  #å°†æš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“</span><br><span class="line">   $ git push #å°†æœ¬åœ°ä»“åº“ä¸­çš„æ–‡ä»¶æäº¤åˆ°è¿œç¨‹ä»“åº“</span><br><span class="line">   $ git pull #ç”¨äºä»è¿œç¨‹è·å–ä»£ç å¹¶åˆå¹¶æœ¬åœ°çš„ç‰ˆæœ¬</span><br><span class="line">   $ git branch                 # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span><br><span class="line">   $ git branch -r              # åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JMMåˆæ¢</title>
      <link href="/2021/07/04/JMM%E5%88%9D%E6%8E%A2/"/>
      <url>/2021/07/04/JMM%E5%88%9D%E6%8E%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="JMMåˆæ¢"><a href="#JMMåˆæ¢" class="headerlink" title="JMMåˆæ¢"></a>JMMåˆæ¢</h1><h2 id="1-ä»€ä¹ˆæ˜¯JMM"><a href="#1-ä»€ä¹ˆæ˜¯JMM" class="headerlink" title="1.ä»€ä¹ˆæ˜¯JMM?"></a>1.ä»€ä¹ˆæ˜¯JMM?</h2><p>â€‹    JMM: Java Memory Modelçš„ç¼©å†™)</p><h2 id="2-å®ƒå¹²å˜›çš„"><a href="#2-å®ƒå¹²å˜›çš„" class="headerlink" title="2.å®ƒå¹²å˜›çš„?"></a>2.å®ƒå¹²å˜›çš„?</h2><p>â€‹    ä½œç”¨:ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œç”¨äºå®šä¹‰æ•°æ®è¯»å†™çš„è§„åˆ™(éµå®ˆ,æ‰¾åˆ°è¿™ä¸ªè§„åˆ™) .</p><p>â€‹    JMMå®šä¹‰äº†çº¿ç¨‹å·¥ä½œå†…å­˜å’Œä¸»å†…å­˜ä¹‹é—´çš„æŠ½è±¡å…³ç³»:çº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜(Main Memory)</p><p>â€‹    ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸€ä¸ªç§æœ‰çš„æœ¬åœ°å†…å­˜(Local Memory)</p><p><img src="https://pic3.zhimg.com/v2-af520d543f0f4f205f822ec3b151ad46_r.jpg" alt="preview"></p><p>â€‹    è§£å†³å…±äº«å¯¹è±¡å¯è§æ€§è¿™ä¸ªé—®é¢˜: volatile(â‘ ä¿è¯å¯è§æ€§ â‘¡ä¸ä¿è¯åŸå­æ€§ â‘¢ç¦æ­¢æŒ‡ä»¤é‡æ’)</p><h2 id="3-å®ƒè¯¥å¦‚ä½•å­¦ä¹ ï¼Ÿ"><a href="#3-å®ƒè¯¥å¦‚ä½•å­¦ä¹ ï¼Ÿ" class="headerlink" title="3.å®ƒè¯¥å¦‚ä½•å­¦ä¹ ï¼Ÿ"></a>3.å®ƒè¯¥å¦‚ä½•å­¦ä¹ ï¼Ÿ</h2><p>â€‹    JMMï¼šæŠ½è±¡æ¦‚å¿µï¼Œç†è®º</p><p>â€‹    JMMå¯¹è¿™å…«ç§æŒ‡ä»¤çš„ä½¿ç”¨ï¼Œåˆ¶å®šäº†å¦‚ä¸‹è§„åˆ™ï¼š</p><ul><li>ä¸å…è®¸readå’Œloadã€storeå’Œwriteæ“ä½œä¹‹ä¸€å•ç‹¬å‡ºç°ã€‚å³ä½¿ç”¨äº†readå¿…é¡»loadï¼Œä½¿ç”¨äº†storeå¿…é¡»write</li><li>ä¸å…è®¸çº¿ç¨‹ä¸¢å¼ƒä»–æœ€è¿‘çš„assignæ“ä½œï¼Œå³å·¥ä½œå˜é‡çš„æ•°æ®æ”¹å˜äº†ä¹‹åï¼Œå¿…é¡»å‘ŠçŸ¥ä¸»å­˜</li><li>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹å°†æ²¡æœ‰assignçš„æ•°æ®ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜</li><li>ä¸€ä¸ªæ–°çš„å˜é‡å¿…é¡»åœ¨ä¸»å†…å­˜ä¸­è¯ç”Ÿï¼Œä¸å…è®¸å·¥ä½œå†…å­˜ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–çš„å˜é‡ã€‚å°±æ˜¯æ€¼å˜é‡å®æ–½useã€storeæ“ä½œä¹‹å‰ï¼Œå¿…é¡»ç»è¿‡assignå’Œloadæ“ä½œ</li><li>ä¸€ä¸ªå˜é‡åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¯¹å…¶è¿›è¡Œlockã€‚å¤šæ¬¡lockåï¼Œå¿…é¡»æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„unlockæ‰èƒ½è§£é”</li><li>å¦‚æœå¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œlockæ“ä½œï¼Œä¼šæ¸…ç©ºæ‰€æœ‰å·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨è¿™ä¸ªå˜é‡å‰ï¼Œå¿…é¡»é‡æ–°loadæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡çš„å€¼</li><li>å¦‚æœä¸€ä¸ªå˜é‡æ²¡æœ‰è¢«lockï¼Œå°±ä¸èƒ½å¯¹å…¶è¿›è¡Œunlockæ“ä½œã€‚ä¹Ÿä¸èƒ½unlockä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”ä½çš„å˜é‡</li><li>å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»æŠŠæ­¤å˜é‡åŒæ­¥å›ä¸»å†…å­˜</li></ul><p>ã€€ã€€JMMå¯¹è¿™å…«ç§æ“ä½œè§„åˆ™å’Œå¯¹[volatileçš„ä¸€äº›ç‰¹æ®Šè§„åˆ™]å°±èƒ½ç¡®å®šå“ªé‡Œæ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨ï¼Œå“ªäº›æ“ä½œæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„äº†ã€‚ä½†æ˜¯è¿™äº›è§„åˆ™å®åœ¨å¤æ‚ï¼Œå¾ˆéš¾åœ¨å®è·µä¸­ç›´æ¥åˆ†æã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä¹Ÿä¸ä¼šé€šè¿‡ä¸Šè¿°è§„åˆ™è¿›è¡Œåˆ†æã€‚æ›´å¤šçš„æ—¶å€™ï¼Œä½¿ç”¨javaçš„happen-beforeè§„åˆ™æ¥è¿›è¡Œåˆ†æã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxåŸºæœ¬å‘½ä»¤</title>
      <link href="/2021/07/04/Linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/07/04/Linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><p><strong>è¯¦ç»†æ–‡ç« </strong>ï¼š<a href="https://gitee.com/kuangstudy/openclass/tree/master/[%E9%81%87%E8%A7%81%E7%8B%82%E7%A5%9E%E8%AF%B4]Linux%E8%A7%86%E9%A2%91%E7%AC%94%E8%AE%B0">ã€é‡è§ç‹‚ç¥è¯´ã€‘Linuxè§†é¢‘ç¬”è®° Â· ç‹‚ç¥è¯´/Bilibiliç‹‚ç¥è¯´Javaç¬”è®° - ç äº‘ - å¼€æºä¸­å›½ (gitee.com)</a></p><h2 id="å…³æœº"><a href="#å…³æœº" class="headerlink" title="å…³æœº"></a>å…³æœº</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sync # å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚</span><br><span class="line">shutdown # å…³æœºæŒ‡ä»¤</span><br><span class="line">shutdown â€“h now # ç«‹é©¬å…³æœº</span><br><span class="line">shutdown â€“r now # ç«‹é©¬é‡å¯</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">cd # åˆ‡æ¢ç›®å½•å‘½ä»¤</span><br><span class="line">cd /www/wwwroot #åˆ‡æ¢è‡³wwwä¸‹çš„wwwrootç›®å½•</span><br><span class="line">cd .. #è¿”å›ä¸Šä¸€çº§</span><br><span class="line"></span><br><span class="line">ls # åˆ—å‡ºç›®å½•</span><br><span class="line">ls -al #-a:all æ‰€æœ‰æ–‡ä»¶(åŒ…æ‹¬éšè—æ–‡ä»¶)   -l:å‚æ•° æ‰€æœ‰æ–‡ä»¶(ä¸åŒ…æ‹¬éšè—æ–‡ä»¶)çš„å±æ€§å’Œæƒé™</span><br><span class="line"></span><br><span class="line">mkdir # åˆ›å»ºç›®å½•</span><br><span class="line">mkdir test1 # åˆ›å»ºtest1ç›®å½•</span><br><span class="line">mkdir -p test2/test3/test4 # åˆ›å»ºå¤šçº§ç›®å½•   -p:ç¡®ä¿ç›®å½•åç§°å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„å°±å»ºä¸€ä¸ª</span><br><span class="line"></span><br><span class="line">rmdir # åˆ é™¤ç›®å½•</span><br><span class="line">rmdir test1 # åˆ é™¤test1ç›®å½• </span><br><span class="line">rkdir -p test2/test3/test4 # åˆ é™¤å¤šçº§ç›®å½•</span><br><span class="line"></span><br><span class="line">cp # å¤åˆ¶æ–‡ä»¶æˆ–è€…ç›®å½•</span><br><span class="line">cp install.sh kuangstudy # æ‹·è´æ–‡ä»¶è‡³kuangstudyç›®å½•</span><br><span class="line"></span><br><span class="line">rm # åˆ é™¤æ–‡ä»¶æˆ–è€…ç›®å½•</span><br><span class="line">rm -rf install.sh # åˆ é™¤install.shæ–‡ä»¶-f:å¼ºåˆ¶ -r:é€’å½’åˆ é™¤ -i:åˆ é™¤æ—¶è¯¢é—®æ˜¯å¦åˆ é™¤</span><br><span class="line"></span><br><span class="line">mv # ç§»åŠ¨æ–‡ä»¶æˆ–è€…ç›®å½•ã€é‡å‘½åæ–‡ä»¶</span><br><span class="line">mv install.sh kuangstudy # ç§»åŠ¨æ–‡ä»¶</span><br><span class="line">mv kuangstudy kuangstudy2 # é‡å‘½åæ–‡ä»¶å¤¹ï¼</span><br><span class="line"></span><br><span class="line">chgrp # æ›´æ”¹æ–‡ä»¶å±ç»„</span><br><span class="line">chgrp [-R] å±ç»„å æ–‡ä»¶å # -R:é€’å½’æ›´æ”¹æ–‡ä»¶å±ç»„</span><br><span class="line"></span><br><span class="line">chown # æ›´æ”¹æ–‡ä»¶å±ä¸»ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ”¹æ–‡ä»¶å±ç»„</span><br><span class="line">chown [â€“R] å±ä¸»å æ–‡ä»¶å </span><br><span class="line">chown [-R] å±ä¸»åï¼šå±ç»„å æ–‡ä»¶å</span><br><span class="line"></span><br><span class="line">chmodï¼šæ›´æ”¹æ–‡ä»¶9ä¸ªå±æ€§(å¿…é¡»æŒæ¡ï¼ï¼ï¼)</span><br><span class="line">chmod [-R] xyz æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">chmod 770 filename</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶å†…å®¹"><a href="#æ–‡ä»¶å†…å®¹" class="headerlink" title="æ–‡ä»¶å†…å®¹"></a>æ–‡ä»¶å†…å®¹</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cat # ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</span><br><span class="line">cat index.html</span><br><span class="line"></span><br><span class="line">tac # ç”±æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</span><br><span class="line">tac index.html</span><br><span class="line"></span><br><span class="line">nl # æ˜¾ç¤ºæ—¶æ˜¾ç¤ºä»£ç è¡Œæ•°</span><br><span class="line">nl index.html</span><br><span class="line"></span><br><span class="line">more # ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</span><br><span class="line">more index.html </span><br><span class="line">æ³¨:ç©ºæ ¼ä»£è¡¨ç¿»é¡µï¼Œenterä»£è¡¨ä¸‹ä¸€è¡Œï¼Œ:fè¡Œå·</span><br><span class="line"></span><br><span class="line">less # ä¸moreç›¸ä¼¼ </span><br><span class="line">æ³¨:ç©ºæ ¼ä¸‹ç¿»é¡µï¼ŒpageDownï¼ŒpageUpé”®ä»£è¡¨ç¿»åŠ¨é¡µé¢ï¼é€€å‡º q å‘½ä»¤ï¼ŒæŸ¥æ‰¾å­—ç¬¦ä¸² /è¦æŸ¥è¯¢çš„å­—ç¬¦å‘ä¸‹æŸ¥è¯¢ï¼Œå‘ä¸ŠæŸ¥è¯¢ä½¿ç”¨ï¼Ÿè¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²ï¼Œnç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªï¼ŒNä¸Šå¯»æ‰¾ï¼</span><br><span class="line"></span><br><span class="line">head # å¤´å‡ è¡Œ</span><br><span class="line">head -n 20 index.html # -n:æ§åˆ¶è¡Œæ•°</span><br><span class="line"></span><br><span class="line">tail # å°¾å‡ è¡Œ</span><br><span class="line">tail -n 20 index.html</span><br></pre></td></tr></table></figure><h2 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ln # é“¾æ¥</span><br><span class="line">ln f1 f2 # åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥f2</span><br><span class="line">ln -s f1 f3 # åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥(ç¬¦å·è¿æ¥)f3   -s:åˆ›å»ºè½¯é“¾æ¥</span><br><span class="line">æ³¨ï¼šç¡¬é“¾æ¥ç±»ä¼¼äºjavaå¯¹è±¡ä¸­çš„&quot;å¼•ç”¨æŒ‡å‘å…·ä½“å¯¹è±¡&quot;</span><br></pre></td></tr></table></figure><p>ç¡¬é“¾æ¥ï¼š<img src="https://i.loli.net/2021/05/04/fnrWBVUE495zXuI.png" alt="20181007134104714.png"></p><p>è½¯é“¾æ¥ï¼š<img src="https://i.loli.net/2021/05/04/w1NrMBbUdSf8k9y.png" alt="20181007134132153.png"></p><h2 id="vimç¼–è¾‘å™¨"><a href="#vimç¼–è¾‘å™¨" class="headerlink" title="vimç¼–è¾‘å™¨"></a>vimç¼–è¾‘å™¨</h2><p><img src="https://i.loli.net/2021/05/04/vNYW9G87ZA6XkyO.jpg" alt="o_201219075930kss.jpg"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim index.html # ç¼–è¾‘indexï¼Œé»˜è®¤è¿›å…¥å‘½ä»¤æ¨¡å¼</span><br><span class="line">æŒ‰iè¿›å…¥è¾“å…¥æ¨¡å¼</span><br><span class="line">æŒ‰ESCé€€å‡ºè¾“å…¥æ¨¡å¼</span><br><span class="line">æŒ‰:è¿›å…¥åº•çº¿å‘½ä»¤æ¨¡å¼</span><br><span class="line">:wq!  # wä¿å­˜ qé€€å‡º !å¼ºåˆ¶</span><br><span class="line"></span><br><span class="line">å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œ</span><br><span class="line"> æ•°å­— + ç©ºæ ¼  å‘åç§»åŠ¨å¤šå°‘ä¸ªå­—ç¬¦</span><br><span class="line"> æ•°å­— + å›è½¦  å‘ä¸‹ç§»åŠ¨å¤šå°‘è¡Œ</span><br><span class="line"> /word  å‘å…‰æ ‡ä¸‹å†…å®¹ä¸­æœç´¢wordè¿™ä¸ªå­—ç¬¦ä¸²</span><br><span class="line"> ?word  å‘å…‰æ ‡ä¸Šå†…å®¹ä¸­æœç´¢wordè¿™ä¸ªå­—ç¬¦ä¸²</span><br><span class="line"> n å‘ä¸‹æœç´¢wordè¿™ä¸ªå­—ç¬¦ä¸²</span><br><span class="line"> N å‘ä¸Šæœç´¢wordè¿™ä¸ªå­—ç¬¦ä¸²</span><br><span class="line"> u å¤åŸå‰ä¸€ä¸ªåŠ¨ä½œ</span><br><span class="line"> :set nu è®¾ç½®æ˜¾ç¤ºè¡Œå·</span><br><span class="line"> :set nonu ä¸set nuç›¸å</span><br></pre></td></tr></table></figure><h2 id="è´¦å·ç®¡ç†"><a href="#è´¦å·ç®¡ç†" class="headerlink" title="è´¦å·ç®¡ç†"></a>è´¦å·ç®¡ç†</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">useradd # æ·»åŠ ç”¨æˆ·</span><br><span class="line">useradd -m qinjiang # åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼ -mï¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªç”¨æˆ·çš„ä¸»ç›®å½• /home/qinjiang  -G : ç»™ç”¨æˆ·åˆ†é…ç»„ï¼</span><br><span class="line"></span><br><span class="line">userdel # åˆ é™¤ç”¨æˆ·</span><br><span class="line">userdel -r qinjiang #-r:å°†ä»–çš„ç›®å½•é¡µä¸€èµ·åˆ é™¤</span><br><span class="line"></span><br><span class="line">usermod # ä¿®æ”¹ç”¨æˆ·</span><br><span class="line">usermod -d /home/233 qinjiang</span><br><span class="line"></span><br><span class="line">su username #åˆ‡æ¢ç”¨æˆ·</span><br><span class="line">sudo su root #åˆ‡æ¢è‡³rootç”¨æˆ·</span><br><span class="line">exitæˆ–è€…logoutï¼Œé€€å›è‡³åŸæ¥çš„ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">passwd ä¿®æ”¹å¯†ç </span><br><span class="line">rootç”¨æˆ·ï¼š</span><br><span class="line">passwd usernameï¼š </span><br><span class="line">new passwordï¼š </span><br><span class="line">re passwordï¼š</span><br><span class="line">æ™®é€šç”¨æˆ·ï¼š</span><br><span class="line">passwd </span><br><span class="line">(current) UNIX password: </span><br><span class="line">new passwordï¼š # å¯†ç ä¸èƒ½å¤ªè¿‡äºç®€å•ï¼ </span><br><span class="line">re passwordï¼š</span><br><span class="line"></span><br><span class="line">é”å®šè´¦æˆ·</span><br><span class="line">rootç”¨æˆ·ï¼š</span><br><span class="line">passwd -l qinjiang # é”å®šä¹‹åè¿™ä¸ªç”¨æˆ·å°±ä¸èƒ½ç™»å½•äº†ï¼ </span><br><span class="line">passwd -d qinjiang # æ²¡æœ‰å¯†ç ä¹Ÿä¸èƒ½ç™»å½•ï¼</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·ç»„ç®¡ç†"><a href="#ç”¨æˆ·ç»„ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç»„ç®¡ç†"></a>ç”¨æˆ·ç»„ç®¡ç†</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">groupadd # åˆ›å»ºç”¨æˆ·ç»„</span><br><span class="line">groupadd kuangshen</span><br><span class="line"></span><br><span class="line">groupdel # åˆ é™¤ç”¨æˆ·ç»„</span><br><span class="line">groupdel kuangshen</span><br><span class="line"></span><br><span class="line">groupmod # ä¿®æ”¹ç”¨æˆ·ç»„</span><br><span class="line">groupmod -g 666 -n newkuangshen kuangshen #-g:ç»„id -n:æ–°çš„ç»„å</span><br><span class="line"></span><br><span class="line">newgrp # åˆ‡æ¢ç”¨æˆ·ç»„</span><br><span class="line">newgrp root # åˆ‡æ¢è‡³rootç»„</span><br></pre></td></tr></table></figure><h2 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dfï¼ˆåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿæ•´ä½“çš„ç£ç›˜ä½¿ç”¨é‡ï¼‰ </span><br><span class="line">duï¼ˆæ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨é‡ï¼ï¼‰</span><br></pre></td></tr></table></figure><h2 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h2><p>1ã€åœ¨Linuxä¸­ï¼Œæ¯ä¸€ä¸ªç¨‹åºéƒ½æ˜¯æœ‰è‡ªå·±çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªidå·ï¼</p><p>2ã€æ¯ä¸€ä¸ªè¿›ç¨‹å‘¢ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹ï¼</p><p>3ã€è¿›ç¨‹å¯ä»¥æœ‰ä¸¤ç§å­˜åœ¨æ–¹å¼ï¼šå‰å°ï¼åå°è¿è¡Œï¼</p><p>4ã€ä¸€èˆ¬çš„è¯æœåŠ¡éƒ½æ˜¯åå°è¿è¡Œçš„ï¼ŒåŸºæœ¬çš„ç¨‹åºéƒ½æ˜¯å‰å°è¿è¡Œçš„ï¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># ps -aux æŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹ </span><br><span class="line">ps -aux|grep mysql </span><br><span class="line">-a æ˜¾ç¤ºå½“å‰ç»ˆç«¯è¿è¡Œçš„æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯ï¼ˆå½“å‰çš„è¿›ç¨‹ä¸€ä¸ªï¼‰</span><br><span class="line">-u ä»¥ç”¨æˆ·çš„ä¿¡æ¯æ˜¾ç¤ºè¿›ç¨‹</span><br><span class="line">-x æ˜¾ç¤ºåå°è¿è¡Œè¿›ç¨‹çš„å‚æ•°ï¼</span><br><span class="line"># | åœ¨Linuxè¿™ä¸ªå«åšç®¡é“ç¬¦ A|B </span><br><span class="line"># grep æŸ¥æ‰¾æ–‡ä»¶ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ï¼</span><br><span class="line">ps -efï¼šå¯ä»¥æŸ¥çœ‹åˆ°çˆ¶è¿›ç¨‹çš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"># è¿›ç¨‹æ ‘ï¼ </span><br><span class="line">pstree -pu </span><br><span class="line">-p æ˜¾ç¤ºçˆ¶id </span><br><span class="line">-u æ˜¾ç¤ºç”¨æˆ·ç»„</span><br><span class="line"></span><br><span class="line">ç»“æŸè¿›ç¨‹</span><br><span class="line">kill -9 è¿›ç¨‹çš„id</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySqlå¦‚ä½•è§£å†³å¹»è¯»é—®é¢˜</title>
      <link href="/2021/07/04/MySql%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB%E9%97%AE%E9%A2%98/"/>
      <url>/2021/07/04/MySql%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>å‚è€ƒäºï¼š</p><p><a href="https://baijiahao.baidu.com/s?id=1629409989970483292&wfr=spider&for=pc">é¢è¯•å®˜ï¼šè°ˆè°ˆä½ å¯¹Mysqlçš„MVCCçš„ç†è§£ï¼Ÿ (baidu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/66791480">ä¸€æ–‡ç†è§£Mysql MVCC - çŸ¥ä¹ (zhihu.com)</a></p><p><a href="https://www.php.cn/mysql-tutorials-460111.html">å…¨ç½‘æœ€å…¨çš„ä¸€ç¯‡æ•°æ®åº“MVCCè¯¦è§£ï¼Œä¸å…¨æˆ‘è´Ÿè´£-mysqlæ•™ç¨‹-PHPä¸­æ–‡ç½‘</a></p><p><a href="https://www.cnblogs.com/wwcom123/p/10727194.html">ã€MySQLã€‘å½“å‰è¯»ã€å¿«ç…§è¯»ã€MVCC - wwcom123 - åšå®¢å›­ (cnblogs.com)</a></p><p><a href="https://www.cnblogs.com/wudanyang/p/10655180.html">MySQL æ˜¯å¦‚ä½•è§£å†³å¹»è¯»çš„ - å´ä¸¹é˜³-cn - åšå®¢å›­ (cnblogs.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySqlä¸ºä»€ä¹ˆé€‰ç”¨B+æ ‘</title>
      <link href="/2021/07/04/MySql%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E7%94%A8B-%E6%A0%91/"/>
      <url>/2021/07/04/MySql%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E7%94%A8B-%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="MySqlä¸ºä»€ä¹ˆé€‰ç”¨B-æ ‘"><a href="#MySqlä¸ºä»€ä¹ˆé€‰ç”¨B-æ ‘" class="headerlink" title="MySqlä¸ºä»€ä¹ˆé€‰ç”¨B+æ ‘"></a>MySqlä¸ºä»€ä¹ˆé€‰ç”¨B+æ ‘</h1><p><strong>å‚è€ƒäºï¼š<a href="https://www.nowcoder.com/discuss/669322?channel=-1&source_id=profile_follow_post_nctrack">ä¸ºä»€ä¹ˆé€‰æ‹©b+æ ‘ä½œä¸ºå­˜å‚¨å¼•æ“ç´¢å¼•ç»“æ„_æŠ€æœ¯äº¤æµ_ç‰›å®¢ç½‘ (nowcoder.com)</a></strong></p><p><strong>è¿™ç¯‡æ–‡ç« å†™çš„æ¯”è¾ƒè¯¦ç»†ï¼</strong>ï¼ï¼</p><ol><li>Bæ ‘æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆlognï¼‰</li><li>Bæ ‘æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€æ’åºç­‰æ“ä½œ</li><li>Bæ ‘æ¯”å…¶ä»–çš„å¹³è¡¡äºŒæ¬¡æ ‘æ›´åŠ çŸ®èƒ–ï¼ˆå‡†ç¡®ç‚¹è¯´åº”è¯¥æ˜¯å¤šè·¯æŸ¥æ‰¾æ ‘ï¼‰</li><li>Bæ ‘çš„ä¸€ä¸ªç»“ç‚¹ï¼ˆé¡µï¼‰ä¸º16KBï¼Œè€Œæ“ä½œç³»ç»Ÿçš„é¡µä¸º4KBï¼Œå¯ä»¥ç›´æ¥é¡ºåºè¯»4ä¸ªé¡µï¼Œå‡å°‘äº†éšæœºIOæ¬¡æ•°</li><li>B+æ ‘ç”±äºå°†æ•°æ®å…¨éƒ¨å­˜å‚¨åœ¨å¶å­ç»“ç‚¹ä¸Šï¼Œéå¶å­ç»“ç‚¹ä¸Šå¯ä»¥å­˜å‚¨æ›´å¤šçš„é”®ï¼Œæ‰€ä»¥B+æ ‘æ¯”Bæ ‘æ›´çŸ®ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ›´ä½ï¼ˆè¿˜æ˜¯åº”è¯¥è¯´æ˜¯æŸ¥è¯¢ä»»ä½•æ•°æ®çš„æ—¶é—´å¤æ‚åº¦éƒ½å·®ä¸å¤šï¼Ÿï¼‰</li><li>B+æ ‘ç”±äºå°†æ•°æ®å…¨éƒ¨å­˜å‚¨åœ¨å¶å­ç»“ç‚¹ä¸Šï¼Œå¹¶ä¸”ç”¨æŒ‡é’ˆè¿æ¥èµ·æ¥ï¼Œå½¢æˆäº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œæ‰«åº“æ‰«è¡¨èƒ½åŠ›æ›´å¼º</li></ol>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sql </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SrpingBootæ•´åˆPageHelper</title>
      <link href="/2021/07/04/SrpingBoot%E6%95%B4%E5%90%88PageHelper/"/>
      <url>/2021/07/04/SrpingBoot%E6%95%B4%E5%90%88PageHelper/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBoot-Mybatis-Thymeleaf-Pagehelper"><a href="#SpringBoot-Mybatis-Thymeleaf-Pagehelper" class="headerlink" title="SpringBoot+Mybatis+Thymeleaf+Pagehelper"></a>SpringBoot+Mybatis+Thymeleaf+Pagehelper</h1><h2 id="1-åœ¨pom-xmlä¸­å¯¼å…¥ä¾èµ–"><a href="#1-åœ¨pom-xmlä¸­å¯¼å…¥ä¾èµ–" class="headerlink" title="1.åœ¨pom.xmlä¸­å¯¼å…¥ä¾èµ–"></a>1.åœ¨pom.xmlä¸­å¯¼å…¥ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-åœ¨application-ymlä¸­æ·»åŠ é…ç½®"><a href="#2-åœ¨application-ymlä¸­æ·»åŠ é…ç½®" class="headerlink" title="2.åœ¨application.ymlä¸­æ·»åŠ é…ç½®"></a>2.åœ¨application.ymlä¸­æ·»åŠ é…ç½®</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#pagehelperåˆ†é¡µæ’ä»¶é…ç½®</span></span><br><span class="line"><span class="attr">pagehelper:</span></span><br><span class="line">  <span class="attr">helper-dialect:</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">reasonable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">support-methods-arguments:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">params:</span> <span class="string">count=countSql</span></span><br></pre></td></tr></table></figure><h2 id="3-ç¼–å†™sqlè¯­å¥"><a href="#3-ç¼–å†™sqlè¯­å¥" class="headerlink" title="3.ç¼–å†™sqlè¯­å¥"></a>3.ç¼–å†™sqlè¯­å¥</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="operator">!</span><span class="comment">--è¿™é‡Œçš„sqlè¯­å¥åªæ˜¯ä¸¾ä¾‹ï¼Œæ— ä»»ä½•å®é™…å«ä¹‰--&gt;</span></span><br><span class="line"><span class="operator">&lt;</span><span class="keyword">select</span> id<span class="operator">=</span>&quot;getAllBlog&quot; resultMap<span class="operator">=</span>&quot;blog&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_blog   </span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">select</span><span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¿™é‡Œè¯·æ³¨æ„ä¸è¦åŠ â€™;â€™!!! **    å› ä¸ºpagehelperæ˜¯åœ¨sqlè¯­å¥çš„åé¢è¿½åŠ â€™limit 5(è¿™é‡Œâ€™5â€™åªæ˜¯ä¸¾ä¾‹ï¼Œæ— ä»»ä½•å®é™…å«ä¹‰)ï¼Œå¦‚æœåœ¨sqlè¯­å¥åé¢åŠ äº†â€™;â€™ï¼Œé‚£ä¹ˆsqlè¯­å¥å°±å˜æˆäº†</strong>â€˜select * from t_blog;limit 5â€™**,æ­¤æ—¶å°±ä¼šæŠ¥é”™ã€‚</p><h2 id="4-ç¼–å†™Controller"><a href="#4-ç¼–å†™Controller" class="headerlink" title="4.ç¼–å†™Controller"></a>4.ç¼–å†™Controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhb.blogs.controller.admin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.zhb.blogs.pojo.Blog;</span><br><span class="line"><span class="keyword">import</span> com.zhb.blogs.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.zhb.blogs.service.BlogService;</span><br><span class="line"><span class="keyword">import</span> com.zhb.blogs.service.TagService;</span><br><span class="line"><span class="keyword">import</span> com.zhb.blogs.service.TypeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.support.RedirectAttributes;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlogController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BlogService blogService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/blogs&quot;)</span>  <span class="comment">//åå°æ˜¾ç¤ºåšå®¢åˆ—è¡¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">blogs</span><span class="params">(<span class="meta">@RequestParam(required = false,defaultValue = &quot;1&quot;,value = &quot;pagenum&quot;)</span><span class="keyword">int</span> pagenum, Model model)</span></span>&#123;</span><br><span class="line">        PageHelper.startPage(pagenum, <span class="number">5</span>);</span><br><span class="line">        List&lt;Blog&gt; allBlog = blogService.getAllBlog();<span class="comment">//è·å–æ‰€æœ‰blog</span></span><br><span class="line">        PageInfo pageInfo = <span class="keyword">new</span> PageInfo(allBlog);<span class="comment">//å¾—åˆ°åˆ†é¡µç»“æœå¯¹è±¡</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageInfo&quot;</span>, pageInfo);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;admin/blogs&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-ç¼–å†™å‰ç«¯"><a href="#5-ç¼–å†™å‰ç«¯" class="headerlink" title="5.ç¼–å†™å‰ç«¯"></a>5.ç¼–å†™å‰ç«¯</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui floated pagination menu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;ui blue info message&quot;</span>&gt;</span>å½“å‰ç¬¬<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;pageInfo.pageNum&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>é¡µï¼Œæ€»<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;pageInfo.pages&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>é¡µï¼Œå…±<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;pageInfo.total&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>æ¡è®°å½•<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right aligned column&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui right floated pagination menu&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;pageInfo.pages&gt;1&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/&#125;&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/(pagenum=$&#123;pageInfo.hasPreviousPage&#125;?$&#123;pageInfo.prePage&#125;:1)&#125;&quot;</span>&gt;</span>ä¸Šä¸€é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/(pagenum=$&#123;pageInfo.hasNextPage&#125;? $&#123;pageInfo.nextPage&#125;:$&#123;pageInfo.pages&#125;)&#125;&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/(pagenum=$&#123;pageInfo.pages&#125;)&#125;&quot;</span>&gt;</span>å°¾é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="6-ç»“æœ"><a href="#6-ç»“æœ" class="headerlink" title="6.ç»“æœ"></a>6.ç»“æœ</h2><p><img src="https://i.loli.net/2021/04/18/7IcP8EVo9GdXFZw.png" alt="ç»“æœ"></p>]]></content>
      
      
      <categories>
          
          <category> Javaæ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootè‡ªåŠ¨è£…é…åŸç†åˆæ¢</title>
      <link href="/2021/07/04/Springboot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86%E5%88%9D%E6%8E%A2/"/>
      <url>/2021/07/04/Springboot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86%E5%88%9D%E6%8E%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="springBootè‡ªåŠ¨è£…é…åŸç†"><a href="#springBootè‡ªåŠ¨è£…é…åŸç†" class="headerlink" title="springBootè‡ªåŠ¨è£…é…åŸç†"></a>springBootè‡ªåŠ¨è£…é…åŸç†</h1><p>æ‘˜æŠ„äº<a href="https://www.cnblogs.com/shamo89/p/8184960.html%EF%BC%8Chttps://www.cnblogs.com/hellokuangshen/p/12450327.html">https://www.cnblogs.com/shamo89/p/8184960.htmlï¼Œhttps://www.cnblogs.com/hellokuangshen/p/12450327.html</a></p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span><span class="comment">// ç»§æ‰¿äº†Configurationï¼Œè¡¨ç¤ºå½“å‰æ˜¯é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ComponentScan</span><span class="comment">// è‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶æˆ–è€…bean ï¼Œ å°†è¿™ä¸ªbeanå®šä¹‰åŠ è½½åˆ°IOCå®¹å™¨ä¸­</span></span><br><span class="line"><span class="comment">//@EnableAutoConfigurationä¹Ÿæ˜¯å€ŸåŠ©@Importçš„å¸®åŠ©ï¼Œå°†æ‰€æœ‰ç¬¦åˆè‡ªåŠ¨é…ç½®æ¡ä»¶çš„beanå®šä¹‰åŠ è½½åˆ°IOCå®¹å™¨</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span><span class="comment">// å¼€å¯springbootçš„æ³¨è§£åŠŸèƒ½ï¼Œspringbootçš„å››å¤§ç¥å™¨ä¹‹ä¸€ï¼Œå…¶å€ŸåŠ©@importçš„å¸®åŠ©</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span><span class="comment">// è‡ªåŠ¨é…ç½®åŒ…æ³¨å†Œ</span></span><br><span class="line"><span class="meta">@Import(AutoConfigurationPackages.Registrar.class)</span><span class="comment">// å¯¼å…¥å½“å‰ä¸»ç¨‹åºç±»çš„ *åŒçº§ä»¥åŠå­çº§*çš„åŒ…ç»„ä»¶</span></span><br><span class="line"><span class="meta">@Import(AutoConfigurationImportSelector.class)</span><span class="comment">// å¯¼å…¥è‡ªåŠ¨é…ç½®çš„ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span>ä¸»è¦åšäº†ä»¥ä¸‹å››ä»¶äº‹æƒ…ï¼š</span><br><span class="line"><span class="number">1</span>ã€æ¨æ–­åº”ç”¨çš„ç±»å‹æ˜¯æ™®é€šçš„é¡¹ç›®è¿˜æ˜¯Webé¡¹ç›®</span><br><span class="line"><span class="number">2</span>ã€æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨åˆå§‹åŒ–å™¨ï¼Œè®¾ç½®åˆ°initializerså±æ€§ä¸­</span><br><span class="line"><span class="number">3</span>ã€æ‰¾å‡ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºç›‘å¬å™¨ï¼Œè®¾ç½®åˆ°listenerså±æ€§ä¸­</span><br><span class="line"><span class="number">4</span>ã€æ¨æ–­å¹¶è®¾ç½®mainæ–¹æ³•çš„å®šä¹‰ç±»ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»ç±»</span><br></pre></td></tr></table></figure></blockquote><p>@ComponentScançš„åŠŸèƒ½å…¶å®å°±æ˜¯è‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶ï¼ˆæ¯”å¦‚@Componentå’Œ@Repositoryç­‰ï¼‰æˆ–è€…beanå®šä¹‰ï¼Œæœ€ç»ˆå°†è¿™äº›beanå®šä¹‰åŠ è½½åˆ°IoCå®¹å™¨ä¸­ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡basePackagesç­‰å±æ€§æ¥ç»†ç²’åº¦çš„å®šåˆ¶@ComponentScanè‡ªåŠ¨æ‰«æçš„èŒƒå›´ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤Springæ¡†æ¶å®ç°ä¼šä»å£°æ˜@ComponentScanæ‰€åœ¨ç±»çš„packageè¿›è¡Œæ‰«æã€‚</p><blockquote><p>æ³¨ï¼šæ‰€ä»¥SpringBootçš„å¯åŠ¨ç±»æœ€å¥½æ˜¯æ”¾åœ¨root packageä¸‹ï¼Œå› ä¸ºé»˜è®¤ä¸æŒ‡å®šbasePackagesã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Registrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span>, <span class="title">DeterminableImports</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata metadata, BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line">register(registry, <span class="keyword">new</span> PackageImports(metadata).getPackageNames().toArray(<span class="keyword">new</span> String[<span class="number">0</span>]));</span><br><span class="line">            <span class="comment">//new PackageImport(metadata).getPackageName()ï¼Œå®ƒå…¶å®è¿”å›äº†å½“å‰ä¸»ç¨‹åºç±»çš„ *åŒçº§ä»¥åŠå­çº§*çš„åŒ…ç»„ä»¶</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AutoConfigurationImportSelector ç»§æ‰¿äº† DeferredImportSelector ç»§æ‰¿äº† ImportSelector</span><br><span class="line"></span><br><span class="line">ImportSelectorä¸­å£°æ˜äº†ä¸€ä¸ªæ–¹æ³•ä¸ºï¼šselectImportsã€‚</span><br><span class="line">AutoConfigurationImportSelectorå®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼šselectImports </span><br><span class="line">    ä½œç”¨æ˜¯ï¼šåŠ è½½å¤–éƒ¨æ–‡ä»¶ï¼ˆspring-boot-autoconfigurationä¸‹çš„META-INF/spring.factoriesï¼‰</span><br><span class="line">    è¿™ä¸ªå¤–éƒ¨æ–‡ä»¶ï¼Œæœ‰å¾ˆå¤šè‡ªåŠ¨é…ç½®çš„ç±»</span><br></pre></td></tr></table></figure><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/1335795-20181025172502394-39889528.jpg" alt="img"></p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/1112095-20181115230505205-305138350.png" alt="img"></p><p><img src="https://zhb-blog-imgs.oss-cn-beijing.aliyuncs.com/1418974-20200309184347408-1065424525.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Javaæ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springäº‹åŠ¡</title>
      <link href="/2021/07/04/Spring%E4%BA%8B%E5%8A%A1/"/>
      <url>/2021/07/04/Spring%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="Springäº‹åŠ¡"><a href="#Springäº‹åŠ¡" class="headerlink" title="Springäº‹åŠ¡"></a>Springäº‹åŠ¡</h1><h2 id="Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h2><p>å°±æ˜¯æ•°æ®åº“çš„4ä¸ªéš”ç¦»çº§åˆ«+1ä¸ªSpringé»˜è®¤éš”ç¦»çº§åˆ«</p><ul><li>Springé»˜è®¤éš”ç¦»çº§åˆ«ï¼šoracleä¸ºè¯»å·²æäº¤ï¼Œmysqlä¸ºå¯é‡å¤è¯»</li><li>è¯»æœªæäº¤</li><li>è¯»å·²æäº¤</li><li>å¯é‡å¤è¯»</li><li>åºåˆ—åŒ–</li></ul><h2 id="Springäº‹åŠ¡çš„ä¼ æ’­çº§åˆ«"><a href="#Springäº‹åŠ¡çš„ä¼ æ’­çº§åˆ«" class="headerlink" title="Springäº‹åŠ¡çš„ä¼ æ’­çº§åˆ«"></a>Springäº‹åŠ¡çš„ä¼ æ’­çº§åˆ«</h2><p>æœ‰äº‹åŠ¡Aã€Bï¼Œäº‹åŠ¡Aä¸­è°ƒç”¨äº‹åŠ¡Bï¼ŒAä¸ºçˆ¶äº‹åŠ¡ï¼ŒBä¸ºå­äº‹åŠ¡</p><p>ä¼ æ’­çº§åˆ«ç”¨äºä¿®é¥°B</p><p>ä¿è¯åŒä¸€ä¸ªäº‹åŠ¡ä¸­</p><ul><li>REQUIRED æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœä¸å­˜åœ¨ å°±æ–°å»ºä¸€ä¸ª(é»˜è®¤)</li><li>SUPPORTS æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¸ä½¿ç”¨äº‹åŠ¡</li><li>MANDATORY æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸</li></ul><p>ä¿è¯æ²¡æœ‰åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­</p><ul><li>REQUIRES_NEW å¦‚æœæœ‰äº‹åŠ¡å­˜åœ¨ï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡</li><li>NOT_SUPPORTED ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœæœ‰äº‹åŠ¡å­˜åœ¨ï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡</li><li>NEVER ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœæœ‰äº‹åŠ¡å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸</li><li>NESTED å¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨ï¼Œåˆ™åµŒå¥—äº‹åŠ¡æ‰§è¡Œï¼ˆçˆ¶äº‹åŠ¡å›æ»šï¼Œå­äº‹åŠ¡ä¸€å®šå›æ»šï¼Œä½†æ˜¯å­äº‹åŠ¡å›æ»šï¼Œä¸å½±å“çˆ¶äº‹åŠ¡å›æ»šï¼‰</li></ul><h2 id="Springäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ"><a href="#Springäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ" class="headerlink" title="Springäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ"></a>Springäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ</h2><ul><li><p>è‡ªè°ƒç”¨</p><ul><li>ç±»ä¸­è°ƒç”¨æœ¬ç±»çš„æ–¹æ³•ï¼Œè§£å†³åŠæ³•ï¼šè®¾ç½®ä¸ºä»£ç†ç±»ï¼Œç”±ä»£ç†ç±»æ¥æ‰§è¡Œ</li></ul></li><li><p>æ–¹æ³•ä¸æ˜¯public</p><ul><li>@Transactionlï¼ˆæ³¨è§£æ–¹å¼ï¼‰åªèƒ½ç”¨äºpublicæ–¹æ³•ï¼Œå¦åˆ™äº‹åŠ¡ä¼šå¤±æ•ˆ</li></ul></li><li><p>æ•°æ®åº“ä¸æ”¯æŒäº‹åŠ¡</p></li><li><p>æ²¡æœ‰äº¤ç”±Springç®¡ç†</p></li><li><p>å¼‚å¸¸è¢«åƒæ‰ï¼Œäº‹åŠ¡ä¸ä¼šå›æ»šï¼ˆæˆ–è€…æŠ›å‡ºçš„å¼‚å¸¸æœªè¢«å®šä¹‰ï¼Œé»˜è®¤ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ï¼‰</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Javaæ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springå¾ªç¯ä¾èµ–çš„è§£å†³</title>
      <link href="/2021/07/04/Spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84%E8%A7%A3%E5%86%B3/"/>
      <url>/2021/07/04/Spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="Springå¾ªç¯ä¾èµ–çš„è§£å†³"><a href="#Springå¾ªç¯ä¾èµ–çš„è§£å†³" class="headerlink" title="Springå¾ªç¯ä¾èµ–çš„è§£å†³"></a>Springå¾ªç¯ä¾èµ–çš„è§£å†³</h1><p>å‚è€ƒäºï¼š<a href="https://www.cnblogs.com/daimzh/p/13256413.html">é¢è¯•å¿…æ€æŠ€ï¼Œè®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ– - ç¨‹åºå‘˜DMZ - åšå®¢å›­ (cnblogs.com)</a></p><p>å°æç¤ºï¼šä¸€çº§ç¼“å­˜ä¸ºå•ä¾‹æ± </p><p>æœ‰Aã€Bä¸¤ä¸ªBean</p><ol><li>äºŒçº§ç¼“å­˜ï¼ˆæœªä½¿ç”¨AOPï¼‰<ol><li>åªéœ€å­˜å‚¨ä¸€ä¸ªAçš„åŸå§‹å¯¹è±¡ï¼ˆäºŒçº§ç¼“å­˜ï¼‰ï¼Œå½“Bæ³¨å…¥Aæ—¶ï¼Œè·å–å½“Açš„åŸå§‹å¯¹è±¡</li><li>é€šè¿‡Aå¯¹è±¡åˆ›å»ºä¸€ä¸ªå·¥å‚ï¼ˆä¸‰çº§ç¼“å­˜ï¼‰ï¼Œå½“Bæ³¨å…¥Aæ—¶ï¼Œä»å·¥å‚ä¸­è·å–ä¸€ä¸ªAå¯¹è±¡ï¼ˆå…¶å®å¯ä»¥ç›´æ¥ç”¨ä¸Šé¢ä¸€ç§æ–¹å¼ï¼‰</li></ol></li><li>ä¸‰æ¬¡ç¼“å­˜ï¼ˆä½¿ç”¨äº†AOPï¼‰<ol><li>é€šè¿‡Aå¯¹è±¡åˆ›å»ºä¸€ä¸ªå·¥å‚ï¼ˆä¸‰çº§ç¼“å­˜ï¼‰ï¼Œå½“Bæ³¨å…¥Aæ—¶ï¼Œä»å·¥å‚ä¸­è·å–ä¸€ä¸ª<strong>Aå¯¹è±¡çš„ä»£ç†å¯¹è±¡</strong></li></ol></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>äº†è§£è¯¦ç»†è¯·å‰å¾€ï¼š<a href="https://www.cnblogs.com/daimzh/p/13256413.html">é¢è¯•å¿…æ€æŠ€ï¼Œè®²ä¸€è®²Springä¸­çš„å¾ªç¯ä¾èµ– - ç¨‹åºå‘˜DMZ - åšå®¢å›­ (cnblogs.com)</a></strong></p><p>é¢è¯•å®˜ï¼šâ€Springæ˜¯å¦‚ä½•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Ÿâ€œ</p><p>ç­”ï¼šSpringé€šè¿‡ä¸‰çº§ç¼“å­˜è§£å†³äº†å¾ªç¯ä¾èµ–ï¼Œå…¶ä¸­ä¸€çº§ç¼“å­˜ä¸ºå•ä¾‹æ± ï¼ˆ<code>singletonObjects</code>ï¼‰,äºŒçº§ç¼“å­˜ä¸ºæ—©æœŸæ›å…‰å¯¹è±¡<code>earlySingletonObjects</code>ï¼Œä¸‰çº§ç¼“å­˜ä¸ºæ—©æœŸæ›å…‰å¯¹è±¡å·¥å‚ï¼ˆ<code>singletonFactories</code>ï¼‰ã€‚å½“Aã€Bä¸¤ä¸ªç±»å‘ç”Ÿå¾ªç¯å¼•ç”¨æ—¶ï¼Œåœ¨Aå®Œæˆå®ä¾‹åŒ–åï¼Œå°±ä½¿ç”¨å®ä¾‹åŒ–åçš„å¯¹è±¡å»åˆ›å»ºä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œå¹¶æ·»åŠ åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œå¦‚æœAè¢«AOPä»£ç†ï¼Œé‚£ä¹ˆé€šè¿‡è¿™ä¸ªå·¥å‚è·å–åˆ°çš„å°±æ˜¯Aä»£ç†åçš„å¯¹è±¡ï¼Œå¦‚æœAæ²¡æœ‰è¢«AOPä»£ç†ï¼Œé‚£ä¹ˆè¿™ä¸ªå·¥å‚è·å–åˆ°çš„å°±æ˜¯Aå®ä¾‹åŒ–çš„å¯¹è±¡ã€‚å½“Aè¿›è¡Œå±æ€§æ³¨å…¥æ—¶ï¼Œä¼šå»åˆ›å»ºBï¼ŒåŒæ—¶Båˆä¾èµ–äº†Aï¼Œæ‰€ä»¥åˆ›å»ºBçš„åŒæ—¶åˆä¼šå»è°ƒç”¨getBean(a)æ¥è·å–éœ€è¦çš„ä¾èµ–ï¼Œæ­¤æ—¶çš„getBean(a)ä¼šä»ç¼“å­˜ä¸­è·å–ï¼Œç¬¬ä¸€æ­¥ï¼Œå…ˆè·å–åˆ°ä¸‰çº§ç¼“å­˜ä¸­çš„å·¥å‚ï¼›ç¬¬äºŒæ­¥ï¼Œè°ƒç”¨å¯¹è±¡å·¥å·¥å‚çš„getObjectæ–¹æ³•æ¥è·å–åˆ°å¯¹åº”çš„å¯¹è±¡ï¼Œå¾—åˆ°è¿™ä¸ªå¯¹è±¡åå°†å…¶æ³¨å…¥åˆ°Bä¸­ã€‚ç´§æ¥ç€Bä¼šèµ°å®Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæµç¨‹ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ã€åç½®å¤„ç†å™¨ç­‰ã€‚å½“Båˆ›å»ºå®Œåï¼Œä¼šå°†Bå†æ³¨å…¥åˆ°Aä¸­ï¼Œæ­¤æ—¶Aå†å®Œæˆå®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚è‡³æ­¤ï¼Œå¾ªç¯ä¾èµ–ç»“æŸï¼</p><p>é¢è¯•å®˜ï¼šâ€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸‰çº§ç¼“å­˜å‘¢ï¼ŸäºŒçº§ç¼“å­˜èƒ½è§£å†³å¾ªç¯ä¾èµ–å—ï¼Ÿâ€œ</p><p>ç­”ï¼šå¦‚æœè¦ä½¿ç”¨äºŒçº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–ï¼Œæ„å‘³ç€æ‰€æœ‰Beanåœ¨å®ä¾‹åŒ–åå°±è¦å®ŒæˆAOPä»£ç†ï¼Œè¿™æ ·è¿èƒŒäº†Springè®¾è®¡çš„åŸåˆ™ï¼ŒSpringåœ¨è®¾è®¡ä¹‹åˆå°±æ˜¯é€šè¿‡<code>AnnotationAwareAspectJAutoProxyCreator</code>è¿™ä¸ªåç½®å¤„ç†å™¨æ¥åœ¨Beanç”Ÿå‘½å‘¨æœŸçš„æœ€åä¸€æ­¥æ¥å®ŒæˆAOPä»£ç†ï¼Œè€Œä¸æ˜¯åœ¨å®ä¾‹åŒ–åå°±ç«‹é©¬è¿›è¡ŒAOPä»£ç†</p>]]></content>
      
      
      <categories>
          
          <category> Javaæ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2021/07/04/Spring%E4%B8%ADBean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/2021/07/04/Spring%E4%B8%ADBean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ"></a>Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ</h1><p>å‚è€ƒäºï¼š<a href="https://zhuanlan.zhihu.com/p/344140024">é¢è¯•å®˜ï¼šè¯·ä½ è¯´ä¸€ä¸‹ Bean çš„ç”Ÿå‘½å‘¨æœŸ - çŸ¥ä¹ (zhihu.com)</a></p><ol><li>å®ä¾‹åŒ–Beanå¯¹è±¡</li><li>å±æ€§æ³¨å…¥<ol><li>æ„é€ å™¨æ³¨å…¥</li><li>setteræ–¹æ³•æ³¨å…¥</li><li>æ¥å£æ³¨å…¥</li></ol></li><li>æ£€æµ‹Awareæ¥å£<ol><li>BeanNameAware<ol><li>å¦‚æœæœ‰å®ç°ï¼Œåˆ™è°ƒç”¨setBeanNameæ–¹æ³•</li></ol></li><li>BeanFactoryAware<ol><li>å¦‚æœæœ‰å®ç°ï¼Œåˆ™è°ƒç”¨setBeanFactoryæ–¹æ³•</li></ol></li><li>ApplicationContextAware<ol><li>å¦‚æœæœ‰å®ç°ï¼Œåˆ™è°ƒç”¨setApplicationContextæ–¹æ³•</li></ol></li></ol></li><li>æ£€æµ‹BeanPostProcessoræ¥å£<ol><li>å¦‚æœæœ‰å®ç°ï¼Œåˆ™è°ƒç”¨postProcessBeforeInitialization()æ–¹æ³•</li></ol></li><li>æ£€æµ‹InitializingBeanæ¥å£<ol><li>å¦‚æœæœ‰å®ç°ï¼Œåˆ™è°ƒç”¨afterPropertiesSet()æ–¹æ³•</li><li>å¦‚æœBeanæœ‰ä½¿ç”¨init-methodå£°æ˜åˆå§‹åŒ–æ–¹æ³•ï¼Œå°±è°ƒç”¨è¯¥åˆå§‹åŒ–æ–¹æ³•</li></ol></li><li>æ£€æµ‹BeanPostProcessoræ¥å£<ol><li>å¦‚æœæœ‰å®ç°ï¼Œåˆ™è°ƒç”¨postProcessAfterInitialization()æ–¹æ³•</li></ol></li><li>åˆå§‹åŒ–å®Œæˆï¼Œå¯ä»¥è¢«ä½¿ç”¨</li><li>æ£€æµ‹DisposableBeanæ¥å£<ol><li>å¦‚æœæœ‰å®ç°ï¼Œåˆ™è°ƒç”¨destory()æ–¹æ³•</li><li>å¦‚æœBeanæœ‰ä½¿ç”¨destory-methodå£°æ˜é”€æ¯æ–¹æ³•ï¼Œå°±è°ƒç”¨è¯¥é”€æ¯æ–¹æ³•</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Javaæ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stringã€StringBufferã€StringBuilder</title>
      <link href="/2021/07/04/String%E3%80%81StringBuffer%E3%80%81StringBuilder/"/>
      <url>/2021/07/04/String%E3%80%81StringBuffer%E3%80%81StringBuilder/</url>
      
        <content type="html"><![CDATA[<h1 id="Stringã€StringBufferã€StringBuilder"><a href="#Stringã€StringBufferã€StringBuilder" class="headerlink" title="Stringã€StringBufferã€StringBuilder"></a>Stringã€StringBufferã€StringBuilder</h1><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>ã€ä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„åŒºåˆ«ã€‘</p><ol><li><p> ç›´æ¥èµ‹å€¼ï¼ˆString str = â€œhelloâ€;ï¼‰:åªå¼€è¾Ÿä¸€å—å †å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å…¥æ± ï¼Œä¸ä¼šäº§ç”Ÿåƒåœ¾ã€‚</p></li><li><p> æ„é€ æ–¹æ³•ï¼ˆString str= new String(â€œhelloâ€);ï¼‰:ä¼šå¼€è¾Ÿä¸¤å—å †å†…å­˜ç©ºé—´ï¼Œå…¶ä¸­ä¸€å—å †å†…å­˜ä¼šå˜æˆåƒåœ¾è¢«ç³»ç»Ÿå›æ”¶ï¼Œè€Œä¸”ä¸èƒ½å¤Ÿè‡ªåŠ¨å…¥æ± ï¼Œéœ€è¦é€šè¿‡public String intern();æ–¹æ³•è¿›è¡Œæ‰‹å·¥å…¥æ± ã€‚</p></li><li><p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¸ä¼šé‡‡ç”¨æ„é€ æ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²çš„å®ä¾‹åŒ–</p><p><img src="https://i.loli.net/2021/04/24/oE92PriqN3Gkf1j.png" alt="æ„é€ æ–¹æ³•èµ‹å€¼"></p></li></ol><h2 id="StringBuffer"><a href="#StringBuffer" class="headerlink" title="StringBuffer"></a>StringBuffer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">StringBuffer</span></span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractStringBuilder</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">CharSequence</span></span>&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> StringBuffer <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        toStringCache = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">super</span>.append(str);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">StringBuilder</span></span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">AbstractStringBuilder</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">CharSequence</span></span>&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> StringBuilder <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.append(str);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰§è¡Œé€Ÿåº¦"><a href="#æ‰§è¡Œé€Ÿåº¦" class="headerlink" title="æ‰§è¡Œé€Ÿåº¦"></a>æ‰§è¡Œé€Ÿåº¦</h2><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸‰è€…åœ¨æ‰§è¡Œé€Ÿåº¦æ–¹é¢çš„æ¯”è¾ƒï¼šStringBuilder &gt; StringBuffer &gt; String</p><p>è¯¦æƒ…è¯·å‰å¾€ï¼š<a href="https://blog.csdn.net/rmn190/article/details/1492013">String,StringBufferä¸StringBuilderçš„åŒºåˆ«??_Javaå¤©ç©º-CSDNåšå®¢</a> æˆ–è€… <a href="https://www.kuangstudy.com/">é¦–é¡µ-KuangStudy</a>æŸ¥è¯¢</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><ul><li><p>String å­—ç¬¦ä¸²å¸¸é‡</p></li><li><p>StringBuffer å­—ç¬¦ä¸²å˜é‡ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</p></li><li><p>StringBuilder å­—ç¬¦ä¸²å˜é‡ï¼ˆéçº¿ç¨‹å®‰å…¨ï¼Œæ‰§è¡Œé€Ÿåº¦æœ€å¿«ï¼‰</p></li><li><p>å¯¹äºä¸‰è€…ä½¿ç”¨çš„æ€»ç»“ï¼š</p><p>1ï¼‰å¦‚æœè¦æ“ä½œå°‘é‡çš„æ•°æ®ç”¨ = String</p><p>2ï¼‰å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBuilder</p><p>3ï¼‰å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBuffer</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> string </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>urlè®¿é—®è¿‡ç¨‹</title>
      <link href="/2021/07/04/url%E8%AE%BF%E9%97%AE%E8%BF%87%E7%A8%8B/"/>
      <url>/2021/07/04/url%E8%AE%BF%E9%97%AE%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="å½“ä½ ä»æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥URLå›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ"><a href="#å½“ä½ ä»æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥URLå›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ" class="headerlink" title="å½“ä½ ä»æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥URLå›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ"></a>å½“ä½ ä»æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥URLå›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ</h1><p>å‚è€ƒäºï¼š<a href="https://blog.csdn.net/u013363501/article/details/63692528">å½“ä½ ä»æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥URLå›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ_åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹-CSDNåšå®¢</a></p><ol><li><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åŸŸå</p><p>ä¾‹å¦‚<a href="http://www.zhuhebin.com/">www.zhuhebin.com</a></p></li><li><p>æŸ¥è¯¢æµè§ˆå™¨ç¼“å­˜</p></li><li><p>æŸ¥è¯¢æœ¬æœºçš„hostsæ–‡ä»¶(C:\Windows\System32\drivers\etc\hosts)</p></li><li><p>æŸ¥è¯¢æœ¬åœ°åŸŸåæœåŠ¡å™¨</p></li><li><p>ç”±æœ¬åœ°åŸŸåæœåŠ¡å™¨å»è®¿é—®æ ¹åŸŸåæœåŠ¡å™¨ï¼Œè·å–é¡¶çº§åŸŸåæœåŠ¡å™¨â€comâ€çš„IPåœ°å€</p></li><li><p>ç”±æœ¬åœ°åŸŸåæœåŠ¡å™¨å»è®¿é—®é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè·å–æƒé™åŸŸåæœåŠ¡å™¨â€zhb.comâ€çš„IPåœ°å€</p></li><li><p>ç”±æœ¬åœ°åŸŸåæœåŠ¡å™¨å»è®¿é—®æƒé™åŸŸåæœåŠ¡å™¨ï¼Œè·å–â€<a href="http://www.zhuhebin.com&quot;çš„ipåœ°å€/">www.zhuhebin.com&quot;çš„IPåœ°å€</a></p></li><li><p>æœ¬åœ°åŸŸåæœåŠ¡å™¨å°†æŸ¥è¯¢ç»“æœè¿”å›ä¸»æœº(æ­¤æ—¶æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¼šä¿ç•™ä¸€ä»½ç¼“å­˜)</p></li><li><p>ä¸»æœºè®¿é—®è¯¥åŸŸå</p></li><li><p>å‘èµ·TCPçš„ä¸‰æ¬¡æ¡æ‰‹</p><ol><li>Aâ€“&gt;B   SYN=1,seq=x</li><li>Bâ€“&gt;A   SYN=1,ACK=1,ack=x+1,seq=y</li><li>Aâ€“&gt;B   ACK=1,ack=y+1,seq=x+1</li></ol></li><li><p>åœ¨å»ºç«‹TCPè¿æ¥åï¼Œå‘èµ·HTTPè¯·æ±‚</p></li><li><p>æœåŠ¡å™¨ç»™æµè§ˆå™¨è¿›è¡Œä¸€ä¸ª301æ°¸ä¹…é‡å®šå‘å“åº”ã€‚(è¯¥IPå¯¹åº”çš„æœåŠ¡å™¨å¾ˆå¯èƒ½æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œæ¯”å¦‚ä½ è¾“å…¥â€œ<a href="http://baidu.com/">http://baidu.com</a>â€,è€Œä¸æ˜¯â€œ<a href="http://www.baidu.com/">http://www.baidu.com</a>â€,æŒ‰é“ç†è¿™ä¸¤ä¸ªç½‘å€å¯¹åº”çš„æ˜¯åŒä¸€ä¸ªç½‘é¡µï¼Œå› æ­¤é€šè¿‡ä»£ç†æœåŠ¡å™¨çš„æ–¹å¼è¿›è¡Œé‡å®šå‘ç›¸åº”ï¼Œè®©è¿™ä¸¤ä¸ªç½‘å€è®¿é—®çš„æ˜¯åŒä¸€ä¸ªç½‘é¡µã€‚)</p></li><li><p>æµè§ˆå™¨æ ¹æ®é‡å®šå‘åœ°å€å†æ¬¡è¿›è¡ŒHTTPè¯·æ±‚</p></li><li><p>æœåŠ¡å™¨æ¥å—è¯·æ±‚å¹¶è¿”å› HTTP å“åº”</p></li><li><p>å®¢æˆ·ç«¯æµè§ˆå™¨è§£æ HTML å†…å®¹</p></li><li><p>â€¦â€¦</p></li><li><p>é‡Šæ”¾TCPè¿æ¥(å››æ¬¡æŒ¥æ‰‹)</p><ol><li>Aâ€“&gt;B  FIN=1,seq=u</li><li>Bâ€“&gt;A  ACK=1,ack=u+1,seq=v</li><li>Bâ€“&gt;A  FIN=1,ACK=1,ack=u+1,seq=w</li><li>Aâ€“&gt;B  ACK=1,ack=w+1,seq=u+1</li><li>Aä¼šå†ç­‰å¾…2MSL(æœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½)ï¼Œç¡®ä¿Bæ¥æ”¶åˆ°Açš„å“åº”</li></ol></li></ol><p><img src="https://i.loli.net/2021/05/15/Lh1j2xBWNHKP4gO.png" alt="è®¿é—®ç½‘å€.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
            <tag> url </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šçº¿ç¨‹å°ç»“</title>
      <link href="/2021/07/04/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B0%8F%E7%BB%93/"/>
      <url>/2021/07/04/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤šçº¿ç¨‹å°ç»“"><a href="#å¤šçº¿ç¨‹å°ç»“" class="headerlink" title="å¤šçº¿ç¨‹å°ç»“"></a>å¤šçº¿ç¨‹å°ç»“</h1><p>å‚è€ƒäºï¼š<a href="https://www.kuangstudy.com/">é¦–é¡µ-KuangStudy</a> </p><p><a href="https://blog.csdn.net/pange1991/article/details/53860651">https://blog.csdn.net/pange1991/article/details/53860651</a></p><h2 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹</h2><p>çº¿ç¨‹ï¼šé€šå¸¸åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒ…å«è‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œå½“ç„¶ä¸€ä¸ªè¿›ç¨‹ä¸­è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸ç„¶æ²¡æœ‰å­˜åœ¨çš„æ„ä¹‰ï¼Œçº¿ç¨‹å¯ä»¥åˆ©ç”¨è¿›ç¨‹æ‰€æœ‰æ‹¥æœ‰çš„èµ„æºã€‚åœ¨å¼•å…¥çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸éƒ½æ˜¯æŠŠè¿›ç¨‹ä½œä¸ºåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œè€ŒæŠŠçº¿ç¨‹ä½œä¸ºç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œç”±äºçº¿ç¨‹æ¯”è¿›ç¨‹å°ï¼ŒåŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œæ•…å¯¹å®ƒçš„è°ƒåº¦æ‰€ä»˜å‡ºçš„å¼€é”€å°±ä¼šå°å¾—å¤šï¼Œèƒ½æ›´é«˜æ•ˆçš„æé«˜ç³»ç»Ÿå¤šä¸ªç¨‹åºé—´å¹¶å‘æ‰§è¡Œçš„ç¨‹åº¦ã€‚</p><h2 id="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"><a href="#åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"></a>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</h2><ol><li><p>ç»§æ‰¿Threadç±»(lamdaè¡¨è¾¾å¼ï¼šnew Threadï¼ˆ()-&gt;System.out.println(â€œå¤šçº¿ç¨‹å­¦ä¹ ã€‚ã€‚ã€‚ã€‚â€)ï¼‰.start();)</p><ol><li>è‡ªå®šä¹‰çº¿ç¨‹ç±»ç»§æ‰¿Threadç±»</li><li>é‡å†™run()æ–¹æ³•ï¼Œç¼–å†™çº¿ç¨‹æ‰§è¡Œä½“</li><li>åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹</li></ol></li><li><p>å®ç°Runnableæ¥å£(æ¨èä½¿ç”¨ï¼Œå› ä¸ºJavaå•ç»§æ‰¿çš„å±€é™æ€§)</p><ol><li>è‡ªå®šä¹‰å®ç°Runnableæ¥å£</li><li>å®ç°run()æ–¹æ³•ï¼Œç¼–å†™çº¿ç¨‹æ‰§è¡Œä½“</li><li>åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹</li></ol></li><li><p>å®ç°Callableæ¥å£</p><ol><li>å®ç°Callableæ¥å£ï¼Œéœ€è¦è¿”å›å€¼ç±»å‹ </li><li>é‡å†™call()æ–¹æ³•ï¼Œéœ€è¦æŠ›å‡ºå¼‚å¸¸</li><li>åˆ›å»ºç›®æ ‡å¯¹è±¡<ol><li>æ–¹å¼ä¸€ï¼šé€šè¿‡çº¿ç¨‹æ± <ul><li>åˆ›å»ºæ‰§è¡ŒæœåŠ¡ï¼šExecutorService ser = Executors.newFixedThreadPool(1); </li><li>æäº¤æ‰§è¡Œï¼šFuture<Boolean> future = ser.submit(callable); </li><li>è·å–ç»“æœï¼šboolean r1 = future .get() </li><li>å…³é—­æœåŠ¡ï¼šser.shutdownNow();</li></ul></li><li>æ–¹å¼äºŒï¼šFutureTaskï¼ˆé€‚é…ç±»ï¼‰<ul><li>FutureTask futureTask = new FutureTask(myThread); // é€‚é…ç±» </li><li>new Thread(futureTask,â€Aâ€).start(); // è°ƒç”¨æ‰§è¡Œ </li><li>Integer result = (Integer) futureTask.get(); // è·å–è¿”å›å€¼ </li></ul></li></ol></li></ol></li><li><p>åˆ›å»ºçº¿ç¨‹æ± </p><ol><li><p>ä½¿ç”¨Executorsçš„é™æ€æ–¹æ³•ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ‰ä¸”åªæœ‰ä¸€ä¸ªå›ºå®šçš„çº¿ç¨‹</span></span><br><span class="line">ExecutorService threadPool = Executors.newSingleThreadExecutor();</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œä¸€æ± æœ‰Nä¸ªå›ºå®šçš„çº¿ç¨‹ï¼Œæœ‰å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹</span></span><br><span class="line">ExecutorService threadPool = Executors.newFixedThreadPool(<span class="number">5</span>);<span class="comment">//æ‰§è¡Œé•¿æœŸä»»åŠ¡æ€§èƒ½å¥½</span></span><br><span class="line"><span class="comment">//çº¿ç¨‹æ± æ ¹æ®éœ€è¦åˆ›å»ºæ–°çº¿ç¨‹ï¼Œä½†åœ¨å…ˆæ„å»ºçš„çº¿ç¨‹å¯ç”¨æ—¶å°†é‡ç”¨ä»–ä»¬ã€‚å¯æ‰©å®¹ï¼Œé‡å¼ºåˆ™å¼º</span></span><br><span class="line">ExecutorService threadPool = Executors.newCachedThreadPool();<span class="comment">//æ‰§è¡Œå¾ˆå¤šçŸ­æœŸå¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ</span></span><br><span class="line"><span class="comment">*4. ã€å¼ºåˆ¶ã€‘çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼ï¼Œè¿™æ ·</span></span><br><span class="line"><span class="comment">*çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚</span></span><br><span class="line"><span class="comment">*è¯´æ˜ï¼šExecutors è¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š </span></span><br><span class="line"><span class="comment">*    1ï¼‰FixedThreadPool å’Œ SingleThreadPool:</span></span><br><span class="line"><span class="comment">*å…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´ OOMã€‚</span></span><br><span class="line"><span class="comment">*    2ï¼‰CachedThreadPool å’Œ ScheduledThreadPool:</span></span><br><span class="line"><span class="comment">*å…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ OOMã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li><li><p>çº¿ç¨‹æ± æºç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ThreadPoolExecutor</span><span class="params">(<span class="keyword">int</span> corePoolSize,</span></span></span><br><span class="line"><span class="params"><span class="function">                              <span class="keyword">int</span> maximumPoolSize,</span></span></span><br><span class="line"><span class="params"><span class="function">                              <span class="keyword">long</span> keepAliveTime,</span></span></span><br><span class="line"><span class="params"><span class="function">                              TimeUnit unit,</span></span></span><br><span class="line"><span class="params"><span class="function">                              BlockingQueue&lt;Runnable&gt; workQueue,</span></span></span><br><span class="line"><span class="params"><span class="function">                              ThreadFactory threadFactory,</span></span></span><br><span class="line"><span class="params"><span class="function">                              RejectedExecutionHandler handler)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (corePoolSize &lt; <span class="number">0</span> ||</span><br><span class="line">            maximumPoolSize &lt;= <span class="number">0</span> ||</span><br><span class="line">            maximumPoolSize &lt; corePoolSize ||</span><br><span class="line">            keepAliveTime &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">        <span class="keyword">if</span> (workQueue == <span class="keyword">null</span> || threadFactory == <span class="keyword">null</span> || handler == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        <span class="keyword">this</span>.acc = System.getSecurityManager() == <span class="keyword">null</span> ?</span><br><span class="line">                <span class="keyword">null</span> :</span><br><span class="line">                AccessController.getContext();</span><br><span class="line">        <span class="keyword">this</span>.corePoolSize = corePoolSize;</span><br><span class="line">        <span class="keyword">this</span>.maximumPoolSize = maximumPoolSize;</span><br><span class="line">        <span class="keyword">this</span>.workQueue = workQueue;</span><br><span class="line">        <span class="keyword">this</span>.keepAliveTime = unit.toNanos(keepAliveTime);</span><br><span class="line">        <span class="keyword">this</span>.threadFactory = threadFactory;</span><br><span class="line">        <span class="keyword">this</span>.handler = handler;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>çº¿ç¨‹æ± æºç è§£æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ThreadPoolExecutor</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">int</span> corePoolSize,//æ ¸å¿ƒçº¿ç¨‹æ•°ã€‚åœ¨åˆ›å»ºäº†çº¿ç¨‹æ± åï¼Œçº¿ç¨‹ä¸­æ²¡æœ‰ä»»ä½•çº¿ç¨‹ï¼Œç­‰åˆ°æœ‰ä»»åŠ¡åˆ°æ¥æ—¶æ‰åˆ›å»ºçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ã€‚</span></span></span><br><span class="line"><span class="params"><span class="function">    //é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ›å»ºäº†çº¿ç¨‹æ± åï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸º<span class="number">0</span>ï¼Œ</span></span></span><br><span class="line"><span class="params"><span class="function">    //å½“æœ‰ä»»åŠ¡æ¥ä¹‹åï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œ</span></span></span><br><span class="line"><span class="params"><span class="function">    //å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®è¾¾åˆ°corePoolSizeåï¼Œå°±ä¼šæŠŠåˆ°è¾¾çš„ä»»åŠ¡æ”¾åˆ°ç¼“å­˜é˜Ÿåˆ—å½“ä¸­ã€‚</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">int</span> maximumPoolSize,//æœ€å¤§çº¿ç¨‹æ•°ã€‚è¡¨æ˜çº¿ç¨‹ä¸­æœ€å¤šèƒ½å¤Ÿåˆ›å»ºçš„çº¿ç¨‹æ•°é‡ï¼Œæ­¤å€¼å¿…é¡»å¤§äºç­‰äº<span class="number">1</span></span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">long</span> keepAliveTime,//ç©ºé—²çš„çº¿ç¨‹ä¿ç•™çš„æ—¶é—´ã€‚</span></span></span><br><span class="line"><span class="params"><span class="function">    TimeUnit unit,//ç©ºé—²çº¿ç¨‹çš„ä¿ç•™æ—¶é—´å•ä½</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="comment">/*</span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">    TimeUnit.DAYS; //å¤© </span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">    TimeUnit.HOURS; //å°æ—¶ </span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">    TimeUnit.MINUTES; //åˆ†é’Ÿ </span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">    TimeUnit.SECONDS; //ç§’</span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">        TimeUnit.MILLISECONDS; //æ¯«ç§’ </span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">        TimeUnit.MICROSECONDS; //å¾®å¦™ </span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">        TimeUnit.NANOSECONDS; //çº³ç§’</span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">    */</span></span></span></span><br><span class="line"><span class="params"><span class="function">    BlockingQueue&lt;Runnable&gt; workQueue,//é˜»å¡é˜Ÿåˆ—ï¼Œå­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚å‚æ•°æœ‰ArrayBlockingQueueã€LinkedBlockingQueueã€SynchronousQueueå¯é€‰</span></span></span><br><span class="line"><span class="params"><span class="function">    ThreadFactory threadFactory,//çº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä¸€èˆ¬é»˜è®¤å³å¯</span></span></span><br><span class="line"><span class="params"><span class="function">    RejectedExecutionHandler handler//æ‹’ç»ç­–ç•¥ã€‚é˜»å¡é˜Ÿåˆ—å·²æ»¡ï¼Œä¸”ä»»åŠ¡é‡å¤§äºæœ€å¤§çº¿ç¨‹çš„å¼‚å¸¸å¤„ç†ç­–ç•¥ã€‚å‚æ•°æœ‰</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="comment">/*</span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">ThreadPoolExecutor.AbortPolicy:ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ThreadPoolExecutor.DiscardPolicyï¼šä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ </span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">ThreadPoolExecutor.DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰ ThreadPoolExecutor.CallerRunsPolicyï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡</span></span></span></span><br><span class="line"><span class="comment"><span class="params"><span class="function">*/</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span> </span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºçº¿ç¨‹æ± </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line">ExecutorService threadPool = <span class="keyword">new</span> ThreadPoolExecutor( <span class="number">2</span>,<span class="number">5</span>,<span class="number">2L</span>, TimeUnit.SECONDS, <span class="keyword">new</span> LinkedBlockingDeque&lt;&gt;(<span class="number">3</span>), Executors.defaultThreadFactory(), <span class="keyword">new</span> ThreadPoolExecutor.DiscardPolicy());</span><br></pre></td></tr></table></figure></li><li><p>ThreadPoolExecutor åº•å±‚å·¥ä½œåŸç†</p><p><img src="https://i.loli.net/2021/04/25/zH5G6CfaX1Kv8QP.jpg" alt="1"></p></li></ol></li></ol><h2 id="çº¿ç¨‹çŠ¶æ€"><a href="#çº¿ç¨‹çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çŠ¶æ€"></a>çº¿ç¨‹çŠ¶æ€</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    NEW,</span><br><span class="line">    RUNNABLE,</span><br><span class="line">    BLOCKED,</span><br><span class="line">    WAITING,</span><br><span class="line">    TIMED_WAITING,</span><br><span class="line">    TERMINATED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Javaçº¿ç¨‹çš„6ç§çŠ¶æ€åŠåˆ‡æ¢(é€å½»è®²è§£)</strong> åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/pange1991/article/details/53860651">https://blog.csdn.net/pange1991/article/details/53860651</a></p><ol><li><p>åˆå§‹(NEW)ï¼šæ–°åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä½†è¿˜æ²¡æœ‰è°ƒç”¨start()æ–¹æ³•ã€‚</p></li><li><p>è¿è¡Œ(RUNNABLE)ï¼šJavaçº¿ç¨‹ä¸­å°†å°±ç»ªï¼ˆreadyï¼‰å’Œè¿è¡Œä¸­ï¼ˆrunningï¼‰ä¸¤ç§çŠ¶æ€ç¬¼ç»Ÿçš„ç§°ä¸ºâ€œè¿è¡Œâ€ã€‚<br>çº¿ç¨‹å¯¹è±¡åˆ›å»ºåï¼Œå…¶ä»–çº¿ç¨‹(æ¯”å¦‚mainçº¿ç¨‹ï¼‰è°ƒç”¨äº†è¯¥å¯¹è±¡çš„start()æ–¹æ³•ã€‚è¯¥çŠ¶æ€çš„çº¿ç¨‹ä½äºå¯è¿è¡Œçº¿ç¨‹æ± ä¸­ï¼Œç­‰å¾…è¢«çº¿ç¨‹è°ƒåº¦é€‰ä¸­ï¼Œè·å–CPUçš„ä½¿ç”¨æƒï¼Œæ­¤æ—¶å¤„äºå°±ç»ªçŠ¶æ€ï¼ˆreadyï¼‰ã€‚å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹åœ¨è·å¾—CPUæ—¶é—´ç‰‡åå˜ä¸ºè¿è¡Œä¸­çŠ¶æ€ï¼ˆrunningï¼‰ã€‚</p></li><li><p>é˜»å¡(BLOCKED)ï¼šè¡¨ç¤ºçº¿ç¨‹é˜»å¡äºé”ã€‚</p></li><li><p>ç­‰å¾…(WAITING)ï¼šè¿›å…¥è¯¥çŠ¶æ€çš„çº¿ç¨‹éœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹åšå‡ºä¸€äº›ç‰¹å®šåŠ¨ä½œï¼ˆé€šçŸ¥æˆ–ä¸­æ–­ï¼‰ã€‚</p></li><li><p>è¶…æ—¶ç­‰å¾…(TIMED_WAITING)ï¼šè¯¥çŠ¶æ€ä¸åŒäºWAITINGï¼Œå®ƒå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´åè‡ªè¡Œè¿”å›ã€‚</p></li><li><p>ç»ˆæ­¢(TERMINATED)ï¼šè¡¨ç¤ºè¯¥çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚</p><p><img src="https://i.loli.net/2021/04/25/wJBmAokNiKI5M76.jpg" alt="çº¿ç¨‹çš„çŠ¶æ€å›¾"></p></li></ol><h2 id="æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶"><a href="#æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶" class="headerlink" title="æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶"></a>æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶</h2><ol><li><strong>äº’æ–¥</strong>æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ã€‚</li><li><strong>è¯·æ±‚ä¸ä¿æŒ</strong>æ¡ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li><strong>ä¸å¯å‰¥å¤º</strong>æ¡ä»¶ : è¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚ </li><li><strong>å¾ªç¯ç­‰å¾…</strong>æ¡ä»¶ : è‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li></ol><h2 id="Synchronized-ä¸-Lock-çš„å¯¹æ¯”"><a href="#Synchronized-ä¸-Lock-çš„å¯¹æ¯”" class="headerlink" title="Synchronized ä¸ Lock çš„å¯¹æ¯”"></a>Synchronized ä¸ Lock çš„å¯¹æ¯”</h2><ol><li><p>é¦–å…ˆsynchronizedæ˜¯javaå†…ç½®å…³é”®å­—ï¼Œåœ¨jvmå±‚é¢ï¼›Lockæ˜¯ä¸ªjavaç±»ï¼Œæ˜¯apiå±‚é¢çš„é”ï¼›</p></li><li><p>synchronizedæ— æ³•åˆ¤æ–­æ˜¯å¦è·å–é”çš„çŠ¶æ€ï¼ŒLockå¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”ï¼›</p></li><li><p>Lockåªæœ‰ä»£ç å—é”ï¼Œsynchronizedæœ‰ä»£ç å—é”å’Œæ–¹æ³•é” </p></li><li><p>ä½¿ç”¨Locké”ï¼ŒJVMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½å¥½ã€‚å¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šçš„å­ç±»ï¼‰</p></li><li><p>**synchronized(éšå¼é”)<strong>ä¼šè‡ªåŠ¨é‡Šæ”¾é”(a çº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥ä»£ç ä¼šé‡Šæ”¾é” ï¼›b çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ä¼šé‡Šæ”¾é”)ï¼Œ</strong>Lock(æ˜¾å¼é”)**éœ€åœ¨finallyä¸­æ‰‹å·¥é‡Šæ”¾é”ï¼ˆunlock()æ–¹æ³•é‡Šæ”¾é”ï¼‰ï¼Œå¦åˆ™å®¹æ˜“é€ æˆçº¿ç¨‹æ­»é”ï¼›</p></li><li><p>ç”¨synchronizedå…³é”®å­—çš„ä¸¤ä¸ªçº¿ç¨‹1å’Œçº¿ç¨‹2ï¼Œå¦‚æœå½“å‰çº¿ç¨‹1è·å¾—é”ï¼Œçº¿ç¨‹2çº¿ç¨‹ç­‰å¾…ã€‚å¦‚æœçº¿ç¨‹1é˜»å¡ï¼Œçº¿ç¨‹2åˆ™ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œè€ŒLocké”å°±ä¸ä¸€å®šä¼šç­‰å¾…ä¸‹å»ï¼Œå¦‚æœå°è¯•è·å–ä¸åˆ°é”ï¼Œçº¿ç¨‹å¯ä»¥ä¸ç”¨ä¸€ç›´ç­‰å¾…å°±ç»“æŸäº†ï¼›</p></li><li><p><strong>synchronizedçš„é”å¯é‡å…¥ã€ä¸å¯ä¸­æ–­ã€éå…¬å¹³</strong>ï¼Œè€Œ<strong>Locké”å¯é‡å…¥ã€å¯ä¸­æ–­ã€å¯å…¬å¹³</strong>ï¼ˆä¸¤è€…çš†å¯ï¼‰</p><p><a href="https://www.cnblogs.com/aspirant/p/6930436.html">JAVAé”æœºåˆ¶-å¯é‡å…¥é”,å¯ä¸­æ–­é”ï¼Œå…¬å¹³é”ï¼Œè¯»å†™é”ï¼Œè‡ªæ—‹é”-  åšå®¢å›­ (cnblogs.com)</a></p></li><li><p>Locké”é€‚åˆå¤§é‡åŒæ­¥çš„ä»£ç çš„åŒæ­¥é—®é¢˜ï¼Œsynchronizedé”é€‚åˆä»£ç å°‘é‡çš„åŒæ­¥é—®é¢˜ã€‚</p><p><strong>æç¤ºï¼š</strong>Synchronizedä¸­<strong>ä¸ä½¿ç”¨ifè€Œä½¿ç”¨whileå¯ä»¥é˜²æ­¢è™šå‡å”¤é†’</strong></p></li></ol><h2 id="wait-sleep-çš„åŒºåˆ«"><a href="#wait-sleep-çš„åŒºåˆ«" class="headerlink" title="wait / sleep çš„åŒºåˆ«"></a>wait / sleep çš„åŒºåˆ«</h2><ol><li><p><strong>æ¥è‡ªä¸åŒçš„ç±»</strong></p><p>è¿™ä¸¤ä¸ªæ–¹æ³•æ¥è‡ªä¸åŒçš„ç±»åˆ†åˆ«æ˜¯ï¼Œ<strong>sleepæ¥è‡ªThreadç±»ï¼Œå’Œwaitæ¥è‡ªObjectç±»</strong>ã€‚</p><p>sleepæ˜¯Threadçš„é™æ€ç±»æ–¹æ³•ï¼Œè°è°ƒç”¨çš„è°å»ç¡è§‰ï¼Œå³ä½¿åœ¨açº¿ç¨‹é‡Œè°ƒç”¨äº†bçš„sleepæ–¹æ³•ï¼Œå®é™…ä¸Šè¿˜æ˜¯aå»ç¡è§‰ï¼Œè¦è®©bçº¿ç¨‹ç¡è§‰è¦åœ¨bçš„ä»£ç ä¸­è°ƒç”¨sleepã€‚</p></li><li><p><strong>æœ‰æ²¡æœ‰é‡Šæ”¾é”(é‡Šæ”¾èµ„æº)</strong></p><p>æœ€ä¸»è¦æ˜¯sleepæ–¹æ³•æ²¡æœ‰é‡Šæ”¾é”ï¼Œè€Œwaitæ–¹æ³•é‡Šæ”¾äº†é”ï¼Œä½¿å¾—å…¶ä»–çº¿ç¨‹å¯ä»¥ä½¿ç”¨åŒæ­¥æ§åˆ¶å—æˆ–è€…æ–¹æ³•ã€‚</p><p>sleepæ˜¯çº¿ç¨‹è¢«è°ƒç”¨æ—¶ï¼Œå ç€cpuå»ç¡è§‰ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å ç”¨cpuï¼Œosè®¤ä¸ºè¯¥çº¿ç¨‹æ­£åœ¨å·¥ä½œï¼Œä¸ä¼šè®©å‡ºç³»ç»Ÿèµ„æºï¼Œwaitæ˜¯è¿›å…¥ç­‰å¾…æ± ç­‰å¾…ï¼Œè®©å‡ºç³»ç»Ÿèµ„æºï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥å ç”¨cpuã€‚</p></li><li><p><strong>ä½¿ç”¨èŒƒå›´ä¸åŒ</strong></p><p>waitã€notifyå’ŒnotifyAllåªèƒ½åœ¨åŒæ­¥æ§åˆ¶æ–¹æ³•æˆ–è€…åŒæ­¥æ§åˆ¶å—é‡Œé¢ä½¿ç”¨ï¼Œè€Œsleepå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨</p></li><li><p><strong>æ˜¯å¦éœ€è¦æ•è·å¼‚å¸¸</strong></p><p>sleepå¿…é¡»æ•è·å¼‚å¸¸ï¼Œè€Œwaitï¼Œnotifyå’ŒnotifyAllä¸éœ€è¦æ•è·å¼‚å¸¸ã€‚</p></li></ol><h2 id="8é”é—®é¢˜"><a href="#8é”é—®é¢˜" class="headerlink" title="8é”é—®é¢˜"></a>8é”é—®é¢˜</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* å¤šçº¿ç¨‹çš„8é” </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 1ã€æ ‡å‡†è®¿é—®ï¼Œè¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯çŸ­ä¿¡ï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 2ã€é‚®ä»¶æ–¹æ³•æš‚åœ4ç§’é’Ÿï¼Œè¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯çŸ­ä¿¡ï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 3ã€æ–°å¢ä¸€ä¸ªæ™®é€šæ–¹æ³•hello()æ²¡æœ‰åŒæ­¥,è¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯helloï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 4ã€ä¸¤éƒ¨æ‰‹æœºã€è¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯çŸ­ä¿¡ï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 5ã€ä¸¤ä¸ªé™æ€åŒæ­¥æ–¹æ³•ï¼ŒåŒä¸€éƒ¨æ‰‹æœºï¼Œè¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯çŸ­ä¿¡ï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 6ã€ä¸¤ä¸ªé™æ€åŒæ­¥æ–¹æ³•ï¼Œ2éƒ¨æ‰‹æœºï¼Œè¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯çŸ­ä¿¡ï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 7ã€ä¸€ä¸ªæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œä¸€ä¸ªé™æ€åŒæ­¥æ–¹æ³•ï¼ŒåŒä¸€éƒ¨æ‰‹æœºï¼Œè¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯çŸ­ä¿¡ï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 8ã€ä¸€ä¸ªæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œä¸€ä¸ªé™æ€åŒæ­¥æ–¹æ³•ï¼Œ2éƒ¨æ‰‹æœºï¼Œè¯·é—®å…ˆæ‰“å°é‚®ä»¶è¿˜æ˜¯çŸ­ä¿¡ï¼Ÿ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span> </span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>synchronizedå®ç°åŒæ­¥çš„åŸºç¡€ï¼šjavaä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”å…·ä½“çš„è¡¨ç°ä¸ºä»¥ä¸‹ä¸‰ç§å½¢å¼ï¼š</p><p><strong>å¯¹äºåŒæ­¥ä»£ç å—ï¼Œé”æ˜¯synchronizedæ‹¬å·é‡Œé¢çš„é…ç½®å¯¹è±¡</strong></p><p><strong>å¯¹äºæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡</strong></p><p><strong>å¯¹äºé™æ€åŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰çš„Classå¯¹è±¡ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†…éƒ¨ç±»</title>
      <link href="/2021/07/04/%E5%86%85%E9%83%A8%E7%B1%BB/"/>
      <url>/2021/07/04/%E5%86%85%E9%83%A8%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a><strong>å†…éƒ¨ç±»</strong></h1><p>å‚è€ƒäºï¼š<a href="https://www.jianshu.com/p/0d0bd9046039">https://www.jianshu.com/p/0d0bd9046039</a></p><p><a href="https://www.kuangstudy.com/">https://www.kuangstudy.com/</a></p><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å†…éƒ¨ç±»å°±æ˜¯åœ¨ä¸€ä¸ªç±»çš„å†…éƒ¨åœ¨å®šä¹‰ä¸€ä¸ªç±»</p><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><ul><li>å†…éƒ¨ç±»æ–¹æ³•å¯ä»¥è®¿é—®è¯¥ç±»å®šä¹‰æ‰€åœ¨çš„ä½œç”¨åŸŸçš„æ•°æ®ï¼ŒåŒ…æ‹¬ç§æœ‰çš„æ•°æ®</li><li>å†…éƒ¨ç±»å¯ä»¥å¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»éšè—èµ·æ¥,ä¸€èˆ¬çš„éå†…éƒ¨ç±»ï¼Œæ˜¯ä¸å…è®¸æœ‰ private ä¸protectedæƒé™çš„ï¼Œä½†å†…éƒ¨ç±»å¯ä»¥</li><li>å¯ä»¥å®ç°å¤šé‡ç»§æ‰¿</li><li>å½“æƒ³è¦å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸”ä¸æƒ³ç¼–å†™å¤§é‡ä»£ç æ—¶ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¯”è¾ƒä¾¿æ·</li></ul><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>å†…éƒ¨ç±»åˆ†ä¸ºå››ç§ï¼š</p><ul><li>æˆå‘˜å†…éƒ¨ç±»</li><li>é™æ€å†…éƒ¨ç±»</li><li>å±€éƒ¨å†…éƒ¨ç±»</li><li>åŒ¿åå†…éƒ¨ç±»</li></ul><h3 id="æˆå‘˜å†…éƒ¨ç±»"><a href="#æˆå‘˜å†…éƒ¨ç±»" class="headerlink" title="æˆå‘˜å†…éƒ¨ç±»"></a>æˆå‘˜å†…éƒ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123; </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span></span>&#123; </span><br><span class="line">System.out.println(<span class="string">&quot;è¿™æ˜¯å¤–éƒ¨ç±»æ–¹æ³•&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span></span>&#123; </span><br><span class="line">System.out.println(<span class="string">&quot;è¿™æ˜¯å†…éƒ¨ç±»æ–¹æ³•&quot;</span>); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </span><br><span class="line"><span class="comment">//å®ä¾‹åŒ–æˆå‘˜å†…éƒ¨ç±»åˆ†ä¸¤æ­¥ </span></span><br><span class="line"><span class="comment">//1ã€å®ä¾‹åŒ–å¤–éƒ¨ç±» </span></span><br><span class="line">Outer outObject = <span class="keyword">new</span> Outer(); </span><br><span class="line"><span class="comment">//2ã€é€šè¿‡å¤–éƒ¨ç±»è°ƒç”¨å†…éƒ¨ç±» </span></span><br><span class="line">Outer.Inner inObject = outObject.<span class="function">new <span class="title">Inner</span><span class="params">()</span></span>; </span><br><span class="line"><span class="comment">//æµ‹è¯•ï¼Œè°ƒç”¨å†…éƒ¨ç±»ä¸­çš„æ–¹æ³• </span></span><br><span class="line">    inObject.in();<span class="comment">//æ‰“å°ï¼šè¿™æ˜¯å†…éƒ¨ç±»æ–¹æ³• </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123; </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span></span>&#123; </span><br><span class="line">System.out.println(<span class="string">&quot;è¿™æ˜¯å¤–éƒ¨ç±»æ–¹æ³•&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span></span>&#123; </span><br><span class="line">System.out.println(<span class="string">&quot;è¿™æ˜¯é™æ€å†…éƒ¨ç±»æ–¹æ³•&quot;</span>); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </span><br><span class="line"><span class="comment">//å®ä¾‹åŒ–é™æ€å†…éƒ¨ç±»</span></span><br><span class="line">    <span class="comment">//é™æ€å†…éƒ¨ç±»èƒ½å¤Ÿç›´æ¥è¢«å¤–éƒ¨ç±»ç»™å®ä¾‹åŒ–ï¼Œä¸éœ€è¦ä½¿ç”¨å¤–éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">Outer.Inner inner = <span class="keyword">new</span> Outer.Inner();</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><strong>é™æ€ç±»ä¸èƒ½è®¿é—®éé™æ€å±æ€§ï¼ŒåŒ…æ‹¬è‡ªå·±ç±»çš„éé™æ€å±æ€§</strong></li></ul><p>æé†’ï¼š</p><ul><li>staticä¿®é¥°æˆå‘˜å˜é‡ï¼šæ•´ä¸ªç±»çš„å®ä¾‹å…±äº«é™æ€å˜é‡</li><li>staticä¿®é¥°æ–¹æ³•ï¼šé™æ€æ–¹æ³•ï¼Œåªèƒ½å¤Ÿè®¿é—®ç”¨staticä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œè€Œéé™æ€æ–¹æ³•å¯ä»¥è®¿é—®staticä¿®é¥°çš„æ–¹æ³•æˆ–å±æ€§</li><li>è¢«staticä¿®é¥°äº†çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•èƒ½ç›´æ¥è¢«ç±»åè°ƒç”¨ã€‚</li><li>staticä¸èƒ½ä¿®é¥°å±€éƒ¨å˜é‡ï¼Œåˆ‡è®°ï¼Œä¸è¦ææ··æ·†äº†ï¼Œstaticå¹³å¸¸å°±ç”¨æ¥ä¿®é¥°æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚</li></ul><h3 id="å±€éƒ¨å†…éƒ¨ç±»"><a href="#å±€éƒ¨å†…éƒ¨ç±»" class="headerlink" title="å±€éƒ¨å†…éƒ¨ç±»"></a>å±€éƒ¨å†…éƒ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123; </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span></span>&#123; </span><br><span class="line">System.out.println(<span class="string">&quot;è¿™æ˜¯å¤–éƒ¨ç±»æ–¹æ³•&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123; </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;è¿™æ˜¯å±€éƒ¨å†…éƒ¨ç±»&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        Inner In = <span class="keyword">new</span> Inner();</span><br><span class="line">        In.in();</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><ul><li><strong>å¦‚æœè¦è®¿é—®å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆè¯¥å±€éƒ¨å˜é‡è¦ç”¨finalä¿®é¥°</strong></li><li>åŸå› ï¼šå¦‚æœä¸ç”¨finalä¿®é¥°ï¼Œå½“å±€éƒ¨å†…éƒ¨ç±»è¢«å®ä¾‹åŒ–åï¼Œæ–¹æ³•å¼¹æ ˆï¼Œå±€éƒ¨å˜é‡éšä¹‹è·Ÿç€æ¶ˆå¤±ï¼Œè¿™ä¸ªæ—¶å€™å±€éƒ¨å†…éƒ¨ç±»å¯¹è±¡åœ¨æƒ³å»è°ƒç”¨è¯¥å±€éƒ¨å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¯¥å±€éƒ¨å˜é‡å·²ç»æ²¡äº†ï¼Œå½“å±€éƒ¨å˜é‡ç”¨finalä¿®é¥°åï¼Œå°±ä¼šå°†å…¶åŠ å…¥å¸¸é‡æ± ä¸­ï¼Œå³ä½¿æ–¹æ³•å¼¹æ ˆäº†ï¼Œè¯¥å±€éƒ¨å˜é‡è¿˜åœ¨å¸¸é‡æ± ä¸­å‘†ç€ï¼Œå±€éƒ¨å†…éƒ¨ç±»ä¹Ÿå°±è¿˜èƒ½å¤Ÿè°ƒç”¨</li></ul><h3 id="åŒ¿åå†…éƒ¨ç±»"><a href="#åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="åŒ¿åå†…éƒ¨ç±»"></a>åŒ¿åå†…éƒ¨ç±»</h3><p>åŒ¿åå¯¹è±¡ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡åªè¦ä½¿ç”¨ä¸€æ¬¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦new Object().method()ï¼Œè€Œä¸éœ€è¦ç»™è¿™ä¸ªå®ä¾‹ä¿å­˜åˆ°è¯¥ç±»å‹å˜é‡ä¸­å»ã€‚</p><p>åŒ¿åå†…éƒ¨ç±»ï¼šæˆ‘ä¹Ÿåªéœ€è¦ç”¨ä¸€æ¬¡ï¼Œé‚£æˆ‘å°±ä¸éœ€è¦åœ¨ç±»ä¸­å…ˆå®šä¹‰ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œè€Œæ˜¯ç­‰å¾…éœ€è¦ç”¨çš„æ—¶å€™ï¼Œæˆ‘å°±åœ¨ä¸´æ—¶å®ç°è¿™ä¸ªå†…éƒ¨ç±»ï¼Œå› ä¸ºç”¨æ¬¡æ•°å°‘ï¼Œå¯èƒ½å°±è¿™ä¸€æ¬¡ï¼Œé‚£ä¹ˆè¿™æ ·å†™å†…éƒ¨ç±»ï¼Œæ›´æ–¹ä¾¿ã€‚<strong>å·¥ä½œä¸­å¯èƒ½é‡åˆ°çš„æœ€å¤š</strong></p><ol><li><p>åŒ¿åå†…éƒ¨ç±»éœ€è¦ä¾æ‰˜äºå…¶ä»–ç±»æˆ–è€…æ¥å£æ¥åˆ›å»º</p><ul><li><p>å¦‚æœä¾æ‰˜çš„æ˜¯ç±»,é‚£ä¹ˆåˆ›å»ºå‡ºæ¥çš„åŒ¿åå†…éƒ¨ç±»å°±é»˜è®¤æ˜¯è¿™ä¸ªç±»çš„å­ç±»</p></li><li><p>å¦‚æœä¾æ‰˜çš„æ˜¯æ¥å£,é‚£ä¹ˆåˆ›å»ºå‡ºæ¥çš„åŒ¿åå†…éƒ¨ç±»å°±é»˜è®¤æ˜¯è¿™ä¸ªæ¥å£çš„å®ç°ç±»ã€‚</p></li></ul></li><li><p>åŒ¿åå†…éƒ¨ç±»çš„å£°æ˜å¿…é¡»æ˜¯åœ¨ä½¿ç”¨newå…³é”®å­—çš„æ—¶å€™</p><ul><li>åŒ¿åå†…éƒ¨ç±»çš„å£°æ˜åŠåˆ›å»ºå¯¹è±¡å¿…é¡»ä¸€æ°”å‘µæˆ,å¹¶ä¸”ä¹‹åèƒ½åå¤ä½¿ç”¨,å› ä¸ºæ²¡æœ‰åå­—ã€‚</li></ul></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </span><br><span class="line"><span class="comment">//å¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£ä¸­çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦èµ°ä¸€æ­¥ï¼Œå°±æ˜¯ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼Œç›´æ¥å°†å…¶ ç±»çš„å¯¹è±¡åˆ›å»ºå‡ºæ¥ã€‚ </span></span><br><span class="line">        <span class="keyword">new</span> Test1()&#123; </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å®ç°äº†Test1æ¥å£çš„æ–¹æ³•&quot;</span>); </span><br><span class="line">            &#125; </span><br><span class="line">        &#125;.method();</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Test1</span></span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…éƒ¨ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å¤„ç†æ…¢æŸ¥è¯¢</title>
      <link href="/2021/07/04/%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E6%85%A2%E6%9F%A5%E8%AF%A2/"/>
      <url>/2021/07/04/%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E6%85%A2%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•å¤„ç†æ…¢æŸ¥è¯¢"><a href="#å¦‚ä½•å¤„ç†æ…¢æŸ¥è¯¢" class="headerlink" title="å¦‚ä½•å¤„ç†æ…¢æŸ¥è¯¢"></a>å¦‚ä½•å¤„ç†æ…¢æŸ¥è¯¢</h1><p>æ€è·¯ï¼š</p><ol><li>SQLä¼˜åŒ–</li><li>ç´¢å¼•ä¼˜åŒ–</li><li>è¡¨ç»“æ„å’Œå­˜å‚¨å¼•æ“</li><li>æ•°æ®åº“é…ç½®</li><li>ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿ</li></ol><p>å°ç»“ï¼š</p><ol><li>æ£€æŸ¥æ˜¯å¦æŸ¥è¯¢äº†å¤šä½™çš„åˆ—ï¼Œå¦‚ä½•åªéœ€è¦æŸ¥è¯¢idå’Œnameï¼Œç»“æœselect *ã€‚</li><li>explain SQL æŸ¥çœ‹æ˜¯å¦èµ°äº†ç´¢å¼•</li><li>å¦‚æœæ˜¯è”åˆç´¢å¼•ï¼ŒæŸ¥çœ‹æ˜¯å¦èµ°äº†è”åˆç´¢å¼•ï¼ˆå°†èŒƒå›´æŸ¥è¯¢çš„æ¡ä»¶æ”¾åœ¨è”åˆç´¢å¼•çš„åé¢ï¼Œå¦‚æœè”åˆç´¢å¼•abcï¼Œa=1 and b&gt;2 and c=3,è¿™æ ·åªèµ°äº†a=1 and b&gt;2ï¼Œè”åˆç´¢å¼•è¦æ»¡è¶³æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œé‡åˆ°èŒƒå›´æŸ¥è¯¢å°±ä¼šåœä¸‹æ¥ï¼‰</li><li>é¿å…nullæ•°æ®</li><li>å°½å¯èƒ½ä½¿ç”¨limitæ¥å‡å°‘æ•°æ®é‡</li><li>å°½å¯èƒ½åœ°ç¼©å°æ•°æ®ç±»å‹çš„é•¿åº¦</li><li>å°½é‡ä¸ä½¿ç”¨ç«™å¤–çš„æ•°æ®åº“</li><li>é€‰ç”¨åˆé€‚çš„æ•°æ®åº“å¼•æ“</li><li>æœåŠ¡é™çº§</li><li>åˆ†åº“åˆ†è¡¨</li><li>æé«˜ç¡¬ä»¶æ°´å¹³</li></ol>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä½è¿ç®—å°ç»“</title>
      <link href="/2021/07/03/Java%E4%BD%8D%E8%BF%90%E7%AE%97%E5%B0%8F%E7%BB%93/"/>
      <url>/2021/07/03/Java%E4%BD%8D%E8%BF%90%E7%AE%97%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaä½è¿ç®—ç¬¦å°ç»“"><a href="#Javaä½è¿ç®—ç¬¦å°ç»“" class="headerlink" title="Javaä½è¿ç®—ç¬¦å°ç»“"></a>Javaä½è¿ç®—ç¬¦å°ç»“</h1><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/SunArmy/p/9837348.html">Java ä½è¿ç®—ç¬¦ &amp;ã€|ã€^ã€~ã€&lt;&lt;ã€&gt;&gt;ã€&gt;&gt;&gt;)</a></p><h2 id="ä¸è¿ç®—ç¬¦ï¼ˆ-amp-ï¼‰"><a href="#ä¸è¿ç®—ç¬¦ï¼ˆ-amp-ï¼‰" class="headerlink" title="ä¸è¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰"></a>ä¸è¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŒä¸º1ï¼Œå–1ï¼Œå¦åˆ™ä¸º0</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š4&amp;7</span></span><br><span class="line"><span class="comment">//4ï¼š0000 0100</span></span><br><span class="line"><span class="comment">//7ï¼š0000 0111</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4ï¼š0000 0100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ 4&amp;7=4</span></span><br></pre></td></tr></table></figure><h2 id="æˆ–è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#æˆ–è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="æˆ–è¿ç®—ç¬¦ï¼ˆ|ï¼‰"></a>æˆ–è¿ç®—ç¬¦ï¼ˆ|ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŒä¸º0ï¼Œå–0ï¼Œå¦åˆ™ä¸º1</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š5|9</span></span><br><span class="line"><span class="comment">//5ï¼š0000 0101</span></span><br><span class="line"><span class="comment">//9ï¼š0000 1001</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//13ï¼š0000 1101</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ 5|9=13</span></span><br></pre></td></tr></table></figure><h2 id="å¼‚æˆ–è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#å¼‚æˆ–è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="å¼‚æˆ–è¿ç®—ç¬¦ï¼ˆ^ï¼‰"></a>å¼‚æˆ–è¿ç®—ç¬¦ï¼ˆ^ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›¸åŒä¸º0ï¼Œå¦åˆ™ä¸º1   å¦ä¸€ç§ç†è§£ï¼šæ— è¿›ä½ç›¸åŠ </span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š15^7</span></span><br><span class="line"><span class="comment">//15ï¼š0000 1111</span></span><br><span class="line"><span class="comment">//7ï¼š0000 0111</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//8ï¼š0000 1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ 15^7=8</span></span><br></pre></td></tr></table></figure><h2 id="å–åè¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#å–åè¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="å–åè¿ç®—ç¬¦ï¼ˆ~ï¼‰"></a>å–åè¿ç®—ç¬¦ï¼ˆ~ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å–å</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š~15</span></span><br><span class="line"><span class="comment">//15ï¼š0000 1111</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//-16ï¼š1111 0000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ ~15=-16</span></span><br></pre></td></tr></table></figure><h2 id="å·¦ç§»è¿ç®—ç¬¦ï¼ˆ-lt-lt-ï¼‰"><a href="#å·¦ç§»è¿ç®—ç¬¦ï¼ˆ-lt-lt-ï¼‰" class="headerlink" title="å·¦ç§»è¿ç®—ç¬¦ï¼ˆ&lt;&lt;ï¼‰"></a>å·¦ç§»è¿ç®—ç¬¦ï¼ˆ&lt;&lt;ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å·¦ç§»</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š12&lt;&lt;3</span></span><br><span class="line"><span class="comment">//12ï¼š0000 1100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//96ï¼š0110 0000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ 12&lt;&lt;3=96</span></span><br></pre></td></tr></table></figure><h2 id="å³ç§»è¿ç®—ç¬¦ï¼ˆ-gt-gt-ï¼‰"><a href="#å³ç§»è¿ç®—ç¬¦ï¼ˆ-gt-gt-ï¼‰" class="headerlink" title="å³ç§»è¿ç®—ç¬¦ï¼ˆ&gt;&gt;ï¼‰"></a>å³ç§»è¿ç®—ç¬¦ï¼ˆ&gt;&gt;ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å³ç§»ï¼ˆæœ‰ç¬¦å·ä½å³ç§»,è¡¥ä½ä¸ç¬¦å·ä½ç›¸åŒï¼‰</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š12&gt;&gt;2</span></span><br><span class="line"><span class="comment">//12ï¼š0000 1100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ï¼š0000 0011</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ 12&gt;&gt;2=3</span></span><br><span class="line"><span class="comment">/*************************/</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š-8&gt;&gt;2</span></span><br><span class="line"><span class="comment">//-8ï¼š1111 1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//-2ï¼š1111 1110</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ -8&gt;&gt;2=-2</span></span><br></pre></td></tr></table></figure><h2 id="æ— ç¬¦å·å³ç§»ï¼ˆ-gt-gt-gt-ï¼‰"><a href="#æ— ç¬¦å·å³ç§»ï¼ˆ-gt-gt-gt-ï¼‰" class="headerlink" title="æ— ç¬¦å·å³ç§»ï¼ˆ&gt;&gt;&gt;ï¼‰"></a>æ— ç¬¦å·å³ç§»ï¼ˆ&gt;&gt;&gt;ï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å³ç§»ï¼ˆæ— ç¬¦å·ä½å³ç§»ï¼Œè¡¥ä½ä¸º0ï¼‰</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š12&gt;&gt;2</span></span><br><span class="line"><span class="comment">//12ï¼š0000 1100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ï¼š0000 0011</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å³ 12&gt;&gt;&gt;2=3</span></span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="å–æŸæ•°å­—çš„äºŒè¿›åˆ¶æœ€å³è¾¹çš„1"><a href="#å–æŸæ•°å­—çš„äºŒè¿›åˆ¶æœ€å³è¾¹çš„1" class="headerlink" title="å–æŸæ•°å­—çš„äºŒè¿›åˆ¶æœ€å³è¾¹çš„1"></a>å–æŸæ•°å­—çš„äºŒè¿›åˆ¶æœ€å³è¾¹çš„1</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// N &amp; ( ~N + 1 )</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚ï¼š12&amp;(~12+1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//12ï¼š0000 1100</span></span><br><span class="line"><span class="comment">//~12:1111 0011</span></span><br><span class="line"><span class="comment">//~12+1:1111 0100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//12ï¼š0000 1100</span></span><br><span class="line"><span class="comment">//~12+1:1111 0100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4:0000 0100</span></span><br></pre></td></tr></table></figure><h3 id="äº¤æ¢ä¸¤ä¸ªæ•°ï¼Œæ— é¢å¤–ç©ºé—´æ¶ˆè€—"><a href="#äº¤æ¢ä¸¤ä¸ªæ•°ï¼Œæ— é¢å¤–ç©ºé—´æ¶ˆè€—" class="headerlink" title="äº¤æ¢ä¸¤ä¸ªæ•°ï¼Œæ— é¢å¤–ç©ºé—´æ¶ˆè€—"></a>äº¤æ¢ä¸¤ä¸ªæ•°ï¼Œæ— é¢å¤–ç©ºé—´æ¶ˆè€—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swapNum</span><span class="params">(<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">    num1 ^= num2;</span><br><span class="line">    num2 ^= num1;</span><br><span class="line">    num1 ^= num2;</span><br><span class="line">    System.out.println(num1);</span><br><span class="line">    System.out.println(num2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸€ä¸ªæ•°ç»„ä¸­åªæœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°"><a href="#ä¸€ä¸ªæ•°ç»„ä¸­åªæœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°" class="headerlink" title="ä¸€ä¸ªæ•°ç»„ä¸­åªæœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°"></a>ä¸€ä¸ªæ•°ç»„ä¸­åªæœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¶æ•°ä¸ªç›¸åŒçš„æ•° å¼‚æˆ– ä¸€å®šä¸º0</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printOneNum</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> eor=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        eor ^= arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(eor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸¤ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°"><a href="#ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸¤ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°" class="headerlink" title="ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸¤ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°"></a>ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸¤ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºè¿™ç§æ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¶æ•°ä¸ªç›¸åŒçš„æ•° å¼‚æˆ– ä¸€å®šä¸º0</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printTwoNum</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> eor=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        <span class="comment">//å‡è®¾è¿™ä¸¤ä¸ªæ•°ä¸ºaï¼Œb  å› ä¸ºa,bä¸ºå¥‡æ•°ä¸ªï¼Œé‚£ä¹ˆæœ€åeor=a^b</span></span><br><span class="line">        eor ^= arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¿™é“é¢˜ä¸­è¯·æŠŠaï¼Œbéƒ½è½¬æ¢æˆäºŒè¿›åˆ¶æ¥åˆ†æï¼ï¼ï¼</span></span><br><span class="line">    <span class="comment">//è¿™é“é¢˜ä¸­è¯·æŠŠaï¼Œbéƒ½è½¬æ¢æˆäºŒè¿›åˆ¶æ¥åˆ†æï¼ï¼ï¼</span></span><br><span class="line">    <span class="comment">//è¿™é“é¢˜ä¸­è¯·æŠŠaï¼Œbéƒ½è½¬æ¢æˆäºŒè¿›åˆ¶æ¥åˆ†æï¼ï¼ï¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> rightOne=eor &amp; (~eor+<span class="number">1</span>);<span class="comment">//å–a^bæœ€å³è¾¹çš„1</span></span><br><span class="line">    <span class="keyword">int</span> onlyOne=<span class="number">0</span>;<span class="comment">//ç”¨äºå–å‡ºaæˆ–bä¸­çš„ä¸€ä¸ª</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="comment">//ç”±é¢˜å¯çŸ¥aï¼Œbä¸åŒä¸”ä¸ºå¥‡æ•°ä¸ªï¼Œå…¶ä»–æ•°ä¸ºå¶æ•°ä¸ª</span></span><br><span class="line">        <span class="comment">//ç”±rightOneå¾—åˆ°aï¼Œbçš„å…¶ä¸­ä¸€ä¸ªä¸åŒä¹‹å¤„</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å› ä¸ºå¶æ•°ä¸ªç›¸åŒçš„æ•° å¼‚æˆ– ä¸€å®šä¸º0</span></span><br><span class="line">        <span class="comment">//æ‰€ä»¥å¯ä»¥ç†è§£ä¸ºï¼šaï¼Œbä¸ªæ•°å‡ä¸º1</span></span><br><span class="line">        <span class="comment">//è®¾å…¶ä»–æ•°ä¸ºcã€dã€e...</span></span><br><span class="line">        <span class="comment">//æ­¤å¤„å°†aï¼Œbåˆ†ä¸º  aï¼Œccï¼Œdd...  å’Œ  bï¼Œeeï¼Œff...</span></span><br><span class="line">        <span class="keyword">if</span> ((arr[i] &amp; rightOne)!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//æ‰€ä»¥æœ€åonlyOneä¸ºaæˆ–è€…bï¼Œå†æŠŠå®ƒä¸eorå¼‚æˆ–å¾—å‡ºå¦ä¸€ä¸ªæ•°</span></span><br><span class="line">            onlyOne ^= arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(onlyOne);</span><br><span class="line">    System.out.println(onlyOne^eor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çŠ¶æ€å“åº”ç </title>
      <link href="/2021/07/03/%E7%8A%B6%E6%80%81%E5%93%8D%E5%BA%94%E7%A0%81/"/>
      <url>/2021/07/03/%E7%8A%B6%E6%80%81%E5%93%8D%E5%BA%94%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="çŠ¶æ€å“åº”ç "><a href="#çŠ¶æ€å“åº”ç " class="headerlink" title="çŠ¶æ€å“åº”ç "></a>çŠ¶æ€å“åº”ç </h1><p>å‚è€ƒäºï¼š<a href="https://www.cnblogs.com/isykw/p/6115469.html">HTTPçŠ¶æ€ç (å“åº”ç ) - isykw - åšå®¢å›­ (cnblogs.com)</a></p><p><a href="https://blog.csdn.net/lghuntfor/article/details/88606444">HTTPå“åº”çŠ¶æ€ç è¯¦è§£_lghuntforçš„ä¸“æ -CSDNåšå®¢_çŠ¶æ€å“åº”ç </a></p><h2 id="çŠ¶æ€ç åˆ†ç±»"><a href="#çŠ¶æ€ç åˆ†ç±»" class="headerlink" title="çŠ¶æ€ç åˆ†ç±»"></a>çŠ¶æ€ç åˆ†ç±»</h2><ul><li>1XXï¼šä¿¡æ¯</li><li>2XXï¼šæˆåŠŸ</li><li>3XXï¼šé‡å®šå‘</li><li>4XXï¼šå®¢æˆ·ç«¯é”™è¯¯</li><li>5XXï¼šæœåŠ¡å™¨é”™è¯¯</li></ul><h2 id="å¸¸è§çš„çŠ¶æ€ç "><a href="#å¸¸è§çš„çŠ¶æ€ç " class="headerlink" title="å¸¸è§çš„çŠ¶æ€ç "></a>å¸¸è§çš„çŠ¶æ€ç </h2><ul><li>100ï¼šç»§ç»­è¾“å…¥</li><li>101ï¼šåˆ‡æ¢åè®®</li><li>200ï¼šå“åº”æˆåŠŸ</li><li>302ï¼šé‡å®šå‘</li><li>307ï¼šè½¬å‘</li><li>401ï¼šèº«ä»½éªŒè¯</li><li>403ï¼šç¦æ­¢è®¿é—®</li><li>404ï¼šèµ„æºä¸å­˜åœ¨</li><li>500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li><li>502ï¼šç½‘å…³é”™è¯¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2021/07/03/hello-world/"/>
      <url>/2021/07/03/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
